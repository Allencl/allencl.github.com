"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4696,8167],{89337:function(e,t,l){l.d(t,{$w:function(){return c},AT:function(){return s},NM:function(){return r},ew:function(){return n},jt:function(){return i},vU:function(){return o}});var a=l(37184);const i=async(e={})=>await(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e}),s=async e=>await(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"}),o=async e=>await(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"}),n=async e=>await(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"}),r=async e=>await(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"}),c=async e=>await(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload})},5878:function(e,t,l){l.d(t,{b:function(){return a}});l(33948),l(57658);const a=(e,t,l,a)=>{let i={id:t||"id",parentId:l||"parentId",childrenList:a||"children"};var s={},o={},n=[];for(let c of e){let e=c[i.parentId];null==s[e]&&(s[e]=[]),o[c[i.id]]=c,s[e].push(c)}for(let c of e){let e=c[i.parentId];null==o[e]&&n.push(c)}for(let c of n)r(c);function r(e){if(null!==s[e[i.id]]&&(e[i.childrenList]=s[e[i.id]]),e[i.childrenList])for(let t of e[i.childrenList])r(t)}return n}},2243:function(e,t,l){l.d(t,{Z:function(){return w}});var a=l(73396),i=l(87139);const s={style:{height:"98%","padding-bottom":"40px"}},o={style:{height:"100%"}},n={style:{position:"relative",top:"4px"}},r=["onClick"],c={class:"text-truncate",style:{height:"24px"}},u={key:2,class:"text-center",style:{"margin-top":"16px"}};function p(e,t,l,p,d,m){const h=(0,a.up)("van-field"),f=(0,a.up)("v-col"),w=(0,a.up)("v-btn"),g=(0,a.up)("v-row"),y=(0,a.up)("van-search"),_=(0,a.up)("van-checkbox"),k=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(h,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fieldValue=t),"is-link":"",readonly:"",required:l.required,label:l.label,placeholder:l.placeholder,autocomplete:"off",type:l.multiple?"textarea":"text",onClick:m.fieldClick},null,8,["modelValue","required","label","placeholder","type","onClick"]),(0,a.Wm)(k,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=t=>e.showPicker=t),style:{padding:"12px 12px 4px 12px",height:"60%",width:"90%"},round:""},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",o,[(0,a.Wm)(g,{"no-gutters":"",style:{"font-weight":"bold","border-bottom":"1px solid #ccc","padding-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{cols:"6"},{default:(0,a.w5)((()=>[(0,a._)("p",null,(0,i.zw)(l.label)+"-选择框",1)])),_:1}),(0,a.Wm)(f,{cols:"6",class:"text-right"},{default:(0,a.w5)((()=>[(0,a._)("span",n,(0,i.zw)(e.BufferOption.filter((e=>e._checked)).length),1),l.selectAll?((0,a.wg)(),(0,a.j4)(w,{key:0,onClick:m.selectAllHandle,color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("全选")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1}),l.showSearch?((0,a.wg)(),(0,a.j4)(g,{key:0,"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{cols:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:e.valueSearch,"onUpdate:modelValue":t[1]||(t[1]=t=>e.valueSearch=t),shape:"",placeholder:l.placeholderSearch,style:{"padding-left":"0px"},clearable:!1},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(f,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:t[2]||(t[2]=e=>m.searchHandle(!0)),variant:"plain",color:"primary",block:"",style:{"margin-top":"8px"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 查询 ")])),_:1})])),_:1}),(0,a.Wm)(f,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:t[3]||(t[3]=e=>m.searchHandle(!1)),variant:"plain",block:"",style:{"margin-top":"8px"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 重置 ")])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0),e.BufferOption.length?((0,a.wg)(),(0,a.iD)("ul",{key:1,style:(0,i.j5)(`height: ${l.showSearch?"73%":"90%"};overflow-y:auto;padding-right:12px;padding-bottom: 20px;`)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.BufferOption,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,style:(0,i.j5)(`padding: 6px 22px 6px 6px;position:relative;color:${e._searchColor?"#FF9800":"#000"};`),onClick:t=>m.checkChange(e)},[(0,a._)("p",c,(0,i.zw)(e.text),1),(0,a.Wm)(_,{style:{position:"absolute",top:"8px",right:"0px"},modelValue:e._checked,"onUpdate:modelValue":t=>e._checked=t,shape:"square","checked-color":"#4CAF50",disabled:"",class:"custem-select-checkbox"},null,8,["modelValue","onUpdate:modelValue"])],12,r)))),128))],4)):((0,a.wg)(),(0,a.iD)("p",u,"无数据!"))]),(0,a.Wm)(g,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{variant:"plain",block:"",onClick:t[4]||(t[4]=()=>e.showPicker=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 取消 ")])),_:1})])),_:1}),(0,a.Wm)(f,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{variant:"plain",color:"primary",block:"",onClick:m.confirmHandle},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}l(38862),l(73210),l(26699),l(32023);var d=l(20868),m={components:{},emits:["update:modelValue","onChange","onFieldClick","onSearchChange"],data:()=>({BufferOption:[],selectedValues:[],columns:[],fieldValue:"",showPicker:!1,valueSearch:""}),watch:{option:{handler(e=[]){this.BufferOption=JSON.parse(JSON.stringify(e)),this.$nextTick((()=>{this.modelValue&&this.setValue(this.modelValue)}))},deep:!0,immediate:!0},showPicker:{handler(e){this.$nextTick((()=>{if(e&&this.modelValue)if(this.multiple){const e=this.modelValue.split(",")||[];e.map((e=>{this.BufferOption.map((t=>{var l=t;return t.value==e&&(l._checked=!0),l}))}))}else this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==this.modelValue})))}))},deep:!0,immediate:!0}},methods:{showModle(){this.showPicker=!0},fieldClick(){this.disabled||(this.forbidShow||(this.showPicker=!0),this.$emit("onFieldClick"))},setfieldValue(e=""){this.fieldValue=e},reset(){this.fieldValue="",this.BufferOption.map((e=>Object.assign(e,{_checked:!1}))),this.$emit("update:modelValue","")},setValue(e=""){if(this.multiple){const t=e.split(",")||[];t.map((e=>{this.BufferOption.map((t=>{var l=t;return t.value==e&&(l._checked=!0),l}))})),this.fieldValue=this.BufferOption.filter((e=>e._checked)).map((e=>e.text)).join()}else{const t=JSON.parse(JSON.stringify(this.BufferOption)).filter((t=>t.value==e))[0]||{};this.fieldValue=t.text}},confirmHandle(){const{multiple:e}=this,t=this.BufferOption.filter((e=>1==e._checked));e?(this.fieldValue=t.map((e=>e.text)).join(),this.$emit("update:modelValue",t.map((e=>e.value)).join()||""),this.$emit("onChange",t.map((e=>e.value)).join())):(this.fieldValue=(t[0]||{}).text,this.$emit("update:modelValue",(t[0]||{}).value||""),this.$emit("onChange",(t[0]||{}).value,t[0]||{})),this.showPicker=!1},checkChange(e){const{multiple:t}=this,{_checked:l,value:a}=e;t?this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==a?!l:e._checked}))):this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==a&&!l})))},multipleHandle(){const e=this.BufferOption.filter((e=>e._checked)),t=e.map((e=>e.value)).join();this.showPicker=!1,this.fieldValue=e.map((e=>e.text)).join(),this.$emit("update:modelValue",t),this.$emit("onChange",e)},searchHandle(e){const t=this.valueSearch.trim(),{filterSearch:l}=this;if(l&&e){const e=this.BufferOption.map((e=>Object.assign(e,{_searchColor:!1}))),l=e.filter((e=>e.text.includes(t))).map((e=>Object.assign(e,{_searchColor:!0})));if(!l.length)return void(0,d.LJ)("不存在！");const a=e.filter((e=>!e.text.includes(t))),i=a.filter((e=>e._checked)),s=a.filter((e=>!e._checked));this.BufferOption=l.concat(i).concat(s)}else e?this.$emit("onSearchChange",t):(this.valueSearch="",this.BufferOption=this.option,this.$nextTick((()=>{this.BufferOption=this.BufferOption.map((e=>Object.assign(e,{_checked:!1})))})),this.$emit("onSearchChange",""))},selectAllHandle(){this.BufferOption.map((e=>Object.assign(e,{_checked:!0})))}},props:{modelValue:{},disabled:{type:Boolean,default:()=>!1},showSearch:{type:Boolean,default:()=>!1},forbidShow:{type:Boolean,default:()=>!1},multiple:{type:Boolean,default:()=>!1},label:{type:String,default:()=>"标题"},placeholder:{type:String,default:()=>"请选择"},placeholderSearch:{type:String,default:()=>"请输入搜索关键词"},option:{type:Array,default:()=>[]},selectAll:{type:Boolean,default:()=>!1},required:{type:Boolean,default:()=>!1},filterSearch:{type:Boolean,default:()=>!1}}},h=l(40089);const f=(0,h.Z)(m,[["render",p]]);var w=f},88575:function(e,t,l){l.d(t,{Z:function(){return W}});var a=l(73396),i=l(87139);const s={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,a._)("span",null,"第",-1),n={style:{"padding-left":"1px","padding-right":"1px"}},r=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,a._)("span",null,"共",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,a._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,a._)("span",null,"条",-1),f={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(e,t,l,g,y,_){const k=(0,a.up)("v-icon"),x=(0,a.up)("v-btn"),b=(0,a.up)("v-card");return(0,a.wg)(),(0,a.iD)("span",null,[e.paging&&l.pagingShow?((0,a.wg)(),(0,a.j4)(b,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:_.previousHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:_.nextHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,a._)("span",s,[o,(0,a._)("span",n,(0,i.zw)(e.current),1),r,c,(0,a._)("span",u,(0,i.zw)(e.page),1),p,d,(0,a._)("span",m,(0,i.zw)(e.totalNum),1),h]),(0,a._)("span",f,[l.showSearchBtn?((0,a.wg)(),(0,a.j4)(x,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:_.searchClick,variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{size:"24",icon:"mdi-magnify"}),(0,a.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(x,{onClick:_.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,a.kq)("",!0),e.items.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.items,((t,l)=>(0,a.WI)(e.$slots,"tableBody",{key:l,items:t,_index:l}))),128)):((0,a.wg)(),(0,a.iD)("p",w,[(0,a.Wm)(k,{icon:"mdi-emoticon-sad-outline"}),(0,a.Uk)(" 无数据！ ")]))])}var y=l(21801),_=l(37184);var k=l(20868),x={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:e,url:t}=this;e&&t&&this.initFunc()},methods:{previousHandle(){const{current:e}=this;1!=e?(this.current=e-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,k.LJ)("第一页！")},nextHandle(){const{current:e,page:t}=this;e>=t?(0,k.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(e=1,t){const{url:l,params:a={},children:i,method:s,formatData:o}=this;if(i)return this.items=i,void(this.paging=!1);const n=(0,y.Z)((0,y.Z)({pageNum:e,pageSize:10},a),t),{code:r,total:c=0,msg:u="",data:p,rows:d}=await(0,_.i)({method:s,url:l,payload:"post"==s?n:{},url_params:"get"==s?n:{}});200==r&&(this.totalNum=c,this.current=e,this.page=Math.ceil(c/n.pageSize),this.items=o?o(p||d||[]):p||d||[])},refreshClick(){const{refreshFunc:e}=this;!e&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((e=>Object.assign(e,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},b=l(40089);const v=(0,b.Z)(x,[["render",g]]);var W=v},98167:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=l(73396);const i=(0,a._)("div",{style:{height:"12px"}},null,-1),s=(0,a._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否紧急",-1),o=(0,a._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否已收货",-1),n=(0,a._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否外检",-1),r={style:{"margin-top":"32px","margin-bottom":"62px"}};function c(e,t,l,c,u,p){const d=(0,a.up)("AppBarPage"),m=(0,a.up)("van-field"),h=(0,a.up)("v-btn"),f=(0,a.up)("van-cascader"),w=(0,a.up)("van-popup"),g=(0,a.up)("SelectComponents"),y=(0,a.up)("v-col"),_=(0,a.up)("v-switch"),k=(0,a.up)("v-row");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(d),i,(0,a.Wm)(m,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fieldValue=t),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",required:"",onClick:t[1]||(t[1]=t=>e.show=!0)},null,8,["modelValue"]),(0,a.Wm)(w,{show:e.show,"onUpdate:show":t[4]||(t[4]=t=>e.show=t),round:"",position:"bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:t[2]||(t[2]=()=>e.show=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1}),e.showFactory?((0,a.wg)(),(0,a.j4)(f,{key:0,title:"请选择工厂节点",options:e.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:t[3]||(t[3]=t=>e.show=!1),onChange:p.onFinish},null,8,["options","onChange"])):(0,a.kq)("",!0)])),_:1},8,["show"]),(0,a.Wm)(g,{modelValue:e.supplier,"onUpdate:modelValue":t[5]||(t[5]=t=>e.supplier=t),ref:"select678",label:"供应商",required:"",option:e.supplierSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(g,{modelValue:e.part,"onUpdate:modelValue":t[6]||(t[6]=t=>e.part=t),ref:"select567",label:"零件",required:"",showSearch:"",option:e.partSelectOption,onOnSearchChange:p.partSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,a.Wm)(g,{modelValue:e.process,"onUpdate:modelValue":t[7]||(t[7]=t=>e.process=t),ref:"select22",label:"过程类型",option:e.processSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(g,{modelValue:e.typeMaterial,"onUpdate:modelValue":t[8]||(t[8]=t=>e.typeMaterial=t),ref:"select663",label:"来料类型",required:"",option:e.typeMaterialSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(g,{modelValue:e.classes,"onUpdate:modelValue":t[9]||(t[9]=t=>e.classes=t),ref:"select33",label:"班次",option:e.classesSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(m,{modelValue:e.taskQty,"onUpdate:modelValue":t[10]||(t[10]=t=>e.taskQty=t),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"任务数量"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:e.receiptNo,"onUpdate:modelValue":t[11]||(t[11]=t=>e.receiptNo=t),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单编号"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:e.receiptline,"onUpdate:modelValue":t[12]||(t[12]=t=>e.receiptline=t),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单序号"},null,8,["modelValue"]),(0,a.Wm)(m,{modelValue:e.receiptQty,"onUpdate:modelValue":t[13]||(t[13]=t=>e.receiptQty=t),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"收货数量"},null,8,["modelValue"]),(0,a.Wm)(k,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{cols:"4"},{default:(0,a.w5)((()=>[s])),_:1}),(0,a.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.switchUrgency,"onUpdate:modelValue":t[14]||(t[14]=t=>e.switchUrgency=t),label:e.switchUrgency?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a.Wm)(k,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{cols:"4"},{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.switchReceived,"onUpdate:modelValue":t[15]||(t[15]=t=>e.switchReceived=t),label:e.switchReceived?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a.Wm)(k,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{cols:"4"},{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.switchOutInspect,"onUpdate:modelValue":t[16]||(t[16]=t=>e.switchOutInspect=t),label:e.switchOutInspect?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a._)("div",r,[(0,a.Wm)(k,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:p.resetClick,color:"warning"},{default:(0,a.w5)((()=>[(0,a.Uk)("重置")])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(y,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:p.searchClick,color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1})])])}l(73210),l(57658);var u=l(76496),p=l(2243),d=l(37184),m=l(20868),h=l(89337),f=l(5878),w={components:{AppBarPage:u.Z,SelectComponents:p.Z},emits:["searchHandle","resetHandle"],data:()=>({drawer:!1,showFactory:!0,show:!1,fieldValue:"",options:[],factoryID:"",process:"",processSelectOption:[],typeMaterial:"",typeMaterialSelectOption:[],switchUrgency:!1,switchReceived:!1,switchOutInspect:!1,classes:"",classesSelectOption:[],taskQty:"",receiptNo:"",receiptline:"",receiptQty:"",supplier:"",supplierSelectOption:[],part:"",partSelectOption:[]}),created(){this.initFunc(),this.getSupplierHttp(),this.partHttp()},methods:{FormatDictionary(e="",t=""){const l=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),a=l[e]||[],i=a.filter((e=>t==e.value))[0]||{};return i},resetClick(){this.factoryID="",this.part="",this.supplier="",this.process="",this.typeMaterial="",this.switchUrgency=!1,this.classes="",this.taskQty="",this.receiptNo="",this.receiptline="",this.receiptQty="",this.switchReceived=!1,this.switchOutInspect=!1,this.$refs.select678.reset(),this.$refs.select567.reset(),this.$refs.select22.reset(),this.$refs.select663.reset(),this.$refs.select33.reset(),this.fieldValue="",this.showFactory=!1,this.$nextTick((()=>{this.showFactory=!0}))},async initFunc(){const e=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t=e["QC_TASK_TYPE"]||[];this.processSelectOption=t.map((e=>Object.assign({text:e.lable,value:e.value})));const l=e["in_part_model"]||[];this.typeMaterialSelectOption=l.map((e=>Object.assign({text:e.lable,value:e.value})));const a=e["shiftno"]||[];this.classesSelectOption=a.map((e=>Object.assign({text:e.lable,value:e.value})));const{data:i=[]}=await(0,h.jt)(),s=(0,f.b)(i,"tmBasNodeLevelId","parentId");this.options=s},async getSupplierHttp(e=""){const{code:t,data:l=[]}=await(0,d.i)({url:"/iiot/supplier/list?delFlag=Y",method:"get"});200==t&&(this.supplierSelectOption=l.map((e=>Object.assign({text:`${e.supplierName}`,value:e.supplierCode}))))},async partHttp(e=""){const{code:t,data:l=[]}=await(0,d.i)({url:"/iiot/part/listPartForSelect",method:"get",url_params:{noOrName:e}});200==t&&(this.partSelectOption=l.map((e=>Object.assign({text:`${e.matnr||""}-${e.maktxC||""}`,value:e.tmBasPartId}))).splice(0,100))},partSearchChange(e){this.partHttp(e)},onFinish({selectedOptions:e}){if(!e.length)return;let t=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=t,this.fieldValue=e.map((e=>e.nodeLevelName)).join("/")},async searchClick(){if(!this.factoryID)return void(0,m.LJ)("工厂必填！");if(!this.supplier)return void(0,m.LJ)("供应商必填！");if(!this.part)return void(0,m.LJ)("零件必填！");if(!this.typeMaterial)return void(0,m.LJ)("来料类型必填！");if(!Number(this.taskQty))return void(0,m.LJ)("任务数量必填！");if(!this.receiptNo.trim())return void(0,m.LJ)("收货单号必填！");if(!this.receiptline.trim())return void(0,m.LJ)("收货单行号必填！");if(!Number(this.receiptQty))return void(0,m.LJ)("收货数量必填！");const e={taskType:"IQC",tmBasNodeLevelId:this.factoryID,tmBasPartId:this.part,tmBasSupplId:this.supplier,processType:this.process,partModel:this.typeMaterial,isUrgent:this.switchUrgency?"1":"0",shiftno:this.classes,taskQty:Number(this.taskQty),receiptNo:this.receiptNo,receiptline:this.receiptline,receiptQty:Number(this.receiptQty),isReceipt:this.switchReceived?"1":"0",isOutInspect:this.switchOutInspect?"1":"0"},{code:t,data:l={}}=await(0,d.i)({url:"/iiot/qmTask",method:"post",payload:e});200==t&&((0,m.XA)("提交成功！"),this.$router.push({path:"/qualityMaterial/index",query:{}}))},showDrawer(){this.drawer=!0}},props:{}},g=l(40089);const y=(0,g.Z)(w,[["render",c]]);var _=y},14342:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var a=l(73396),i=l(87139);const s=(0,a._)("div",{style:{height:"50px"}},null,-1),o={class:"text-truncate text-right font-weight-medium text-right text-teal-lighten-1",color:"primary"},n={class:"font-weight-light",style:{color:"#00E5FF"}},r=(0,a._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),c={class:"text-truncate font-weight-light"},u=(0,a._)("p",{class:"font-weight-medium text"},"配送单号:",-1),p={class:"text-truncate font-weight-light"},d=(0,a._)("p",{class:"font-weight-medium text"},"收货状态:",-1),m={class:"text-truncate font-weight-light",style:{color:"#00E5FF"}},h=(0,a._)("p",{class:"font-weight-medium text"},"供应商信息:",-1),f=["onClick"],w=(0,a._)("p",{class:"font-weight-medium text"},"报检时间:",-1),g={class:"text-truncate font-weight-light"},y=(0,a._)("p",{class:"font-weight-medium text"},"入库单编号:",-1),_={class:"text-truncate font-weight-light"},k={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},x=(0,a._)("span",{class:"font-weight-medium text"},"检验数量:",-1),b={class:"text-truncate text-right font-weight-medium text-right text-teal-lighten-1",color:"primary"},v={class:"font-weight-light",style:{color:"#00E5FF"}},W=(0,a._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),C={class:"text-truncate font-weight-light"},V=(0,a._)("p",{class:"font-weight-medium text"},"配送单号:",-1),S={class:"text-truncate font-weight-light"},O=(0,a._)("p",{class:"font-weight-medium text"},"收货状态:",-1),U={class:"text-truncate font-weight-light",style:{color:"#00E5FF"}},N=(0,a._)("p",{class:"font-weight-medium text"},"供应商信息:",-1),B=["onClick"],$=(0,a._)("p",{class:"font-weight-medium text"},"报检时间:",-1),F={class:"text-truncate font-weight-light"},q=(0,a._)("p",{class:"font-weight-medium text"},"入库单编号:",-1),j={class:"text-truncate font-weight-light"},z={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},I=(0,a._)("span",{class:"font-weight-medium text"},"检验数量:",-1);function Q(e,t,l,Q,T,H){const L=(0,a.up)("v-tab"),D=(0,a.up)("v-tabs"),J=(0,a.up)("AppBarPage"),M=(0,a.up)("v-btn"),A=(0,a.up)("ScanBarComponents"),P=(0,a.up)("v-badge"),R=(0,a.up)("v-col"),Z=(0,a.up)("v-row"),E=(0,a.up)("van-field"),Y=(0,a.up)("v-card"),G=(0,a.up)("TableComponents"),K=(0,a.up)("v-window-item"),X=(0,a.up)("v-window");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(J,null,{appTabs:(0,a.w5)((()=>[(0,a.Wm)(D,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{value:"1","hide-slider":""},{default:(0,a.w5)((()=>[(0,a.Uk)("待检验")])),_:1}),(0,a.Wm)(L,{value:"2","hide-slider":""},{default:(0,a.w5)((()=>[(0,a.Uk)("检验完成")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s,"1"==e.tab?((0,a.wg)(),(0,a.j4)(M,{key:0,style:{position:"fixed",top:"220px",right:"16px","z-index":"11"},icon:"mdi-plus",color:"secondary",onClick:H.addHandle},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(X,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(K,{value:"1",class:"v-window-item-table"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"扫描或输入 入库单号",onSearchClick:H.barSearchClick},null,8,["onSearchClick"]),"1"==e.tab?((0,a.wg)(),(0,a.j4)(G,{key:0,ref:"table1",url:"/iiot/qmTask/list",method:"post",auto:!1,params:{taskType:"IQC",params:{statusList:["N","R"]}}},{tableBody:(0,a.w5)((e=>[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{content:e._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,a.Wm)(R,{cols:"11"},{default:(0,a.w5)((()=>[(0,a._)("p",o,(0,i.zw)(H.FormatDictionary("qm_task_status",e.items.taskStatus)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("p",n,(0,i.zw)(e.items.partNo)+"-"+(0,i.zw)(e.items.partName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",c,(0,i.zw)(e.items.taskNo),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",p,(0,i.zw)(e.items.receiptNo),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",m,(0,i.zw)("1"==e.items.isReceipt?"已收货":"未收货"),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",{onClick:t=>H.GlobalTooltipFunc(`${e.items.supplierCode||""}-${e.items.supplierName||""}`),class:"text-truncate font-weight-light"},(0,i.zw)(e.items.supplierCode)+"-"+(0,i.zw)(e.items.supplierName),9,f)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[w])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",g,(0,i.zw)(e.items.requestTime),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",_,(0,i.zw)(e.items.receiptNo),1)])),_:2},1024)])),_:2},1024),"R"==e.items.taskStatus?((0,a.wg)(),(0,a.j4)(Z,{key:0,"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"6"},{default:(0,a.w5)((()=>[(0,a._)("p",k,[x,(0,a.Uk)(" "+(0,i.zw)(e.items.taskQty),1)])])),_:2},1024),(0,a.Wm)(R,{cols:"6",class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{modelValue:e.items._taskQty,"onUpdate:modelValue":t=>e.items._taskQty=t,style:{padding:"0px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"6",class:"text-left"},{default:(0,a.w5)((()=>["R"==e.items.taskStatus?((0,a.wg)(),(0,a.j4)(M,{key:0,onClick:t=>H.accomplishClick(e),color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("检验完成")])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])),_:2},1024),(0,a.Wm)(R,{cols:"6",class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{onClick:t=>H.detailClick(e),color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("检验")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},512)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(K,{value:"2",class:"v-window-item-table"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"扫描或输入 入库单号",onSearchClick:H.barSearchClick2},null,8,["onSearchClick"]),"2"==e.tab?((0,a.wg)(),(0,a.j4)(G,{key:0,ref:"table2",url:"/iiot/qmTask/list",method:"post",auto:!1,params:{taskType:"IQC",params:{statusList:["F"]}}},{tableBody:(0,a.w5)((e=>[(0,a.Wm)(Y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{content:e._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,a.Wm)(R,{cols:"11"},{default:(0,a.w5)((()=>[(0,a._)("p",b,(0,i.zw)(H.FormatDictionary("qm_task_status",e.items.taskStatus)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("p",v,(0,i.zw)(e.items.partNo)+"-"+(0,i.zw)(e.items.partName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",C,(0,i.zw)(e.items.taskNo),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[V])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",S,(0,i.zw)(e.items.receiptNo),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[O])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",U,(0,i.zw)("1"==e.items.isReceipt?"已收货":"未收货"),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[N])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",{onClick:t=>H.GlobalTooltipFunc(`${e.items.supplierCode||""}-${e.items.supplierName||""}`),class:"text-truncate font-weight-light"},(0,i.zw)(e.items.supplierCode)+"-"+(0,i.zw)(e.items.supplierName),9,B)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[$])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",F,(0,i.zw)(e.items.requestTime),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"4"},{default:(0,a.w5)((()=>[q])),_:1}),(0,a.Wm)(R,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",j,(0,i.zw)(e.items.receiptNo),1)])),_:2},1024)])),_:2},1024),"R"==e.items.taskStatus?((0,a.wg)(),(0,a.j4)(Z,{key:0,"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"6"},{default:(0,a.w5)((()=>[(0,a._)("p",z,[I,(0,a.Uk)(" "+(0,i.zw)(e.items.taskQty),1)])])),_:2},1024),(0,a.Wm)(R,{cols:"6",class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{modelValue:e.items._taskQty,"onUpdate:modelValue":t=>e.items._taskQty=t,style:{padding:"0px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(Z,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{cols:"6",class:"text-left"}),(0,a.Wm)(R,{cols:"6",class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{onClick:t=>H.detailClick(e,"detail"),color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},512)):(0,a.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])}l(73210),l(57658),l(38862);var T=l(76496),H=l(88575),L=l(37184),D=l(73378),J=l(98167),M=l(20868),A={components:{AppBarPage:T.Z,AddPage:J["default"],ScanBarComponents:D.Z,TableComponents:H.Z},data:()=>({tab:"1",partModel:""}),watch:{tab(e){this.initHandle()}},created(){this.initHandle(),this.$root.$emitter.on("update_qualityMaterial_page1",((e="1")=>{this.tab=e}))},methods:{GlobalTooltipFunc(e=""){(0,M.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary(e="",t=""){const l=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),a=l[e]||[],i=a.filter((e=>t==e.value))[0]||{};return i},initHandle(){const{tabs:e}=this.$route.query;e&&(this.tab=e),this.partModel=localStorage.getItem("_qualityMaterialPartModel"),this.$nextTick((()=>{"1"==this.tab&&this.$refs.table1.initFunc(1,{}),"2"==this.tab&&this.$refs.table2.initFunc(1,{})}))},async barSearchClick(e=""){const t=e.trim();this.$refs.table1.initFunc(1,{receiptNo:t})},async barSearchClick2(e=""){const t=e.trim();this.$refs.table2.initFunc(1,{receiptNo:t})},async detailClick(e,t=""){const{items:l}=e;this.$router.push({path:"/qualityMaterial/detail",query:{_pageActive:t,ttQmTaskId:l.ttQmTaskId,row:JSON.stringify(l)}})},async accomplishClick(e){const{items:t}=e,l=Number(t._taskQty||"");if(!l)return void(0,M.LJ)("合格数量必填！");if(l>Number(t.taskQty))return void(0,M.LJ)("合格数量不能大于检验数量！");const a={ttQmTaskId:t.ttQmTaskId,taskQty:t.taskQty,qualifiedQty:t.taskQty,version:t.version,acceptQty:l},{code:i,data:s={}}=await(0,L.i)({url:"/iiot/qmTask/finishQmTask",method:"post",payload:a});200==i&&((0,M.XA)("提交成功！"),this.$nextTick((()=>{this.$refs.table1.initFunc(1)})))},addHandle(){this.$router.push({path:"/qualityMaterial/add",query:{}})},detailHandle(e){const{items:t}=e}}},P=l(40089);const R=(0,P.Z)(A,[["render",Q]]);var Z=R}}]);
//# sourceMappingURL=chunk.4696.1689579771365.js.map