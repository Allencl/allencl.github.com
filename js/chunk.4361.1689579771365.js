"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4361],{2243:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(73396),i=a(87139);const s={style:{height:"98%","padding-bottom":"40px"}},o={style:{height:"100%"}},n={style:{position:"relative",top:"4px"}},r=["onClick"],c={class:"text-truncate",style:{height:"24px"}},u={key:2,class:"text-center",style:{"margin-top":"16px"}};function p(e,t,a,p,d,m){const h=(0,l.up)("van-field"),f=(0,l.up)("v-col"),g=(0,l.up)("v-btn"),w=(0,l.up)("v-row"),_=(0,l.up)("van-search"),k=(0,l.up)("van-checkbox"),b=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)("span",null,[(0,l.Wm)(h,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fieldValue=t),"is-link":"",readonly:"",required:a.required,label:a.label,placeholder:a.placeholder,autocomplete:"off",type:a.multiple?"textarea":"text",onClick:m.fieldClick},null,8,["modelValue","required","label","placeholder","type","onClick"]),(0,l.Wm)(b,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=t=>e.showPicker=t),style:{padding:"12px 12px 4px 12px",height:"60%",width:"90%"},round:""},{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l._)("div",o,[(0,l.Wm)(w,{"no-gutters":"",style:{"font-weight":"bold","border-bottom":"1px solid #ccc","padding-bottom":"5px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:"6"},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,i.zw)(a.label)+"-选择框",1)])),_:1}),(0,l.Wm)(f,{cols:"6",class:"text-right"},{default:(0,l.w5)((()=>[(0,l._)("span",n,(0,i.zw)(e.BufferOption.filter((e=>e._checked)).length),1),a.selectAll?((0,l.wg)(),(0,l.j4)(g,{key:0,onClick:m.selectAllHandle,color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("全选")])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1}),a.showSearch?((0,l.wg)(),(0,l.j4)(w,{key:0,"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:"8"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{modelValue:e.valueSearch,"onUpdate:modelValue":t[1]||(t[1]=t=>e.valueSearch=t),shape:"",placeholder:a.placeholderSearch,style:{"padding-left":"0px"},clearable:!1},null,8,["modelValue","placeholder"])])),_:1}),(0,l.Wm)(f,{cols:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{onClick:t[2]||(t[2]=e=>m.searchHandle(!0)),variant:"plain",color:"primary",block:"",style:{"margin-top":"8px"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" 查询 ")])),_:1})])),_:1}),(0,l.Wm)(f,{cols:"2"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{onClick:t[3]||(t[3]=e=>m.searchHandle(!1)),variant:"plain",block:"",style:{"margin-top":"8px"}},{default:(0,l.w5)((()=>[(0,l.Uk)(" 重置 ")])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),e.BufferOption.length?((0,l.wg)(),(0,l.iD)("ul",{key:1,style:(0,i.j5)(`height: ${a.showSearch?"73%":"90%"};overflow-y:auto;padding-right:12px;padding-bottom: 20px;`)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.BufferOption,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t,style:(0,i.j5)(`padding: 6px 22px 6px 6px;position:relative;color:${e._searchColor?"#FF9800":"#000"};`),onClick:t=>m.checkChange(e)},[(0,l._)("p",c,(0,i.zw)(e.text),1),(0,l.Wm)(k,{style:{position:"absolute",top:"8px",right:"0px"},modelValue:e._checked,"onUpdate:modelValue":t=>e._checked=t,shape:"square","checked-color":"#4CAF50",disabled:"",class:"custem-select-checkbox"},null,8,["modelValue","onUpdate:modelValue"])],12,r)))),128))],4)):((0,l.wg)(),(0,l.iD)("p",u,"无数据!"))]),(0,l.Wm)(w,{"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{cols:"6",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{variant:"plain",block:"",onClick:t[4]||(t[4]=()=>e.showPicker=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 取消 ")])),_:1})])),_:1}),(0,l.Wm)(f,{cols:"6",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{variant:"plain",color:"primary",block:"",onClick:m.confirmHandle},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}a(38862),a(73210),a(26699),a(32023);var d=a(20868),m={components:{},emits:["update:modelValue","onChange","onFieldClick","onSearchChange"],data:()=>({BufferOption:[],selectedValues:[],columns:[],fieldValue:"",showPicker:!1,valueSearch:""}),watch:{option:{handler(e=[]){this.BufferOption=JSON.parse(JSON.stringify(e)),this.$nextTick((()=>{this.modelValue&&this.setValue(this.modelValue)}))},deep:!0,immediate:!0},showPicker:{handler(e){this.$nextTick((()=>{if(e&&this.modelValue)if(this.multiple){const e=this.modelValue.split(",")||[];e.map((e=>{this.BufferOption.map((t=>{var a=t;return t.value==e&&(a._checked=!0),a}))}))}else this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==this.modelValue})))}))},deep:!0,immediate:!0}},methods:{showModle(){this.showPicker=!0},fieldClick(){this.disabled||(this.forbidShow||(this.showPicker=!0),this.$emit("onFieldClick"))},setfieldValue(e=""){this.fieldValue=e},reset(){this.fieldValue="",this.BufferOption.map((e=>Object.assign(e,{_checked:!1}))),this.$emit("update:modelValue","")},setValue(e=""){if(this.multiple){const t=e.split(",")||[];t.map((e=>{this.BufferOption.map((t=>{var a=t;return t.value==e&&(a._checked=!0),a}))})),this.fieldValue=this.BufferOption.filter((e=>e._checked)).map((e=>e.text)).join()}else{const t=JSON.parse(JSON.stringify(this.BufferOption)).filter((t=>t.value==e))[0]||{};this.fieldValue=t.text}},confirmHandle(){const{multiple:e}=this,t=this.BufferOption.filter((e=>1==e._checked));e?(this.fieldValue=t.map((e=>e.text)).join(),this.$emit("update:modelValue",t.map((e=>e.value)).join()||""),this.$emit("onChange",t.map((e=>e.value)).join())):(this.fieldValue=(t[0]||{}).text,this.$emit("update:modelValue",(t[0]||{}).value||""),this.$emit("onChange",(t[0]||{}).value,t[0]||{})),this.showPicker=!1},checkChange(e){const{multiple:t}=this,{_checked:a,value:l}=e;t?this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==l?!a:e._checked}))):this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==l&&!a})))},multipleHandle(){const e=this.BufferOption.filter((e=>e._checked)),t=e.map((e=>e.value)).join();this.showPicker=!1,this.fieldValue=e.map((e=>e.text)).join(),this.$emit("update:modelValue",t),this.$emit("onChange",e)},searchHandle(e){const t=this.valueSearch.trim(),{filterSearch:a}=this;if(a&&e){const e=this.BufferOption.map((e=>Object.assign(e,{_searchColor:!1}))),a=e.filter((e=>e.text.includes(t))).map((e=>Object.assign(e,{_searchColor:!0})));if(!a.length)return void(0,d.LJ)("不存在！");const l=e.filter((e=>!e.text.includes(t))),i=l.filter((e=>e._checked)),s=l.filter((e=>!e._checked));this.BufferOption=a.concat(i).concat(s)}else e?this.$emit("onSearchChange",t):(this.valueSearch="",this.BufferOption=this.option,this.$nextTick((()=>{this.BufferOption=this.BufferOption.map((e=>Object.assign(e,{_checked:!1})))})),this.$emit("onSearchChange",""))},selectAllHandle(){this.BufferOption.map((e=>Object.assign(e,{_checked:!0})))}},props:{modelValue:{},disabled:{type:Boolean,default:()=>!1},showSearch:{type:Boolean,default:()=>!1},forbidShow:{type:Boolean,default:()=>!1},multiple:{type:Boolean,default:()=>!1},label:{type:String,default:()=>"标题"},placeholder:{type:String,default:()=>"请选择"},placeholderSearch:{type:String,default:()=>"请输入搜索关键词"},option:{type:Array,default:()=>[]},selectAll:{type:Boolean,default:()=>!1},required:{type:Boolean,default:()=>!1},filterSearch:{type:Boolean,default:()=>!1}}},h=a(40089);const f=(0,h.Z)(m,[["render",p]]);var g=f},88575:function(e,t,a){a.d(t,{Z:function(){return C}});var l=a(73396),i=a(87139);const s={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,l._)("span",null,"第",-1),n={style:{"padding-left":"1px","padding-right":"1px"}},r=(0,l._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,l._)("span",null,"共",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,l._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,l._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,l._)("span",null,"条",-1),f={style:{position:"relative",top:"1px","margin-left":"0px"}},g={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(e,t,a,w,_,k){const b=(0,l.up)("v-icon"),y=(0,l.up)("v-btn"),x=(0,l.up)("v-card");return(0,l.wg)(),(0,l.iD)("span",null,[e.paging&&a.pagingShow?((0,l.wg)(),(0,l.j4)(x,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:k.previousHandle},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{size:"28"},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:k.nextHandle},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{size:"28"},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,l._)("span",s,[o,(0,l._)("span",n,(0,i.zw)(e.current),1),r,c,(0,l._)("span",u,(0,i.zw)(e.page),1),p,d,(0,l._)("span",m,(0,i.zw)(e.totalNum),1),h]),(0,l._)("span",f,[a.showSearchBtn?((0,l.wg)(),(0,l.j4)(y,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:k.searchClick,variant:"plain",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{size:"24",icon:"mdi-magnify"}),(0,l.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(y,{onClick:k.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,l.kq)("",!0),e.items.length?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.items,((t,a)=>(0,l.WI)(e.$slots,"tableBody",{key:a,items:t,_index:a}))),128)):((0,l.wg)(),(0,l.iD)("p",g,[(0,l.Wm)(b,{icon:"mdi-emoticon-sad-outline"}),(0,l.Uk)(" 无数据！ ")]))])}var _=a(21801),k=a(37184);var b=a(20868),y={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:e,url:t}=this;e&&t&&this.initFunc()},methods:{previousHandle(){const{current:e}=this;1!=e?(this.current=e-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,b.LJ)("第一页！")},nextHandle(){const{current:e,page:t}=this;e>=t?(0,b.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(e=1,t){const{url:a,params:l={},children:i,method:s,formatData:o}=this;if(i)return this.items=i,void(this.paging=!1);const n=(0,_.Z)((0,_.Z)({pageNum:e,pageSize:10},l),t),{code:r,total:c=0,msg:u="",data:p,rows:d}=await(0,k.i)({method:s,url:a,payload:"post"==s?n:{},url_params:"get"==s?n:{}});200==r&&(this.totalNum=c,this.current=e,this.page=Math.ceil(c/n.pageSize),this.items=o?o(p||d||[]):p||d||[])},refreshClick(){const{refreshFunc:e}=this;!e&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((e=>Object.assign(e,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},x=a(40089);const v=(0,x.Z)(y,[["render",w]]);var C=v},57265:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(73396);const i={style:{padding:"0px 12px 0px 12px"}},s={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},o={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},n={class:"custem-iamge-upload"},r=["src"];function c(e,t,a,c,u,p){const d=(0,l.up)("van-uploader"),m=(0,l.up)("v-icon");return(0,l.wg)(),(0,l.iD)("span",null,[(0,l._)("div",i,[a.preview?((0,l.wg)(),(0,l.iD)("p",s,"图片预览 ")):((0,l.wg)(),(0,l.iD)("p",o," 图片上传 ")),a.preview?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:2,"after-read":p.afterRead,"preview-image":!1},null,8,["after-read"])),(0,l._)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.bufferFileList,((i,s)=>((0,l.wg)(),(0,l.iD)("li",{key:s,onClick:t[0]||(t[0]=t=>p.checkImage(e.bufferFileList))},[(0,l._)("img",{src:i.url},null,8,r),a.preview?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:0,onClick:e=>p.removeClick(i,e),class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])))),128))])])])}a(26699),a(32023),a(38862);var u=a(37184),p=a(20868),d=a(9801),m={components:{},emits:["update:modelValue","onChange"],data:()=>({bufferFileList:[]}),watch:{modelValue:{handler(e=[]){this.bufferFileList=e},deep:!0,immediate:!0},initPath:{handler(e=""){e&&(this.bufferFileList=e.split(",").map((e=>Object.assign({url:e}))))},deep:!0,immediate:!0}},methods:{checkImage(e=[]){e.length&&(0,d.V)(e.map((e=>e.url)))},async afterRead(e){if(!e.file.type.includes("image"))return void(0,p.LJ)("只能选择图片！");if(e.file.size>=19922944)return void(0,p.LJ)("图片超过20M！");if(this.bufferFileList.length>2)return void(0,p.LJ)("最多只能选择3张图片！");let t=new FormData;t.append("file",e.file);const{code:a,data:l={}}=await(0,u.i)({url:"/file/upload",method:"post",formData:!0,payload:t});200==a?(this.bufferFileList=this.bufferFileList.concat([l]),(0,p.XA)("图片上传成功！"),this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.bufferFileList)))):(0,p.LJ)("图片上传失败！")},removeClick(e,t){t.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((t=>t.url!=e.url)),this.$nextTick((()=>{this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.bufferFileList)))}))}},props:{modelValue:{type:Array,default:()=>[]},initPath:{type:String,default:()=>""},preview:{type:Boolean,default:()=>!1}}},h=a(40089);const f=(0,h.Z)(m,[["render",c]]);var g=f},4361:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});a(41817);var l=a(73396),i=a(87139);const s=(0,l._)("p",{class:"font-weight-medium text"},"检验产品:",-1),o={class:"text-truncate font-weight-light text-left"},n=(0,l._)("p",{class:"font-weight-medium text"},"批次号:",-1),r={class:"text-truncate font-weight-light"},c=(0,l._)("p",{class:"font-weight-medium text"},"检验数量:",-1),u={class:"text-truncate font-weight-light"},p=(0,l._)("p",{class:"font-weight-medium text"},"检验类型:",-1),d={class:"text-truncate font-weight-light"},m=(0,l._)("p",{class:"font-weight-medium text"},"配送单号:",-1),h={class:"text-truncate font-weight-light"},f=(0,l._)("p",{class:"font-weight-medium text"},"供应商信息:",-1),g={class:"text-truncate font-weight-light"},w={class:"font-weight-medium"},_={style:{"padding-left":"12px",color:"#00E5FF"}},k=(0,l._)("div",{style:{height:"6px"}},null,-1),b=(0,l._)("p",{class:"font-weight-medium text"},"检验项目:",-1),y=["onClick"],x=(0,l._)("p",{class:"font-weight-medium text"},"检验方法:",-1),v={class:"text-truncate font-weight-light"},C=(0,l._)("div",{style:{height:"3px"}},null,-1),W=(0,l._)("p",{class:"font-weight-medium text input-lable"},"检验备注:",-1),V=(0,l._)("p",{class:"font-weight-medium text input-lable"},"检验数量:",-1),O=(0,l._)("p",{class:"font-weight-medium text"},"供应商自检结果:",-1),S={class:"font-weight-light"},F=(0,l._)("span",null,"结果: ",-1),j=(0,l._)("p",{style:{"font-size":"16px"}},"检验完成",-1),B=(0,l._)("div",{style:{height:"16px"}},null,-1),D=(0,l._)("span",{style:{position:"relative",top:"-39px","margin-left":"16px"}},"结果: ",-1),T=(0,l._)("div",{style:{height:"20px"}},null,-1),L=(0,l._)("div",{style:{height:"60px"}},null,-1);function N(e,t,a,N,$,U){const R=(0,l.up)("AppBarPage"),q=(0,l.up)("v-btn"),z=(0,l.up)("v-col"),I=(0,l.up)("v-row"),J=(0,l.up)("v-sheet"),H=(0,l.up)("v-badge"),P=(0,l.up)("van-field"),Q=(0,l.up)("v-switch"),A=(0,l.up)("UploaderImageComponents"),Z=(0,l.up)("v-card"),M=(0,l.up)("TableComponents"),Y=(0,l.up)("SelectComponents"),X=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)("span",null,[(0,l.Wm)(R),(0,l.Wm)(q,{style:{position:"fixed",top:"80px",right:"16px","z-index":"11"},icon:"mdi-plus",color:"secondary",onClick:t[0]||(t[0]=()=>e.show=!0)}),(0,l.Wm)(J,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[s])),_:1}),(0,l.Wm)(z,{cols:"9"},{default:(0,l.w5)((()=>[(0,l._)("p",o,(0,i.zw)(e.bufferRow.partNo)+"-"+(0,i.zw)(e.bufferRow.partName),1)])),_:1})])),_:1}),(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"2"},{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(z,{cols:"4"},{default:(0,l.w5)((()=>[(0,l._)("p",r,(0,i.zw)(e.bufferRow.batchNo),1)])),_:1}),(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("p",u,(0,i.zw)(e.bufferRow.taskQty),1)])),_:1})])),_:1}),(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("p",d,(0,i.zw)(U.FormatDictionary("QM_BY_TYPE",e.bufferRow.batchType)["lable"]),1)])),_:1}),(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[(0,l._)("p",h,(0,i.zw)(e.bufferRow.receiptNo),1)])),_:1})])),_:1}),(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"4"},{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(z,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",g,(0,i.zw)(e.bufferRow.supplierName),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(J,{class:"v-window-item-table"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{ref:"table1",children:e.tableList,pagingShow:!1},{tableBody:(0,l.w5)((t=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{"no-gutters":"",class:"table-title"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{content:t._index+1,color:"primary",inline:""},null,8,["content"]),(0,l._)("span",w,(0,i.zw)(t.items.inspectDetailName),1),(0,l._)("span",_,(0,i.zw)(`< ${U.FormatDictionary("checkout_param_type",t.items.parameterType)["lable"]}类型 >`),1)])),_:2},1024)])),_:2},1024),k,(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[b])),_:1}),(0,l.Wm)(z,{cols:"9"},{default:(0,l.w5)((()=>[(0,l._)("p",{onClick:e=>U.GlobalTooltipFunc(`${t.items.inspectDetailName||""}`),class:"text-truncate font-weight-light"},(0,i.zw)(t.items.inspectDetailName),9,y)])),_:2},1024)])),_:2},1024),(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(z,{cols:"9"},{default:(0,l.w5)((()=>[(0,l._)("p",v,(0,i.zw)(t.items.methodDesc),1)])),_:2},1024)])),_:2},1024),C,(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[W])),_:1}),(0,l.Wm)(z,{cols:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{modelValue:t.items._remark,"onUpdate:modelValue":e=>t.items._remark=e,style:(0,i.j5)([{padding:"0px"},"padding-top:0px;"]),size:"large",placeholder:"请输入备注",autocomplete:"off",class:"custem-input-index1",onFocus:e.$root.$utils.VanFieldFocusToTop},null,8,["modelValue","onUpdate:modelValue","onFocus"])])),_:2},1024),(0,l.Wm)(z,{cols:"4",style:{"text-align":"right"}},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{modelValue:t.items._switch,"onUpdate:modelValue":e=>t.items._switch=e,label:t.items._switch?"合格":"不合格",color:"primary",density:"comfortable",style:{top:"-8px",left:"18px",position:"relative",height:"48px",display:"block",width:"104px"}},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)])),_:2},1024),"DT"==t.items.parameterType?((0,l.wg)(),(0,l.j4)(I,{key:0,"no-gutters":"",style:{"margin-top":"0px"},class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"3"},{default:(0,l.w5)((()=>[V])),_:1}),(0,l.Wm)(z,{cols:"5"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{modelValue:t.items._number,"onUpdate:modelValue":e=>t.items._number=e,style:{padding:"0px"},size:"large",placeholder:"请输入数量",autocomplete:"off",type:"number",class:"custem-input-index1",onFocus:e.$root.$utils.VanFieldFocusToTop},null,8,["modelValue","onUpdate:modelValue","onFocus"])])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),(0,l.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"5"},{default:(0,l.w5)((()=>[O])),_:1}),(0,l.Wm)(z,{cols:"7"},{default:(0,l.w5)((()=>[(0,l._)("p",S,(0,i.zw)(U.FormatBatchNumber(t)),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(I,{"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{modelValue:t.items._bufferFileList,"onUpdate:modelValue":e=>t.items._bufferFileList=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["children"])])),_:1}),(0,l.Wm)(I,{"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"12",style:{"margin-bottom":"18px","padding-left":"6px"}},{default:(0,l.w5)((()=>[(0,l._)("p",null,[F,(0,l._)("span",{style:(0,i.j5)(U.FormatBottomResultColor())},(0,i.zw)(U.FormatBottomResult()),5)])])),_:1})])),_:1}),(0,l.Wm)(I,{class:"global-botom-btn-box","no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"5",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{color:"warning",onClick:U.disqualificationApplyHandle},{default:(0,l.w5)((()=>[(0,l.Uk)(" 不合格处理申请 ")])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(z,{cols:"4",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{color:"error",onClick:t[1]||(t[1]=e=>U.standardHandle(!1))},{default:(0,l.w5)((()=>[(0,l.Uk)(" 不合格 ")])),_:1})])),_:1}),(0,l.Wm)(z,{cols:"3",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{color:"primary",onClick:t[2]||(t[2]=e=>U.standardHandle(!0))},{default:(0,l.w5)((()=>[(0,l.Uk)(" 合格 ")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(X,{show:e.show,"onUpdate:show":t[9]||(t[9]=t=>e.show=t),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,l.w5)((()=>[j,(0,l._)("div",null,[B,(0,l.Wm)(Y,{modelValue:e.project,"onUpdate:modelValue":t[3]||(t[3]=t=>e.project=t),ref:"select1",label:"检验项目",showSearch:"",option:e.projectSelectOption,onOnChange:U.projectChange,onOnSearchChange:U.projectSearchChange,required:""},null,8,["modelValue","option","onOnChange","onOnSearchChange"]),(0,l.Wm)(Y,{modelValue:e.standard,"onUpdate:modelValue":t[4]||(t[4]=t=>e.standard=t),ref:"select3",label:"检验明细",forbidShow:!0,showSearch:"",option:e.standardSelectOption,onOnFieldClick:U.standardClick,onOnChange:U.standarChange,onOnSearchChange:U.standarSearchChange,required:""},null,8,["modelValue","option","onOnFieldClick","onOnChange","onOnSearchChange"]),e.showNumberValue?((0,l.wg)(),(0,l.j4)(P,{key:0,modelValue:e.testValue,"onUpdate:modelValue":t[5]||(t[5]=t=>e.testValue=t),label:"检验值",type:"number",placeholder:"请输入大于0的整数",autocomplete:"off"},null,8,["modelValue"])):(0,l.kq)("",!0),D,(0,l.Wm)(Q,{modelValue:e.switchQualified,"onUpdate:modelValue":t[6]||(t[6]=t=>e.switchQualified=t),label:e.switchQualified?"合格":"不合格",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"]),(0,l.Wm)(P,{modelValue:e.description,"onUpdate:modelValue":t[7]||(t[7]=t=>e.description=t),type:"textarea",label:"描述",placeholder:"请输入描述",autocomplete:"off"},null,8,["modelValue"])]),T,(0,l.Wm)(I,{"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{cols:"6",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{variant:"plain",block:"",onClick:t[8]||(t[8]=()=>e.show=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)(" 取消 ")])),_:1})])),_:1}),(0,l.Wm)(z,{cols:"6",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{variant:"plain",color:"primary",block:"",onClick:U.affirmCheckout},{default:(0,l.w5)((()=>[(0,l.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["show"]),L])}a(73210),a(38862),a(57658);var $=a(76496),U=a(88575),R=a(2243),q=a(57265),z=a(37184),I=a(20868),J={components:{AppBarPage:$.Z,SelectComponents:R.Z,UploaderImageComponents:q.Z,TableComponents:U.Z},data:()=>({bufferRow:{},qmTaskBatch:{},fileList:[],bufferFileList:[],show:!1,showNumberValue:!1,tableList:[],supplDetail:[],project:"",projectSelectOption:[],standard:"",standardSelectOption:[],bufferStandardSelectOption:[],testValue:"",switchQualified:!0,description:""}),created(){this.initFunc(),this.projectHTTP()},methods:{GlobalTooltipFunc(e=""){(0,I.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary(e="",t=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),l=a[e]||[],i=l.filter((e=>t==e.value))[0]||{};return i},FormatBatchNumber(e){const{items:t}=e,{supplDetail:a=[]}=this,l=a.map((e=>Object.assign({no:e,text:t[e]}))).filter((e=>e.text)).map((e=>`批次号:${e.no} ${e.text}`)).join(";");return l||"无"},FormatBottomResult(){const{bufferRow:e={}}=this;if(!e.inspectResult)return;const t=this.FormatDictionary("IQC_RESULT",e.inspectResult)["lable"];return t},FormatBottomResultColor(){const{bufferRow:e={}}=this;let t="";switch(e.inspectResult){case"10":t="color:#4CAF50";break;case"20":t="color:#FF9800";break;case"30":t="color:#FF5722";break;default:break}return t},async initFunc(){const{ttQmTaskBatchId:e,_taskQty:t}=this.$route.query,{code:a,data:l={}}=await(0,z.i)({url:`/iiot/qmTaskBatch/listCheckResultListPda/${e}`,method:"get"});200==a&&(this.bufferRow=Object.assign(l.qmTaskBatch||{},{taskQty:t}),this.qmTaskBatch=l.qmTaskBatch||{},this.tableList=(l.dataList||[]).map((e=>Object.assign(e,{_switch:!e.inspectResult||"10"==e.inspectResult,_remark:e.remark,_number:e.resultValue,_bufferFileList:e.taskResultPath?e.taskResultPath.split(",").map((e=>Object.assign({url:e}))):[]}))),this.supplDetail=l.supplDetail||[],this.$nextTick((()=>{this.$refs.table1.initFunc()})))},async projectHTTP(e=""){const{code:t,data:a=[]}=await(0,z.i)({url:"/iiot/inspect/listInspectForSelect",method:"get",url_params:{inspectNo:e}});200==t&&(this.projectSelectOption=a.map((e=>Object.assign({text:`${e.inspectNo||""}-${e.inspectName||""}`,value:e.tmQmInspectId}))).splice(0,50))},projectSearchChange(e){this.projectHTTP(e)},projectChange(){this.$refs.select3.reset()},standarChange(e){if(e){const t=this.bufferStandardSelectOption.filter((t=>t.tmQmInspectDetailId==e))[0];this.showNumberValue="DT"==t.parameterType}},standardClick(){this.standardHTTP()},standarSearchChange(e){this.standardHTTP(e)},async standardHTTP(e=""){const{project:t}=this;if(!t)return void(0,I.XA)("检验项目必选！");const{code:a,data:l=[]}=await(0,z.i)({url:"/iiot/inspectDetail/listInspectDetailForSelect",url_params:{inspectDetailNo:e,tmQmInspectId:t},method:"get"});200==a&&(this.standardSelectOption=l.map((e=>Object.assign({text:`${e.inspectDetailNo||""}-${e.inspectDetailName||""}`,value:e.tmQmInspectDetailId}))).splice(0,50),this.bufferStandardSelectOption=l,this.$refs.select3.showModle())},affirmCheckout(){const{project:e,standard:t,bufferStandardSelectOption:a=[]}=this;if(!e)return void(0,I.LJ)("检验项目必选！");if(!t)return void(0,I.LJ)("检验明细必选！");const l=a.filter((e=>e.tmQmInspectDetailId==t))[0];if(this.tableList.filter((e=>e.inspectDetailNo==l.inspectDetailNo)).length)return void(0,I.LJ)("已存在！");const i={parameterType:l.parameterType,inspectDetailName:l.inspectDetailName,inspectDetailNo:l.inspectDetailNo,parameterRange:l.parameterRange,methodDesc:l.methodName,remark:this.description,resultValue:this.switchQualified,inspectResult:this.testValue,tmQmInspectId:e,tmQmInspectDetailId:l.tmQmInspectDetailId,isNewAdded:"1",_switch:this.switchQualified,_remark:this.description,_number:this.testValue};this.tableList=this.tableList.concat([i]),this.$nextTick((()=>{this.$refs.table1.initFunc(),this.show=!1}))},async disqualificationApplyHandle(){const e=this.tableList.filter((e=>e.ttQmTaskResultId)).length;if(!e==this.tableList.length)return void(0,I.LJ)("新增项未保存！");if(this.tableList.filter((e=>!e._switch&&!(e._remark||"").trim())).length)return void(0,I.LJ)("不合格时，备注必填");const{qmTaskBatch:t}=this,a={dataList:JSON.parse(JSON.stringify(this.tableList)).map((e=>Object.assign(e,{resultValue:e._number,remark:e._remark,inspectResult:e._switch?"10":"30",taskResultPath:(e._bufferFileList||[]).map((e=>e.url)).join()}))),qmTaskBatch:Object.assign(t)},{code:l,data:i={}}=await(0,z.i)({url:"/iiot/qmTaskBatch/applyUnQualityManage",method:"post",payload:a});200==l&&((0,I.XA)("提交成功！"),this.$router.push({path:"/qualityMaterialDisqualification/detail",query:{ttQmDefectId:i.ttQmDefectId}}))},async standardHandle(e){const{qmTaskBatch:t,tableList:a}=this;if(this.tableList.filter((e=>!e._switch&&!(e._remark||"").trim())).length)return void(0,I.LJ)("不合格时，备注必填");const l={dataList:JSON.parse(JSON.stringify(this.tableList)).map((e=>Object.assign(e,{resultValue:e._number,remark:e._remark,inspectResult:e._switch?"10":"30",taskResultPath:(e._bufferFileList||[]).map((e=>e.url)).join()}))),qmTaskBatch:Object.assign(t,{inspectResult:e?"10":"30"})},{code:i,data:s={}}=await(0,z.i)({url:"/iiot/qmTaskBatch/listCheckResultSave",method:"post",payload:l});200==i&&((0,I.XA)("提交成功！"),this.initFunc())}}},H=a(40089);const P=(0,H.Z)(J,[["render",N]]);var Q=P}}]);
//# sourceMappingURL=chunk.4361.1689579771365.js.map