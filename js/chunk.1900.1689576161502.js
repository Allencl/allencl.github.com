"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[1900],{88575:function(e,t,l){l.d(t,{Z:function(){return k}});var a=l(73396),i=l(87139);const o={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},n=(0,a._)("span",null,"第",-1),s={style:{"padding-left":"1px","padding-right":"1px"}},r=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),u=(0,a._)("span",null,"共",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,a._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,a._)("span",null,"条",-1),g={style:{position:"relative",top:"1px","margin-left":"0px"}},f={key:2,class:"text-center",style:{"padding-top":"12px"}};function v(e,t,l,v,y,w){const x=(0,a.up)("v-icon"),_=(0,a.up)("v-btn"),b=(0,a.up)("v-card");return(0,a.wg)(),(0,a.iD)("span",null,[e.paging&&l.pagingShow?((0,a.wg)(),(0,a.j4)(b,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:w.previousHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:w.nextHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,a._)("span",o,[n,(0,a._)("span",s,(0,i.zw)(e.current),1),r,u,(0,a._)("span",c,(0,i.zw)(e.page),1),p,d,(0,a._)("span",m,(0,i.zw)(e.totalNum),1),h]),(0,a._)("span",g,[l.showSearchBtn?((0,a.wg)(),(0,a.j4)(_,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:w.searchClick,variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"24",icon:"mdi-magnify"}),(0,a.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(_,{onClick:w.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,a.kq)("",!0),e.items.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(e.items,((t,l)=>(0,a.WI)(e.$slots,"tableBody",{key:l,items:t,_index:l}))),128)):((0,a.wg)(),(0,a.iD)("p",f,[(0,a.Wm)(x,{icon:"mdi-emoticon-sad-outline"}),(0,a.Uk)(" 无数据！ ")]))])}var y=l(21801),w=l(37184);var x=l(20868),_={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:e,url:t}=this;e&&t&&this.initFunc()},methods:{previousHandle(){const{current:e}=this;1!=e?(this.current=e-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,x.LJ)("第一页！")},nextHandle(){const{current:e,page:t}=this;e>=t?(0,x.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(e=1,t){const{url:l,params:a={},children:i,method:o,formatData:n}=this;if(i)return this.items=i,void(this.paging=!1);const s=(0,y.Z)((0,y.Z)({pageNum:e,pageSize:10},a),t),{code:r,total:u=0,msg:c="",data:p,rows:d}=await(0,w.i)({method:o,url:l,payload:"post"==o?s:{},url_params:"get"==o?s:{}});200==r&&(this.totalNum=u,this.current=e,this.page=Math.ceil(u/s.pageSize),this.items=n?n(p||d||[]):p||d||[])},refreshClick(){const{refreshFunc:e}=this;!e&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((e=>Object.assign(e,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},b=l(40089);const S=(0,b.Z)(_,[["render",v]]);var k=S},19018:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var a=l(73396),i=l(87139);const o=(0,a._)("span",{style:{"padding-left":"6px"}},"入库",-1),n={style:{"padding-left":"4px","padding-bottom":"4px",color:"#00E5FF"}},s={style:{"padding-left":"4px","padding-bottom":"4px",color:"#00E5FF"}},r={style:{"padding-left":"4px","padding-bottom":"4px",color:"#00E5FF"}},u=(0,a._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},[(0,a._)("span",{style:{color:"red"}},"*"),(0,a.Uk)(" AGV调度")],-1),c=(0,a._)("div",{style:{height:"16px"}},null,-1),p=(0,a._)("div",{style:{height:"16px"}},null,-1),d={style:{"padding-left":"6px"}},m={class:"v-window-item-table"},h=(0,a._)("p",{class:"font-weight-medium text"},"物料编码:",-1),g={class:"font-weight-light"},f=(0,a._)("p",{class:"font-weight-medium text"},"物料名称:",-1),v={class:"font-weight-light"},y=(0,a._)("p",{class:"font-weight-medium text"},"入库数量:",-1),w={class:"font-weight-light"},x=(0,a._)("div",{style:{height:"12px"}},null,-1),_=(0,a._)("div",{style:{height:"80px"}},null,-1);function b(e,t,l,b,S,k){const W=(0,a.up)("AppBarPage"),C=(0,a.up)("v-icon"),V=(0,a.up)("v-col"),N=(0,a.up)("v-row"),U=(0,a.up)("ScanBarComponents"),O=(0,a.up)("v-switch"),$=(0,a.up)("SelectComponents"),z=(0,a.up)("van-field"),B=(0,a.up)("DatePickerComponents"),F=(0,a.up)("v-sheet"),D=(0,a.up)("v-btn"),q=(0,a.up)("v-badge"),L=(0,a.up)("v-card"),T=(0,a.up)("TableComponents");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(W),(0,a.Wm)(N,{"no-gutters":"",style:{"margin-bottom":"8px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{icon:"mdi-bullhorn",size:"16",color:"primary"}),o])),_:1}),(0,a.Wm)(V,{cols:"4",class:"text-right",style:{"padding-right":"6px"}})])),_:1}),(0,a.Wm)(F,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{ref:"scanBar1",placeholder:"扫描或输入 工装编号",onSearchClick:k.barSearchClick},null,8,["onSearchClick"]),(0,a._)("p",n,(0,i.zw)(e.boxSn),1),(0,a.Wm)(U,{ref:"scanBar2",placeholder:"扫描或输入 地码编号",onSearchClick:k.barSearchClick2},null,8,["onSearchClick"]),(0,a._)("p",s,(0,i.zw)(e.storageCode),1),(0,a.Wm)(U,{ref:"scanBar3",placeholder:"扫描物料码",onSearchClick:k.barSearchClick3},null,8,["onSearchClick"]),(0,a._)("p",r,(0,i.zw)(e.text1),1),(0,a.Wm)(N,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"4"},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(V,{cols:"8",style:{height:"42px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{modelValue:e.switchUrgency,"onUpdate:modelValue":t[0]||(t[0]=t=>e.switchUrgency=t),label:e.switchUrgency?"是":"否",required:"",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a.Wm)($,{modelValue:e.user,"onUpdate:modelValue":t[1]||(t[1]=t=>e.user=t),ref:"select11",label:"物料编码",required:"",option:e.repairmanSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(z,{modelValue:e.value11,"onUpdate:modelValue":t[2]||(t[2]=t=>e.value11=t),type:"number",required:"",placeholder:"请输入",label:"数量",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:e.value22,"onUpdate:modelValue":t[3]||(t[3]=t=>e.value22=t),placeholder:"请输入",label:"队列序号",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:e.value33,"onUpdate:modelValue":t[4]||(t[4]=t=>e.value33=t),placeholder:"请输入",label:"追溯码",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:e.value44,"onUpdate:modelValue":t[5]||(t[5]=t=>e.value44=t),placeholder:"请输入",label:"批次编码",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:e.value55,"onUpdate:modelValue":t[6]||(t[6]=t=>e.value55=t),placeholder:"请输入",label:"包装号",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:e.value66,"onUpdate:modelValue":t[7]||(t[7]=t=>e.value66=t),placeholder:"请输入",label:"产品号",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(B,{modelValue:e.dateStart,"onUpdate:modelValue":t[8]||(t[8]=t=>e.dateStart=t),label:"生产日期",ref:"dateTimeStart","columns-type":["year","month","day"]},null,8,["modelValue"]),(0,a.Wm)(B,{modelValue:e.dateOver,"onUpdate:modelValue":t[9]||(t[9]=t=>e.dateOver=t),label:"有效日期",ref:"dateTimeOver","columns-type":["year","month","day"]},null,8,["modelValue"])])),_:1}),c,(0,a.Wm)(N,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{block:"",color:"secondary",onClick:k.onSubmit},{default:(0,a.w5)((()=>[(0,a.Uk)(" 添加 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),p,(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(N,{"no-gutters":"",style:{"margin-bottom":"8px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{icon:"mdi-format-list-bulleted-square",size:"16",color:"primary"}),(0,a._)("span",d,"部件信息列表 ["+(0,i.zw)(e.children.length)+"]",1)])),_:1}),(0,a.Wm)(V,{cols:"4",class:"text-right",style:{"padding-right":"6px"}})])),_:1}),(0,a._)("div",m,[(0,a.Wm)(T,{ref:"table1",showSearchBtn:!1,pagingShow:!1,children:e.children},{tableBody:(0,a.w5)((e=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(N,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{content:e._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,a.Wm)(V,{cols:"5"}),(0,a.Wm)(V,{cols:"1",class:"text-right"})])),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"4"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(V,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",g,(0,i.zw)(e.items.partNo),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"4"},{default:(0,a.w5)((()=>[f])),_:1}),(0,a.Wm)(V,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",v,(0,i.zw)(e.items.partName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"4"},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(V,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",w,(0,i.zw)(e.items.goodsMaterialsNums),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["children"])])])),_:1}),x,(0,a.Wm)(N,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{cols:"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{block:"",color:"primary",onClick:k.onSubmit22},{default:(0,a.w5)((()=>[(0,a.Uk)(" 提交 ")])),_:1},8,["onClick"])])),_:1})])),_:1}),_])}l(73210);var S=l(76496),k=l(2243),W=l(21655),C=l(88575),V=l(73378),N=l(36797),U=l.n(N),O=l(20868),$=l(37184),z={components:{AppBarPage:S.Z,SelectComponents:k.Z,DatePickerComponents:W.Z,TableComponents:C.Z,ScanBarComponents:V.Z},data:()=>({bufferRow:{},children:[],text1:"",switchUrgency:!0,user:"",repairmanSelectOption:[],value11:"",value22:"",value33:"",value44:"",value55:"",value66:"",dateStart:"",dateOver:"",boxSn:"",storageCode:"",reqQty:"",type:"",typeSelectOption:[],type2:"",type2SelectOption:[],abnormalExplain:"",disposeExplain:""}),created(){this.initFunc(),this.initRepairman()},methods:{initFunc(){const e=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t=e["ccgl_abnormal_type"]||[];this.typeSelectOption=t.map((e=>Object.assign({text:e.lable,value:e.value})));const l=e["ccgl_abnomal_dispose"]||[];this.type2SelectOption=l.map((e=>Object.assign({text:e.lable,value:e.value})))},async initRepairman(){const{deliverySlipId:e}=this.$route.query,{code:t,data:l=[]}=await(0,$.i)({url:"/iiot/deliverySlip/selectPutInStorageList/"+e,method:"get"});200==t&&(this.repairmanSelectOption=l.map((e=>Object.assign({text:`${e.partNo||""}-${e.partName||""}`,value:e.partNo,partNo:e.partNo,partName:e.partName}))))},async onSubmit(){var e;const{deliverySlipId:t,deliverySlipType:l,poNo:a,srmNo:i}=this.$route.query;if(!this.user)return void(0,O.LJ)("物料编码未选！");if(!this.value11)return void(0,O.LJ)("数量必填！");if(Number(this.value11)<=0)return void(0,O.LJ)("数量必填大于0！");const o={partNo:this.user,partName:null===(e=this.repairmanSelectOption.filter((e=>e.partNo==this.user))[0])||void 0===e?void 0:e.partName,goodsMaterialsNums:Number(this.value11),warehouseSn:this.value22,traceSn:this.value33,bnsSn:this.value44,packSn:this.value55,productSn:this.value66,dateOfManufacture:this.dateStart,effectiveDate:this.dateOver};this.children=this.children.concat([o]),this.$nextTick((()=>{this.$refs.table1.initFunc(1),this.resetHandle(),this.$refs.scanBar1.reset(),this.$refs.scanBar2.reset(),this.$refs.scanBar3.reset(),this.boxSn="",this.storageCode="",this.text1=""}))},resetHandle(){this.user,this.value11="",this.value22="",this.value33="",this.value44="",this.value55="",this.value66="",this.user="",this.$refs.select11.reset(),this.$refs.dateTimeStart.reset(),this.$refs.dateTimeOver.reset()},barSearchClick(e){const t=e.trim();this.boxSn=t},barSearchClick2(e){const t=e.trim();this.storageCode=t},async onSubmit22(){const{deliverySlipId:e}=this.$route.query;if(!this.children.length)return void(0,O.LJ)("未添加部件信息！");const t={storageCode:this.storageCode,agv:this.switchUrgency?"Y":"N",boxSn:this.boxSn,deliverySlipId:e,partList:this.children},{code:l,data:a=[]}=await(0,$.i)({url:"/iiot/putin/receiveProcurementData",method:"post",payload:t});200==l&&((0,O.XA)("提交成功！"),this.$router.go(-1))},barSearchClick3(e){const{repairmanSelectOption:t}=this,l=String(e),a=l.split(";");if(3!=a.length)return void(0,O.LJ)("物料码格式错误！");const i=t.filter((e=>e.partNo==a[0]));i.length?(this.user=i[0].partNo,this.$refs.select11&&this.$refs.select11.setValue(i[0].partNo),this.value33=a[2],this.value44=U()(new Date).format("YYYY.MM.DD"),this.text1=e):(0,O.LJ)("物料编码不存在！")}}},B=l(40089);const F=(0,B.Z)(z,[["render",b]]);var D=F}}]);
//# sourceMappingURL=chunk.1900.1689576161502.js.map