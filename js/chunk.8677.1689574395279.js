"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[8677],{88575:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(73396),o=n(87139),i={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},s=(0,r._)("span",null,"第",-1),a={style:{"padding-left":"1px","padding-right":"1px"}},l=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),u=(0,r._)("span",null,"共",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,r._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},f=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},g={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(e,t,n,w,_,b){var y=(0,r.up)("v-icon"),x=(0,r.up)("v-btn"),W=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[e.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(W,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:b.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:b.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",i,[s,(0,r._)("span",a,(0,o.zw)(e.current),1),l,u,(0,r._)("span",c,(0,o.zw)(e.page),1),p,d,(0,r._)("span",m,(0,o.zw)(e.totalNum),1),f]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(x,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:b.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(x,{onClick:b.refreshClick,style:(0,o.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),e.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.items,(function(t,n){return(0,r.WI)(e.$slots,"tableBody",{key:n,items:t,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",g,[(0,r.Wm)(y,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var _=n(50124),b=n(95082),y=n(48534),x=(n(21249),n(37184)),W=n(20868),v={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var e=this.auto,t=this.url;e&&t&&this.initFunc()},methods:{previousHandle:function(){var e=this,t=this.current;1!=t?(this.current=t-1,this.$nextTick((function(){e.initFunc(e.current)}))):(0,W.LJ)("第一页！")},nextHandle:function(){var e=this,t=this.current,n=this.page;t>=n?(0,W.LJ)("最后一页！"):(this.current=t+1,this.$nextTick((function(){e.initFunc(e.current)})))},initFunc:function(){var e=arguments,t=this;return(0,y.Z)((0,_.Z)().mark((function n(){var r,o,i,s,a,l,u,c,p,d,m,f,h,g,w,y;return(0,_.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:1,o=e.length>1?e[1]:void 0,i=t.url,s=t.params,a=void 0===s?{}:s,l=t.children,u=t.method,c=t.formatData,!l){n.next=7;break}return t.items=l,t.paging=!1,n.abrupt("return");case 7:return p=(0,b.Z)((0,b.Z)({pageNum:r,pageSize:10},a),o),n.next=10,(0,x.i)({method:u,url:i,payload:"post"==u?p:{},url_params:"get"==u?p:{}});case 10:d=n.sent,m=d.code,f=d.total,h=void 0===f?0:f,g=d.msg,void 0===g?"":g,w=d.data,y=d.rows,200==m&&(t.totalNum=h,t.current=r,t.page=Math.ceil(h/p.pageSize),t.items=c?c(w||y||[]):w||y||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var e=this.refreshFunc;!e&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(e){return Object.assign(e,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},k=n(40089);const C=(0,k.Z)(v,[["render",w]]);var O=C},78677:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});n(68309);var r=n(73396),o=n(87139),i={class:"font-weight-medium"},s=(0,r._)("p",{class:"font-weight-medium text"},"出入库类型:",-1),a={class:"font-weight-light"},l=(0,r._)("p",{class:"font-weight-medium text"},"出入库编码:",-1),u={class:"font-weight-light"},c=(0,r._)("p",{class:"font-weight-medium text"},[(0,r._)("span",{style:{color:"#ee0a24"}},"*"),(0,r.Uk)("单据编码:")],-1),p={class:"font-weight-light text-left",style:{color:"#00E5FF"}},d=(0,r._)("p",{class:"font-weight-medium text"},[(0,r._)("span",{style:{color:"#ee0a24"}},"*"),(0,r.Uk)("物资编码:")],-1),m={class:"font-weight-light text-left",style:{color:"#00E5FF"}},f=(0,r._)("div",{style:{height:"6px"}},null,-1);function h(e,t,n,h,g,w){var _=(0,r.up)("AppBarPage"),b=(0,r.up)("v-icon"),y=(0,r.up)("v-col"),x=(0,r.up)("v-row"),W=(0,r.up)("van-field"),v=(0,r.up)("SelectComponents"),k=(0,r.up)("v-btn"),C=(0,r.up)("v-sheet"),O=(0,r.up)("SelectCodeComponents"),U=(0,r.up)("SelectOrderComponents");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(_),(0,r.Wm)(C,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{icon:"mdi-rocket-launch",size:"16",color:"primary"}),(0,r._)("span",i,(0,o.zw)(e.useInfoTypeText)+"申请",1)]})),_:1}),(0,r.Wm)(y,{cols:"5",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r._)("span",{style:(0,o.j5)("color:".concat(e.isEdit?"#00E5FF":"#4CAF50"))},(0,o.zw)(e.isEdit?"修改":"新增"),5)]})),_:1})]})),_:1}),e.isEdit?((0,r.wg)(),(0,r.j4)(x,{key:0,style:{"margin-top":"12px"},"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"5"},{default:(0,r.w5)((function(){return[s]})),_:1}),(0,r.Wm)(y,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r._)("p",a,(0,o.zw)(e.useInfoTypeText),1)]})),_:1})]})),_:1})):(0,r.kq)("",!0),e.isEdit?((0,r.wg)(),(0,r.j4)(x,{key:1,style:{"margin-top":"12px"},"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"5"},{default:(0,r.w5)((function(){return[l]})),_:1}),(0,r.Wm)(y,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r._)("p",u,(0,o.zw)(e.bufferRow.sparePartUseCode),1)]})),_:1})]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)(W,{modelValue:e.name22,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.name22=t}),autocomplete:"off",placeholder:"请输入",label:"出入库名称"},null,8,["modelValue"]),(0,r.Wm)(v,{modelValue:e.property,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.property=t}),ref:"select1",label:"业务类型",option:e.propertySelectOption,required:""},null,8,["modelValue","option"]),e.showName?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(x,{key:2,style:{"margin-top":"12px"},"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(y,{cols:"5"},{default:(0,r.w5)((function(){return[(0,r._)("p",p,(0,o.zw)(e.orderOption),1)]})),_:1}),(0,r.Wm)(y,{cols:"3"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{onClick:w.selectOrderCode,density:"compact",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 选择 ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})),e.showName?((0,r.wg)(),(0,r.j4)(W,{key:3,modelValue:e.orderOption,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.orderOption=t}),required:"",autocomplete:"off",placeholder:"请输入",label:"单据编码"},null,8,["modelValue"])):(0,r.kq)("",!0),e.showName?((0,r.wg)(),(0,r.j4)(W,{key:4,modelValue:e.name,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.name=t}),autocomplete:"off",placeholder:"请输入",label:"单据名称"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(x,{style:{"margin-top":"12px"},"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[d]})),_:1}),(0,r.Wm)(y,{cols:"5"},{default:(0,r.w5)((function(){return[(0,r._)("p",m,(0,o.zw)(e.codeOption),1)]})),_:1}),(0,r.Wm)(y,{cols:"3"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{onClick:w.selectCode,density:"compact",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 选择 ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),(0,r.Wm)(W,{modelValue:e.number,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.number=t}),placeholder:"请输入",autocomplete:"off",label:"申请数量",required:"",type:"number"},null,8,["modelValue"]),(0,r.Wm)(W,{modelValue:e.explain,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.explain=t}),autocomplete:"off",placeholder:"请输入",label:"出入库说明"},null,8,["modelValue"]),e.show33?((0,r.wg)(),(0,r.j4)(W,{key:5,modelValue:e.supplierCode,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.supplierCode=t}),autocomplete:"off",placeholder:"请输入",label:"供应商编码"},null,8,["modelValue"])):(0,r.kq)("",!0),e.show33?((0,r.wg)(),(0,r.j4)(W,{key:6,modelValue:e.supplierName,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.supplierName=t}),autocomplete:"off",placeholder:"请输入",label:"供应商名称"},null,8,["modelValue"])):(0,r.kq)("",!0),e.show33?((0,r.wg)(),(0,r.j4)(W,{key:7,modelValue:e.supplierUser,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.supplierUser=t}),autocomplete:"off",placeholder:"请输入",label:"联系人"},null,8,["modelValue"])):(0,r.kq)("",!0),e.show33?((0,r.wg)(),(0,r.j4)(W,{key:8,modelValue:e.supplierTel,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.supplierTel=t}),autocomplete:"off",placeholder:"请输入",label:"联系电话"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(x,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"12",class:"text-left"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{onClick:w.submit,block:"",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,o.zw)(e.isEdit?"修改":"提交"),1)]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(O,{ref:"selectCode",typeAction:e.useInfoType,onSelect:w.selectCodeChange},null,8,["typeAction","onSelect"]),(0,r.Wm)(U,{ref:"selectOrder",onSelect:w.selectOrderChange},null,8,["onSelect"]),f])}var g=n(82482),w=n(50124),_=n(48534),b=(n(57327),n(41539),n(21249),n(9653),n(2707),n(76496)),y=n(37184),x=n(2243),W=n(95082),v=(n(74916),n(64765),{style:{"margin-top":"22px"}}),k={class:"v-window-item-table"},C=(0,r._)("p",{class:"font-weight-medium text"},"物料编号:",-1),O={class:"font-weight-light",style:{color:"#00E5FF"}},U=(0,r._)("p",{class:"font-weight-medium text"},"物料描述:",-1),N={class:"font-weight-light"},T=(0,r._)("p",{class:"font-weight-medium text"},"物料类型:",-1),S={class:"font-weight-light"},Z=(0,r._)("p",{class:"font-weight-medium text"},"物料大类:",-1),j={class:"font-weight-light"},V=(0,r._)("p",{class:"font-weight-medium text"},"长文本:",-1),I={class:"font-weight-light"},F=(0,r._)("p",{class:"font-weight-medium text"},"大小/量纲:",-1),z={class:"font-weight-light"},P=(0,r._)("p",{class:"font-weight-medium text"},"物资编码:",-1),$={class:"font-weight-light"},D=(0,r._)("p",{class:"font-weight-medium text"},"物资名称:",-1),B={class:"font-weight-light"},M=(0,r._)("p",{class:"font-weight-medium text"},"规格型号:",-1),q={class:"font-weight-light"},E=(0,r._)("p",{class:"font-weight-medium text"},"数量:",-1),A={class:"font-weight-light"};function J(e,t,n,i,s,a){var l=(0,r.up)("van-field"),u=(0,r.up)("v-col"),c=(0,r.up)("v-btn"),p=(0,r.up)("v-row"),d=(0,r.up)("v-badge"),m=(0,r.up)("v-card"),f=(0,r.up)("TableComponents"),h=(0,r.up)("van-popup");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(h,{show:e.drawer,"onUpdate:show":t[1]||(t[1]=function(t){return e.drawer=t}),closeable:"",position:"right",style:{padding:"12px",width:"92%",height:"100%"}},{default:(0,r.w5)((function(){return[(0,r._)("div",v,[(0,r.Wm)(l,{modelValue:e.code,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.code=t}),placeholder:"请输入",autocomplete:"off",label:"物料编号"},null,8,["modelValue"])]),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"8",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{onClick:a.rest,color:"warning mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("重置")]})),_:1},8,["onClick"]),(0,r.Wm)(c,{onClick:a.search,color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),(0,r._)("div",k,[(0,r.Wm)(f,{ref:"table1",url:e.baseURL,auto:!1,params:(0,W.Z)({},e.pageSearchConfig)},{tableBody:(0,r.w5)((function(e){return["1"==n.typeAction?((0,r.wg)(),(0,r.j4)(m,{key:0},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{content:e._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"7"})]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[C]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",O,(0,o.zw)(e.items.matnr),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[U]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",N,(0,o.zw)(e.items.maktxC),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[T]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",S,(0,o.zw)(a.FormatDictionary("matnr_type",e.items.mtart)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[Z]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",j,(0,o.zw)(a.FormatDictionary("matnr_broad",e.items.broad)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[V]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",I,(0,o.zw)(e.items.ltext),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[F]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",z,(0,o.zw)(e.items.groes),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"4",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{onClick:function(t){return a.select(e)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("选择")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)):(0,r.kq)("",!0),"2"==n.typeAction?((0,r.wg)(),(0,r.j4)(m,{key:1},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{content:e._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"7"})]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[P]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",$,(0,o.zw)(e.items.goodsMaterialsCode),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[D]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",B,(0,o.zw)(e.items.goodsMaterialsName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[M]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",q,(0,o.zw)(e.items.partModel),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"},{default:(0,r.w5)((function(){return[E]})),_:1}),(0,r.Wm)(u,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",A,(0,o.zw)(e.items.goodsMaterialsNums),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(p,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"4"}),(0,r.Wm)(u,{cols:"4",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{onClick:function(t){return a.select(e)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("选择")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)):(0,r.kq)("",!0)]})),_:1},8,["url","params"])])]})),_:1},8,["show"])])}var L=n(88575),R=n(20868),H={components:{AppBarPage:b.Z,TableComponents:L.Z},data:function(){return{baseURL:"",pageSearchConfig:{},drawer:!1,code:""}},emits:["select"],created:function(){this.initHandle()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],o=r.filter((function(e){return t==e.value}))[0]||{};return o},GlobalTooltipFunc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,R.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},initHandle:function(){var e=this,t=this.typeAction;this.$nextTick((function(){"1"==t&&(e.baseURL="/iiot/sparePart/listAll"),"2"==t&&(e.baseURL="/iiot/sparePartUse/getGoodsMaterialsList")}))},showDrawer:function(){var e=this;this.drawer=!0,this.$nextTick((function(){e.$refs.table1.initFunc(1,{})}))},search:function(){this.$refs.table1.initFunc(1)},rest:function(){var e=this;this.code="",this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},select:function(e){var t=this;this.drawer=!1;var n=this.typeAction,r={tmBasPartId:e.items.goodsMaterialsId,matnr:e.items.goodsMaterialsCode,maktxC:e.items.goodsMaterialsName};this.$nextTick((function(){t.$emit("select","1"==n?e.items:r)}))}},props:{typeAction:{type:String,default:function(){return""}}}},G=n(40089);const Y=(0,G.Z)(H,[["render",J]]);var K=Y,X={style:{"margin-top":"22px"}},Q={class:"v-window-item-table"},ee=(0,r._)("p",{class:"font-weight-medium text"},"业务编码:",-1),te={class:"font-weight-light",style:{color:"#00E5FF"}},ne=(0,r._)("p",{class:"font-weight-medium text"},"业务名称:",-1),re={class:"font-weight-light"},oe=(0,r._)("p",{class:"font-weight-medium text"},"业务类型:",-1),ie={class:"font-weight-light"};function se(e,t,n,i,s,a){var l=(0,r.up)("van-field"),u=(0,r.up)("SelectComponents"),c=(0,r.up)("v-col"),p=(0,r.up)("v-btn"),d=(0,r.up)("v-row"),m=(0,r.up)("v-badge"),f=(0,r.up)("v-card"),h=(0,r.up)("TableComponents"),g=(0,r.up)("van-popup");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(g,{show:e.drawer,"onUpdate:show":t[2]||(t[2]=function(t){return e.drawer=t}),closeable:"",position:"right",style:{padding:"12px",width:"92%",height:"100%"}},{default:(0,r.w5)((function(){return[(0,r._)("div",X,[(0,r.Wm)(l,{modelValue:e.code,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.code=t}),placeholder:"请输入",autocomplete:"off",label:"业务编码"},null,8,["modelValue"]),(0,r.Wm)(u,{modelValue:e.sign,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sign=t}),ref:"select3",label:"业务类型",option:e.signSelectOption},null,8,["modelValue","option"])]),(0,r.Wm)(d,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"4"}),(0,r.Wm)(c,{cols:"8",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{onClick:a.rest,color:"warning mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("重置")]})),_:1},8,["onClick"]),(0,r.Wm)(p,{onClick:a.search,color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),(0,r._)("div",Q,[(0,r.Wm)(h,{ref:"table1",url:"/iiot/sparePartBills/list",method:"get",params:(0,W.Z)({businessCode:e.code,businessType:e.sign},e.pageSearchConfig)},{tableBody:(0,r.w5)((function(e){return[(0,r.Wm)(f,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{content:e._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(c,{cols:"4"}),(0,r.Wm)(c,{cols:"7"})]})),_:2},1024),(0,r.Wm)(d,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"4"},{default:(0,r.w5)((function(){return[ee]})),_:1}),(0,r.Wm)(c,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",te,(0,o.zw)(e.items.businessCode),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(d,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"4"},{default:(0,r.w5)((function(){return[ne]})),_:1}),(0,r.Wm)(c,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",re,(0,o.zw)(e.items.businessName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(d,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"4"},{default:(0,r.w5)((function(){return[oe]})),_:1}),(0,r.Wm)(c,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",ie,(0,o.zw)(a.FormatDictionary("ccgl_bpbj_business_type",e.items.businessType)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(d,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{cols:"4"}),(0,r.Wm)(c,{cols:"4"}),(0,r.Wm)(c,{cols:"4",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(p,{onClick:function(t){return a.select(e)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("选择")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params"])])]})),_:1},8,["show"])])}var ae={components:{AppBarPage:b.Z,SelectComponents:x.Z,TableComponents:L.Z},data:function(){return{pageSearchConfig:{},drawer:!1,code:"",sign:"",signSelectOption:[]}},emits:["select"],methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],o=r.filter((function(e){return t==e.value}))[0]||{};return o},GlobalTooltipFunc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,R.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},showDrawer:function(){var e=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t=e["ccgl_bpbj_business_type"]||[];this.signSelectOption=t.map((function(e){return Object.assign({text:e.lable,value:e.value})})),this.drawer=!0},search:function(){this.$refs.table1.initFunc(1)},rest:function(){var e=this;this.code="",this.sign="",this.$refs.select3&&this.$refs.select3.reset(),this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},select:function(e){var t=this;this.drawer=!1,this.$nextTick((function(){t.$emit("select",e.items)}))}}};const le=(0,G.Z)(ae,[["render",se]]);var ue=le,ce={components:{AppBarPage:b.Z,SelectComponents:x.Z,SelectCodeComponents:K,SelectOrderComponents:ue},data:function(){return{show33:!1,showName:!1,bufferRow:{},isEdit:!1,useInfoType:"",useInfoTypeText:"",name22:"",name:"",number:"",explain:"",orderOption:"",codeOption:"",orderOptionObj:{},codeOptionObj:{},supplierCode:"",supplierName:"",supplierUser:"",supplierTel:"",property:"",propertySelectOption:[]}},watch:{property:{handler:function(e){this.showName=!1,this.show33=!1,this.name="",this.orderOption="",this.codeOptionObj={},this.orderOptionObj={},this.supplierCode="",this.supplierName="",this.supplierUser="",this.supplierTel="","1"==e&&(this.show33=!0,this.showName=!0)},deep:!0,immediate:!0}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],o=r.filter((function(e){return t==e.value}))[0]||{};return o},initFunc:function(){var e=this;return(0,_.Z)((0,w.Z)().mark((function t(){var n,r,o,i,s,a,l,u,c,p,d;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$route.query,r=n.useInfoType,o=n.sparePartUseId,i=n.isEdit,s=void 0!==i&&i,a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),l=a["ccgl_bpbj_business_type"]||[],e.propertySelectOption=l.map((function(e){return Object.assign({text:e.lable,value:e.value})})),e.useInfoType=r,e.useInfoTypeText="1"==r?"入库":"出库",e.isEdit=s,o){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,(0,y.i)({url:"/iiot/sparePartUse",method:"get",url_RESTful:"/".concat(o)});case 11:u=t.sent,c=u.code,p=u.data,d=void 0===p?{}:p,200==c&&(e.bufferRow=d,e.name22=d.sparePartUseName,e.property=d.businessType,e.$refs.select1&&e.$refs.select1.setValue(d.businessType),e.explain=d.sparePartUseExplain,e.number=d.goodsMaterialsNums,e.$nextTick((function(){e.orderOption=d.businessCode,e.name=d.businessName,e.orderOptionObj={businessId:d.businessId,businessCode:d.businessCode,businessName:d.businessName},e.codeOption=d.goodsMaterialsCode,e.codeOptionObj={tmBasPartId:d.goodsMaterialsId,matnr:d.goodsMaterialsCode,maktxC:d.goodsMaterialsName},setTimeout((function(){e.supplierCode=d.supplierCode,e.supplierName=d.supplierName,e.supplierUser=d.supplierUser,e.supplierTel=d.supplierTel}),500)})));case 16:case"end":return t.stop()}}),t)})))()},selectCode:function(){this.$refs.selectCode.showDrawer()},selectOrderCode:function(){this.$refs.selectOrder.showDrawer()},selectCodeChange:function(e){this.codeOption=e.matnr,this.codeOptionObj=e},selectOrderChange:function(e){this.orderOption=e.businessCode,this.orderOptionObj=e},submit:function(){var e=this;return(0,_.Z)((0,w.Z)().mark((function t(){var n,r,o,i,s,a,l,u,c,p,d,m;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$route.query,o=r.useInfoType,i=r.isEdit,s=void 0!==i&&i,a=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}"),l=e.bufferRow,e.property){t.next=6;break}return(0,R.LJ)("业务类型必填！"),t.abrupt("return");case 6:if(e.orderOption){t.next=9;break}return e.showName?(0,R.LJ)("单据编码必填！"):(0,R.LJ)("单据编码必选！"),t.abrupt("return");case 9:if(e.codeOption){t.next=12;break}return(0,R.LJ)("物资编码必选！"),t.abrupt("return");case 12:if(e.number&&!(Number(e.number)<=0)){t.next=15;break}return(0,R.LJ)("申请数量必填大于0！"),t.abrupt("return");case 15:return u={sparePartUseId:null,sparePartUseCode:null,sparePartUseName:null,outNums:null,outUserCode:null,outUserName:null,outDatetime:null,sort:null,createBy:null,createTime:null,updateBy:null,updateTime:null,businessType:e.property,sparePartUseExplain:e.explain,goodsMaterialsNums:Number(e.number),businessId:e.orderOptionObj.businessId,businessCode:"1"==e.property?e.orderOption:e.orderOptionObj.businessCode,businessName:"1"==e.property?e.name:e.orderOptionObj.businessName,goodsMaterialsId:e.codeOptionObj.tmBasPartId,goodsMaterialsCode:e.codeOptionObj.matnr,goodsMaterialsName:e.codeOptionObj.maktxC,operUserName:a.userName,operUserCode:a.userId,supplierCode:e.supplierCode,supplierName:e.supplierName,supplierUser:e.supplierUser,supplierTel:e.supplierTel,useInfoType:o,operType:"N",finishState:"N",dataState:"N",delFlag:"Y",version:0},n={sparePartUseId:l.sparePartUseId,sparePartUseCode:l.sparePartUseCode,sparePartUseName:l.sparePartUseName,outNums:l.outNums,outUserCode:l.outUserCode,outUserName:l.outUserName,outDatetime:l.outDatetime,sort:l.sort,createBy:l.createBy,createTime:l.createTime,updateBy:l.updateBy,updateTime:l.updateTime},(0,g.Z)(n,"sparePartUseName",e.name22),(0,g.Z)(n,"businessType",e.property),(0,g.Z)(n,"sparePartUseExplain",e.explain),(0,g.Z)(n,"goodsMaterialsNums",Number(e.number)),(0,g.Z)(n,"businessId",e.orderOptionObj.businessId),(0,g.Z)(n,"businessCode","1"==e.property?e.orderOption:e.orderOptionObj.businessCode),(0,g.Z)(n,"businessName","1"==e.property?e.name:e.orderOptionObj.businessName),(0,g.Z)(n,"goodsMaterialsId",e.codeOptionObj.tmBasPartId),(0,g.Z)(n,"goodsMaterialsCode",e.codeOptionObj.matnr),(0,g.Z)(n,"goodsMaterialsName",e.codeOptionObj.maktxC),(0,g.Z)(n,"operUserName",a.userName),(0,g.Z)(n,"operUserCode",a.userId),(0,g.Z)(n,"supplierCode",e.supplierCode),(0,g.Z)(n,"supplierName",e.supplierName),(0,g.Z)(n,"supplierUser",e.supplierUser),(0,g.Z)(n,"supplierTel",e.supplierTel),(0,g.Z)(n,"useInfoType",o),(0,g.Z)(n,"operType","N"),(0,g.Z)(n,"finishState","N"),(0,g.Z)(n,"dataState","N"),(0,g.Z)(n,"delFlag","Y"),(0,g.Z)(n,"version",0),c=n,t.next=19,(0,y.i)({url:"/iiot/sparePartUse",method:s?"put":"post",payload:s?c:u});case 19:p=t.sent,d=p.code,m=p.data,void 0===m?{}:m,200==d&&((0,R.XA)("提交成功！"),e.$router.go(-1));case 24:case"end":return t.stop()}}),t)})))()}}};const pe=(0,G.Z)(ce,[["render",h]]);var de=pe}}]);
//# sourceMappingURL=chunk.8677.1689574395279.js.map