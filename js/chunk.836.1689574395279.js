"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[836],{89337:function(t,e,n){n.d(e,{$w:function(){return f},AT:function(){return o},NM:function(){return l},ew:function(){return s},jt:function(){return a},vU:function(){return c}});var r=n(50124),u=n(48534),i=n(37184),a=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},57265:function(t,e,n){n.d(e,{Z:function(){return _}});var r=n(73396),u={style:{padding:"0px 12px 0px 12px"}},i={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},a={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},o={class:"custem-iamge-upload"},c=["src"];function s(t,e,n,s,l,f){var m=(0,r.up)("van-uploader"),p=(0,r.up)("v-icon");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r._)("div",u,[n.preview?((0,r.wg)(),(0,r.iD)("p",i,"图片预览 ")):((0,r.wg)(),(0,r.iD)("p",a," 图片上传 ")),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:2,"after-read":f.afterRead,"preview-image":!1},null,8,["after-read"])),(0,r._)("div",o,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.bufferFileList,(function(u,i){return(0,r.wg)(),(0,r.iD)("li",{key:i,onClick:e[0]||(e[0]=function(e){return f.checkImage(t.bufferFileList)})},[(0,r._)("img",{src:u.url},null,8,c),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(p,{key:0,onClick:function(t){return f.removeClick(u,t)},class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])})),128))])])])}var l=n(50124),f=n(48534),m=(n(21249),n(26699),n(32023),n(92222),n(38862),n(57327),n(41539),n(37184)),p=n(20868),d=n(9801),w={components:{},emits:["update:modelValue","onChange"],data:function(){return{bufferFileList:[]}},watch:{modelValue:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.bufferFileList=t},deep:!0,immediate:!0},initPath:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.bufferFileList=t.split(",").map((function(t){return Object.assign({url:t})})))},deep:!0,immediate:!0}},methods:{checkImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(0,d.V)(t.map((function(t){return t.url})))},afterRead:function(t){var e=this;return(0,f.Z)((0,l.Z)().mark((function n(){var r,u,i,a,o;return(0,l.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.file.type.includes("image")){n.next=3;break}return(0,p.LJ)("只能选择图片！"),n.abrupt("return");case 3:if(!(t.file.size>=19922944)){n.next=6;break}return(0,p.LJ)("图片超过20M！"),n.abrupt("return");case 6:if(!(e.bufferFileList.length>2)){n.next=9;break}return(0,p.LJ)("最多只能选择3张图片！"),n.abrupt("return");case 9:return r=new FormData,r.append("file",t.file),n.next=13,(0,m.i)({url:"/file/upload",method:"post",formData:!0,payload:r});case 13:u=n.sent,i=u.code,a=u.data,o=void 0===a?{}:a,200==i?(e.bufferFileList=e.bufferFileList.concat([o]),(0,p.XA)("图片上传成功！"),e.$emit("update:modelValue",JSON.parse(JSON.stringify(e.bufferFileList)))):(0,p.LJ)("图片上传失败！");case 18:case"end":return n.stop()}}),n)})))()},removeClick:function(t,e){var n=this;e.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((function(e){return e.url!=t.url})),this.$nextTick((function(){n.$emit("update:modelValue",JSON.parse(JSON.stringify(n.bufferFileList)))}))}},props:{modelValue:{type:Array,default:function(){return[]}},initPath:{type:String,default:function(){return""}},preview:{type:Boolean,default:function(){return!1}}}},h=n(40089);const g=(0,h.Z)(w,[["render",s]]);var _=g},90836:function(t,e,n){n.r(e),n.d(e,{default:function(){return gt}});var r=n(73396),u=n(87139),i={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},a=(0,r._)("span",{class:"font-weight-medium"},"报修信息",-1),o=(0,r._)("p",{class:"font-weight-medium text"},"故障类型:",-1),c={class:"text-truncate font-weight-light"},s=(0,r._)("p",{class:"font-weight-medium text"},"故障位置:",-1),l={class:"text-truncate font-weight-light"},f=(0,r._)("p",{class:"font-weight-medium text"},"故障详情描述:",-1),m=(0,r._)("p",{class:"font-weight-medium text"},"维修类型:",-1),p={class:"text-truncate font-weight-light"},d=(0,r._)("p",{class:"font-weight-medium text"},"报修人:",-1),w={class:"text-truncate font-weight-light"},h=(0,r._)("p",{class:"font-weight-medium text"},"报修时间:",-1),g={class:"text-truncate font-weight-light"},_=(0,r._)("p",{class:"font-weight-medium text"},"响应人:",-1),v={class:"text-truncate font-weight-light"},x=(0,r._)("p",{class:"font-weight-medium text"},"响应时间:",-1),b={class:"text-truncate font-weight-light"},W=(0,r._)("p",{class:"font-weight-medium text"},"取消原因:",-1),R={class:"text-truncate font-weight-light"},y=(0,r._)("span",{class:"font-weight-medium"},"维修确认",-1),k=(0,r._)("p",{class:"font-weight-medium text"},"是否外修:",-1),Z={class:"text-truncate font-weight-light"},C=(0,r._)("p",{class:"font-weight-medium text"},"维修单位:",-1),q={class:"text-truncate font-weight-light"},z=(0,r._)("p",{class:"font-weight-medium text"},"维修费用:",-1),F={class:"text-truncate font-weight-light"},L=(0,r._)("p",{class:"font-weight-medium text"},"是否报废:",-1),A={class:"text-truncate font-weight-light"},I=(0,r._)("p",{class:"font-weight-medium text"},"维修人:",-1),B={class:"text-truncate font-weight-light"},O=(0,r._)("p",{class:"font-weight-medium text"},"协助人:",-1),S={class:"text-truncate font-weight-light"},T=(0,r._)("p",{class:"font-weight-medium text"},"确认时间:",-1),N={class:"text-truncate font-weight-light"},J=(0,r._)("span",{class:"font-weight-medium"},"维修报告",-1),D=(0,r._)("span",{class:"font-weight-medium text"},"根本问题: ",-1),P=(0,r._)("span",{class:"font-weight-medium text"},"解决措施: ",-1),$=(0,r._)("span",{class:"font-weight-medium text"},"改进建议: ",-1),E=(0,r._)("p",{class:"font-weight-medium text"},"维修用时:",-1),U={class:"text-truncate font-weight-light"},j=(0,r._)("span",{class:"font-weight-medium text"},"维修内容: ",-1),M=(0,r._)("p",{class:"font-weight-medium text"},"工具:",-1),V={class:"text-truncate font-weight-light"},H=(0,r._)("p",{class:"font-weight-medium text"},"影响时长:",-1),Y={class:"text-truncate font-weight-light"},G=(0,r._)("p",{class:"font-weight-medium text"},"是否遗留:",-1),X={class:"text-truncate font-weight-light"},K=(0,r._)("p",{class:"font-weight-medium text"},"遗留原因:",-1),Q={class:"text-truncate font-weight-light"},tt=(0,r._)("div",{style:{height:"30px"}},null,-1);function et(t,e,n,et,nt,rt){var ut=(0,r.up)("AppBarPage"),it=(0,r.up)("v-col"),at=(0,r.up)("v-row"),ot=(0,r.up)("v-icon"),ct=(0,r.up)("UploaderImageComponents"),st=(0,r.up)("v-sheet");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(ut),(0,r.Wm)(at,{"no-gutters":"",style:{"margin-bottom":"4px","padding-left":"6px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("span",i,(0,u.zw)(t.bufferRow.equipmentName),1)]})),_:1})]})),_:1}),(0,r.Wm)(st,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(at,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ot,{icon:"mdi-bullhorn",size:"16",color:"primary"}),a]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[o]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",c,(0,u.zw)(t.bufferRow.faultTypeCn),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[s]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",l,(0,u.zw)(t.bufferRow.faultStationCn),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[f]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",{class:"text-truncate font-weight-light",onClick:e[0]||(e[0]=function(e){return rt.GlobalTooltipFunc(t.bufferRow.problemDesc)})},(0,u.zw)(t.bufferRow.problemDesc),1)]})),_:1})]})),_:1}),(0,r.Wm)(ct,{initPath:t.bufferRow.filePath,preview:""},null,8,["initPath"]),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[m]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",p,(0,u.zw)(rt.FormatDictionary("equipment_repair_type",t.bufferRow.reportType)["lable"]),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[d]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",w,(0,u.zw)(t.bufferRow.reportBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[h]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",g,(0,u.zw)(t.bufferRow.reportTime),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[_]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",v,(0,u.zw)(t.bufferRow.responseBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[x]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",b,(0,u.zw)(t.bufferRow.responseTime),1)]})),_:1})]})),_:1}),t.bufferRow.cancelReason?((0,r.wg)(),(0,r.j4)(at,{key:0,"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[W]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",R,(0,u.zw)(t.bufferRow.cancelReason),1)]})),_:1})]})),_:1})):(0,r.kq)("",!0)]})),_:1}),t.bufferRow.cancelReason?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(st,{key:0,elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(at,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ot,{icon:"mdi-check-bold",size:"16",color:"primary"}),y]})),_:1}),(0,r.Wm)(it,{cols:"6"})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[k]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",Z,(0,u.zw)(1==t.bufferRow.isRepair?"是":"否"),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[C]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",q,(0,u.zw)(t.bufferRow.repairUnit),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[z]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",F,(0,u.zw)(t.bufferRow.repairCost),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[L]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",A,(0,u.zw)(1==t.bufferRow.isScrap?"是":"否"),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[I]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",B,(0,u.zw)(t.bufferRow.maintainRepairBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[O]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",S,(0,u.zw)(t.bufferRow.helpers),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[T]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",N,(0,u.zw)(t.bufferRow.maintainRepairTime),1)]})),_:1})]})),_:1})]})),_:1})),(0,r.Wm)(st,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(at,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(ot,{icon:"mdi-file-chart",size:"16",color:"primary"}),J]})),_:1}),(0,r.Wm)(it,{cols:"6"})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"12"},{default:(0,r.w5)((function(){return[D,(0,r._)("span",null,(0,u.zw)(t.bufferRow.rootWarin),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"12"},{default:(0,r.w5)((function(){return[P,(0,r._)("span",null,(0,u.zw)(t.bufferRow.solvingMeasures),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"12"},{default:(0,r.w5)((function(){return[$,(0,r._)("span",null,(0,u.zw)(t.bufferRow.suggestionsImprovement),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[E]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",U,(0,u.zw)(t.bufferRow.repairTime),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"12"},{default:(0,r.w5)((function(){return[j,(0,r._)("span",null,(0,u.zw)(t.bufferRow.repairContent),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[M]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",V,(0,u.zw)(t.bufferRow.tool),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[H]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",Y,(0,u.zw)(t.bufferRow.productAffectTime),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[G]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",X,(0,u.zw)(1==t.bufferRow.isLeave?"是":"否"),1)]})),_:1})]})),_:1}),(0,r.Wm)(at,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(it,{cols:"4"},{default:(0,r.w5)((function(){return[K]})),_:1}),(0,r.Wm)(it,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",Q,(0,u.zw)(t.bufferRow.leaveReason),1)]})),_:1})]})),_:1})]})),_:1}),tt])}var nt=n(82482),rt=n(50124),ut=n(48534),it=(n(57327),n(41539),n(9653),n(57658),n(73210),n(21249),n(92222),n(38862),n(76496)),at=n(2243),ot=n(37184),ct=n(57265),st=n(20868),lt=n(89337),ft=n(69650),mt=n(36797),pt=n.n(mt),dt={components:{AppBarPage:it.Z,UploaderImageComponents:ct.Z,SelectComponents:at.Z},data:function(){return{bufferRow:{},reasonCancellation:"",repairUnit:"",repairCost:"",checked:!1,checked2:!1,value:"",user:"",time:"",value1:"",value2:"",value3:"",value4:"",value5:"",value6:"",checked3:!1,value7:"",value8:"",repairmanSelectOption:[]}},created:function(){this.initFunc()},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,st.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],u=r.filter((function(t){return e==t.value}))[0]||{};return u},initFunc:function(){var t=this;return(0,ut.Z)((0,rt.Z)().mark((function e(){var n,r,u,i,a,o,c,s,l;return(0,rt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query,r=n.teAdRepairId,u=n.filePath,i=void 0===u?"":u,a=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}"),t.value=a.userName,t.time=pt()(new Date).format("YYYY-MM-DD HH:mm"),e.next=6,(0,ot.i)({url:"/iiot/equipmentRepair/equipmentForApp/".concat(r),method:"get"});case 6:o=e.sent,c=o.code,s=o.data,l=void 0===s?{}:s,200==c&&(t.bufferRow=l,t.bufferRow.filePath=i,t.$nextTick((function(){t.value4=Number(t.bufferRow.repairTime||0),t.value8=Number(t.bufferRow.productAffectTime||0)})));case 11:case"end":return e.stop()}}),e)})))()},checkExpress:function(){var t=this.bufferRow;this.$router.push({path:"/equipment/maintain/experience",query:{state:"1",teAdRepairId:t.teAdRepairId,tmBasEquipmentId:t.tmBasEquipmentId}})},cancelReimbursement:function(){var t=this;return(0,ut.Z)((0,rt.Z)().mark((function e(){var n,r;return(0,rt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.bufferRow,r=t.reasonCancellation.trim(),r){e.next=5;break}return(0,st.LJ)("取消原因必填！"),e.abrupt("return");case 5:(0,ft.vC)({title:"取消",message:"取消后数据不可恢复，确认取消！",theme:"round-button",closeOnClickOverlay:!0}).then((0,ut.Z)((0,rt.Z)().mark((function e(){var u,i,a;return(0,rt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,ot.i)({url:"/iiot/equipmentRepair/cancelRepairWbForceForApp",method:"post",payload:{teAdRepairId:n.teAdRepairId,cancelReason:r,tmBasEquipmentId:n.tmBasEquipmentId}});case 2:u=e.sent,i=u.code,a=u.data,void 0===a?{}:a,200==i&&((0,st.XA)("提交成功！"),t.$router.push({path:"/equipment/maintain",query:{tabs:2}}));case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;return(0,ut.Z)((0,rt.Z)().mark((function e(){var n,r,u,i,a,o,c,s,l,f,m,p,d,w,h,g,_;return(0,rt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.bufferRow,u=t.checked,i=t.checked2,a=t.user,o=t.value1,c=void 0===o?"":o,s=t.value2,l=void 0===s?"":s,f=t.value3,m=void 0===f?"":f,p=t.value7,d=void 0===p?"":p,c.trim()){e.next=5;break}return(0,st.LJ)("根本问题必填!"),e.abrupt("return");case 5:if(Number(t.value4)){e.next=8;break}return(0,st.LJ)("维修用时必填!"),e.abrupt("return");case 8:if(t.value5.trim()){e.next=11;break}return(0,st.LJ)("维修内容必填!"),e.abrupt("return");case 11:if(Number(t.value8)){e.next=14;break}return(0,st.LJ)("影响时长必填!"),e.abrupt("return");case 14:if(!t.checked3||d.trim()){e.next=17;break}return(0,st.LJ)("遗留原因必填!"),e.abrupt("return");case 17:return n={tmBasEquipmentId:r.tmBasEquipmentId,teAdRepairId:r.teAdRepairId,isRepair:u?1:0,isScrap:i?1:0,helpers:a,repairUnit:t.repairUnit,repairCost:t.repairCost,rootWarin:c,solvingMeasures:l,suggestionsImprovement:m,repairTime:t.value4,repairContent:t.value5,tool:t.value6,productAffectTime:t.value8},(0,nt.Z)(n,"productAffectTime",t.value8),(0,nt.Z)(n,"isLeave",t.checked3?1:0),(0,nt.Z)(n,"leaveReason",t.value7),w=n,e.next=20,(0,ot.i)({url:"/iiot/equipmentRepair/repConfirmWbForApp",method:"post",payload:w});case 20:h=e.sent,g=h.code,_=h.data,void 0===_?{}:_,200==g&&((0,st.XA)("提交成功！"),t.$router.push({path:"/equipment/maintain",query:{tabs:2}}));case 25:case"end":return e.stop()}}),e)})))()},initRepairman:function(){var t=this;return(0,ut.Z)((0,rt.Z)().mark((function e(){var n,r,u;return(0,rt.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,lt.NM)();case 2:n=e.sent,r=n.data,u=void 0===r?[]:r,t.repairmanSelectOption=u.map((function(t){return Object.assign({text:"".concat(t.userName,"-").concat(t.nickName),value:t.userId})}));case 6:case"end":return e.stop()}}),e)})))()},editExperience:function(){var t=this.bufferRow;this.$router.push({path:"/equipment/maintain/experienceEdit",query:{teAdRepairId:t.teAdRepairId}})},repairmanChange:function(t){},onReceiveFunc:function(){var t=this.bufferRow,e=this.value;this.$router.push({path:"/replacement/index",query:{activeType:"equipment",row:JSON.stringify(Object.assign(t,{reportBy:e}))}})}}},wt=n(40089);const ht=(0,wt.Z)(dt,[["render",et]]);var gt=ht},69650:function(t,e,n){n.d(e,{vC:function(){return f}});n(41539);var r,u=n(73396),i=n(12220),a=n(57548),o=n(21178),c={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},s=(0,i.l7)({},c);function l(){var t={setup:function(){var t=(0,a.o)(),e=t.state,n=t.toggle;return function(){return(0,u.Wm)(o.Z,(0,u.dG)(e,{"onUpdate:show":n}),null)}}},e=(0,a.H)(t);r=e.instance}function f(t){return i._f?new Promise((function(e,n){r||l(),r.open((0,i.l7)({},s,t,{callback:function(t){("confirm"===t?e:n)(t)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.836.1689574395279.js.map