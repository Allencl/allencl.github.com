"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[9705],{88575:function(t,e,n){n.d(e,{Z:function(){return W}});var r=n(73396),i=n(87139),a={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,r._)("span",null,"第",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},s=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),l=(0,r._)("span",null,"共",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},f=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,r._)("span",null,"总",-1),p={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},g={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(t,e,n,w,v,x){var k=(0,r.up)("v-icon"),_=(0,r.up)("v-btn"),y=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[t.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(y,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:x.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:x.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",a,[o,(0,r._)("span",u,(0,i.zw)(t.current),1),s,l,(0,r._)("span",c,(0,i.zw)(t.page),1),f,d,(0,r._)("span",p,(0,i.zw)(t.totalNum),1),m]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(_,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:x.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(_,{onClick:x.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),t.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(t.items,(function(e,n){return(0,r.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",g,[(0,r.Wm)(k,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var v=n(50124),x=n(95082),k=n(48534),_=(n(21249),n(37184)),y=n(20868),b={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,y.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,y.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,k.Z)((0,v.Z)().mark((function n(){var r,i,a,o,u,s,l,c,f,d,p,m,h,g,w,k;return(0,v.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:1,i=t.length>1?t[1]:void 0,a=e.url,o=e.params,u=void 0===o?{}:o,s=e.children,l=e.method,c=e.formatData,!s){n.next=7;break}return e.items=s,e.paging=!1,n.abrupt("return");case 7:return f=(0,x.Z)((0,x.Z)({pageNum:r,pageSize:10},u),i),n.next=10,(0,_.i)({method:l,url:a,payload:"post"==l?f:{},url_params:"get"==l?f:{}});case 10:d=n.sent,p=d.code,m=d.total,h=void 0===m?0:m,g=d.msg,void 0===g?"":g,w=d.data,k=d.rows,200==p&&(e.totalNum=h,e.current=r,e.page=Math.ceil(h/f.pageSize),e.items=c?c(w||k||[]):w||k||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},S=n(40089);const C=(0,S.Z)(b,[["render",w]]);var W=C},57265:function(t,e,n){n.d(e,{Z:function(){return v}});var r=n(73396),i={style:{padding:"0px 12px 0px 12px"}},a={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},o={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},u={class:"custem-iamge-upload"},s=["src"];function l(t,e,n,l,c,f){var d=(0,r.up)("van-uploader"),p=(0,r.up)("v-icon");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r._)("div",i,[n.preview?((0,r.wg)(),(0,r.iD)("p",a,"图片预览 ")):((0,r.wg)(),(0,r.iD)("p",o," 图片上传 ")),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(d,{key:2,"after-read":f.afterRead,"preview-image":!1},null,8,["after-read"])),(0,r._)("div",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.bufferFileList,(function(i,a){return(0,r.wg)(),(0,r.iD)("li",{key:a,onClick:e[0]||(e[0]=function(e){return f.checkImage(t.bufferFileList)})},[(0,r._)("img",{src:i.url},null,8,s),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(p,{key:0,onClick:function(t){return f.removeClick(i,t)},class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])})),128))])])])}var c=n(50124),f=n(48534),d=(n(21249),n(26699),n(32023),n(92222),n(38862),n(57327),n(41539),n(37184)),p=n(20868),m=n(9801),h={components:{},emits:["update:modelValue","onChange"],data:function(){return{bufferFileList:[]}},watch:{modelValue:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.bufferFileList=t},deep:!0,immediate:!0},initPath:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.bufferFileList=t.split(",").map((function(t){return Object.assign({url:t})})))},deep:!0,immediate:!0}},methods:{checkImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(0,m.V)(t.map((function(t){return t.url})))},afterRead:function(t){var e=this;return(0,f.Z)((0,c.Z)().mark((function n(){var r,i,a,o,u;return(0,c.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.file.type.includes("image")){n.next=3;break}return(0,p.LJ)("只能选择图片！"),n.abrupt("return");case 3:if(!(t.file.size>=19922944)){n.next=6;break}return(0,p.LJ)("图片超过20M！"),n.abrupt("return");case 6:if(!(e.bufferFileList.length>2)){n.next=9;break}return(0,p.LJ)("最多只能选择3张图片！"),n.abrupt("return");case 9:return r=new FormData,r.append("file",t.file),n.next=13,(0,d.i)({url:"/file/upload",method:"post",formData:!0,payload:r});case 13:i=n.sent,a=i.code,o=i.data,u=void 0===o?{}:o,200==a?(e.bufferFileList=e.bufferFileList.concat([u]),(0,p.XA)("图片上传成功！"),e.$emit("update:modelValue",JSON.parse(JSON.stringify(e.bufferFileList)))):(0,p.LJ)("图片上传失败！");case 18:case"end":return n.stop()}}),n)})))()},removeClick:function(t,e){var n=this;e.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((function(e){return e.url!=t.url})),this.$nextTick((function(){n.$emit("update:modelValue",JSON.parse(JSON.stringify(n.bufferFileList)))}))}},props:{modelValue:{type:Array,default:function(){return[]}},initPath:{type:String,default:function(){return""}},preview:{type:Boolean,default:function(){return!1}}}},g=n(40089);const w=(0,g.Z)(h,[["render",l]]);var v=w},15248:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var r=n(73396),i=n(87139),a={class:"v-window-item-table"},o={class:"text-truncate font-weight-medium text-left text-teal-lighten-1",color:"primary"},u={class:"font-weight-light text-teal-lighten-1"},s=(0,r._)("p",{class:"font-weight-medium text"},"序列号:",-1),l={class:"font-weight-light"},c=(0,r._)("p",{class:"font-weight-medium text"},"发起工序:",-1),f={class:"font-weight-light"},d=(0,r._)("p",{class:"font-weight-medium text"},"拦截工序:",-1),p={class:"font-weight-light"},m=(0,r._)("p",{class:"font-weight-medium text"},"例外转序原因:",-1),h={class:"font-weight-light"},g=(0,r._)("p",{class:"font-weight-medium text"},"整机物料:",-1),w={class:"font-weight-light"},v=(0,r._)("p",{class:"font-weight-medium text"},"发起人:",-1),x={class:"font-weight-light"},k=(0,r._)("p",{class:"font-weight-medium text"},"发起时间:",-1),_={class:"font-weight-light"};function y(t,e,n,y,b,S){var C=(0,r.up)("AppBarPage"),W=(0,r.up)("ScanBarComponents"),F=(0,r.up)("SelectComponents"),O=(0,r.up)("v-btn"),Z=(0,r.up)("v-badge"),L=(0,r.up)("v-col"),I=(0,r.up)("v-row"),z=(0,r.up)("UploaderImageComponents"),N=(0,r.up)("v-card"),$=(0,r.up)("TableComponents");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(C),(0,r.Wm)(W,{ref:"ScanBar",placeholder:"请扫描或输入 整机序列号",onSearchClick:S.barSearchClick},null,8,["onSearchClick"]),(0,r.Wm)(F,{modelValue:t.measures,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.measures=e}),ref:"select11",label:"工序查询",showSearch:"",option:t.measuresSelectOption,onOnSearchChange:S.measuresSelectSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,r.Wm)(O,{style:{position:"fixed",top:"170px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"secondary",onClick:S.searchFunc},{default:(0,r.w5)((function(){return[(0,r.Uk)("查询")]})),_:1},8,["onClick"]),(0,r.Wm)(O,{style:{position:"fixed",top:"230px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"warning",onClick:S.resetFunc},{default:(0,r.w5)((function(){return[(0,r.Uk)("重置")]})),_:1},8,["onClick"]),(0,r._)("div",a,[(0,r.Wm)($,{ref:"table1",url:"/iiot/abnormalConversion/list",showSearchBtn:!1,params:{qmType:30,querySource:"1",ttPpOrderSnId:t.ttPpOrderSnId,tmBasNodeLevelId:t.measures}},{tableBody:(0,r.w5)((function(t){return[(0,r.Wm)(N,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(I,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Z,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",o,(0,i.zw)(S.FormatDictionary("conversion_status",t.items.conversionState)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("p",u,(0,i.zw)(t.items.conversionNo),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[s]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",l,(0,i.zw)(t.items.sn),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",f,(0,i.zw)(t.items.initiateProcess),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[d]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",p,(0,i.zw)(t.items.interceptProcess),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[m]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",h,(0,i.zw)(t.items.conversionDesc),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[g]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",w,(0,i.zw)(t.items.partName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[v]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",x,(0,i.zw)(t.items.initiateByName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[k]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",_,(0,i.zw)(t.items.createDate),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(z,{initPath:t.items.initiatePath,preview:""},null,8,["initPath"]),(0,r.Wm)(I,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"6",class:"text-left"},{default:(0,r.w5)((function(){return["10"==t.items.conversionState?((0,r.wg)(),(0,r.j4)(O,{key:0,onClick:function(e){return S.dischargedClick(t)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("放行")]})),_:2},1032,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024),(0,r.Wm)(L,{cols:"6",class:"text-right"},{default:(0,r.w5)((function(){return["30"!=t.items.conversionState?((0,r.wg)(),(0,r.j4)(O,{key:0,onClick:function(e){return S.detailClick(t)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("关闭")]})),_:2},1032,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params"])])])}var b=n(50124),S=n(48534),C=(n(57327),n(41539),n(21249),n(73210),n(57658),n(76496)),W=n(88575),F=n(73378),O=n(37184),Z=n(20868),L=n(2243),I=n(57265),z={components:{AppBarPage:C.Z,ScanBarComponents:F.Z,SelectComponents:L.Z,UploaderImageComponents:I.Z,TableComponents:W.Z},data:function(){return{ttPpOrderSnId:"",measures:"",measuresSelectOption:[]}},created:function(){this.measuresHTTP(),this.initHandle()},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,Z.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},initHandle:function(){var t=this,e=this.$route.query,n=e.ttPpOrderSnId,r=e.sn;n&&(this.ttPpOrderSnId=n,this.$nextTick((function(){t.$refs.ScanBar&&t.$refs.ScanBar.setInputText(r)})))},measuresHTTP:function(){var t=arguments,e=this;return(0,S.Z)((0,b.Z)().mark((function n(){var r,i,a,o,u;return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",e.bufferRow,n.next=4,(0,O.i)({url:"/iiot/nodeLevel/listNodeLevelForSelect",method:"get",url_params:{noOrName:r,templateLevelNodeNo:"uloc",status:"1"}});case 4:i=n.sent,a=i.code,o=i.data,u=void 0===o?[]:o,200==a&&(e.measuresSelectOption=u.map((function(t){return Object.assign({text:t.nodeLevelNo+t.nodeLevelName,value:t.tmBasNodeLevelId})})));case 9:case"end":return n.stop()}}),n)})))()},measuresSelectSearchChange:function(t){this.measuresHTTP(t)},barSearchClick:function(){var t=arguments,e=this;return(0,S.Z)((0,b.Z)().mark((function n(){var r,i,a,o,u,s,l;return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",i=r.trim(),n.next=4,(0,O.i)({url:"/iiot/qmTask/listQmTaskSnForSelect",method:"get",url_params:{sn:i}});case 4:if(a=n.sent,o=a.code,u=a.data,s=void 0===u?[]:u,200!=o){n.next=15;break}if(s.length){n.next=12;break}return(0,Z.LJ)("SN号不存在！"),n.abrupt("return");case 12:e.ttPpOrderSnId=null===(l=s[0])||void 0===l?void 0:l.ttPpOrderSnId,(0,Z.XA)("扫描成功！"),e.$nextTick((function(){e.$refs.table1.initFunc(1)}));case 15:case"end":return n.stop()}}),n)})))()},searchFunc:function(){this.$refs.table1.initFunc(1)},addFunc:function(){},detailClick:function(t){var e=this;return(0,S.Z)((0,b.Z)().mark((function n(){var r;return(0,b.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,e.$router.push({path:"/anomalyInitiateSection/close",query:{ttQmAbnormalConversionId:r.ttQmAbnormalConversionId}});case 2:case"end":return n.stop()}}),n)})))()},resetFunc:function(){var t=this;this.ttPpOrderSnId="",this.$refs.ScanBar&&this.$refs.ScanBar.setInputText(""),this.$refs.select11&&this.$refs.select11.reset(),this.$nextTick((function(){t.$refs.table1.initFunc(1)}))},dischargedClick:function(t){var e=t.items;this.$router.push({path:"/anomalyInitiateSection/discharged",query:{ttQmAbnormalConversionId:e.ttQmAbnormalConversionId}})}}},N=n(40089);const $=(0,N.Z)(z,[["render",y]]);var B=$}}]);
//# sourceMappingURL=chunk.9705.1689576359115.js.map