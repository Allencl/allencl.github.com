"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[6732],{89337:function(e,t,n){n.d(t,{$w:function(){return p},AT:function(){return c},NM:function(){return l},ew:function(){return s},jt:function(){return o},vU:function(){return u}});var r=n(50124),i=n(48534),a=n(37184),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:t.payload});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},5878:function(e,t,n){n.d(t,{b:function(){return i}});var r=n(66347),i=(n(57658),function(e,t,n,i){var a,o={id:t||"id",parentId:n||"parentId",childrenList:i||"children"},c={},u={},s=[],l=(0,r.Z)(e);try{for(l.s();!(a=l.n()).done;){var p=a.value,f=p[o.parentId];null==c[f]&&(c[f]=[]),u[p[o.id]]=p,c[f].push(p)}}catch(y){l.e(y)}finally{l.f()}var d,h=(0,r.Z)(e);try{for(h.s();!(d=h.n()).done;){var m=d.value,v=m[o.parentId];null==u[v]&&s.push(m)}}catch(y){h.e(y)}finally{h.f()}for(var w=0,g=s;w<g.length;w++){var k=g[w];x(k)}function x(e){if(null!==c[e[o.id]]&&(e[o.childrenList]=c[e[o.id]]),e[o.childrenList]){var t,n=(0,r.Z)(e[o.childrenList]);try{for(n.s();!(t=n.n()).done;){var i=t.value;x(i)}}catch(y){n.e(y)}finally{n.f()}}}return s})},88575:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(73396),i=n(87139),a={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,r._)("span",null,"第",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},u=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),s=(0,r._)("span",null,"共",-1),l={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),f=(0,r._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,r._)("span",null,"条",-1),m={style:{position:"relative",top:"1px","margin-left":"0px"}},v={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(e,t,n,w,g,k){var x=(0,r.up)("v-icon"),y=(0,r.up)("v-btn"),b=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[e.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(b,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:k.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:k.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",a,[o,(0,r._)("span",c,(0,i.zw)(e.current),1),u,s,(0,r._)("span",l,(0,i.zw)(e.page),1),p,f,(0,r._)("span",d,(0,i.zw)(e.totalNum),1),h]),(0,r._)("span",m,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(y,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:k.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(y,{onClick:k.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),e.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.items,(function(t,n){return(0,r.WI)(e.$slots,"tableBody",{key:n,items:t,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",v,[(0,r.Wm)(x,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var g=n(50124),k=n(95082),x=n(48534),y=(n(21249),n(37184)),b=n(20868),C={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var e=this.auto,t=this.url;e&&t&&this.initFunc()},methods:{previousHandle:function(){var e=this,t=this.current;1!=t?(this.current=t-1,this.$nextTick((function(){e.initFunc(e.current)}))):(0,b.LJ)("第一页！")},nextHandle:function(){var e=this,t=this.current,n=this.page;t>=n?(0,b.LJ)("最后一页！"):(this.current=t+1,this.$nextTick((function(){e.initFunc(e.current)})))},initFunc:function(){var e=arguments,t=this;return(0,x.Z)((0,g.Z)().mark((function n(){var r,i,a,o,c,u,s,l,p,f,d,h,m,v,w,x;return(0,g.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:1,i=e.length>1?e[1]:void 0,a=t.url,o=t.params,c=void 0===o?{}:o,u=t.children,s=t.method,l=t.formatData,!u){n.next=7;break}return t.items=u,t.paging=!1,n.abrupt("return");case 7:return p=(0,k.Z)((0,k.Z)({pageNum:r,pageSize:10},c),i),n.next=10,(0,y.i)({method:s,url:a,payload:"post"==s?p:{},url_params:"get"==s?p:{}});case 10:f=n.sent,d=f.code,h=f.total,m=void 0===h?0:h,v=f.msg,void 0===v?"":v,w=f.data,x=f.rows,200==d&&(t.totalNum=m,t.current=r,t.page=Math.ceil(m/p.pageSize),t.items=l?l(w||x||[]):w||x||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var e=this.refreshFunc;!e&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(e){return Object.assign(e,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},_=n(40089);const T=(0,_.Z)(C,[["render",w]]);var S=T},11445:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(95082),i=n(73396),a=n(87139),o=(0,i._)("br",null,null,-1),c=(0,i._)("span",{class:"font-weight-medium"},"点检设备",-1),u={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},s={class:"text-truncate font-weight-light"},l=(0,i._)("span",{class:"font-weight-medium text"},"单据编号: ",-1),p={class:"text-teal-lighten-1"},f={class:"text-truncate font-weight-light"},d=(0,i._)("span",{class:"font-weight-medium text"},"点检类型: ",-1),h={class:"text-truncate font-weight-light"},m=(0,i._)("span",{class:"font-weight-medium text"},"设备类型: ",-1),v={class:"text-truncate font-weight-light"},w=(0,i._)("span",{class:"font-weight-medium text"},"申请时间: ",-1),g={key:0,class:"hide-select-equipment-input"};function k(e,t,n,k,x,y){var b=(0,i.up)("AppBarPage"),C=(0,i.up)("v-btn"),_=(0,i.up)("ScanBarComponents"),T=(0,i.up)("SelectComponents"),S=(0,i.up)("van-field"),Z=(0,i.up)("van-cascader"),$=(0,i.up)("van-popup"),I=(0,i.up)("van-checkbox"),F=(0,i.up)("v-badge"),W=(0,i.up)("v-col"),B=(0,i.up)("v-row"),H=(0,i.up)("v-card"),q=(0,i.up)("TableComponents"),N=(0,i.up)("v-window-item"),O=(0,i.up)("v-window"),L=(0,i.up)("SearchPage1"),D=(0,i.up)("SearchPage2");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(b),(0,i.Wm)(C,{style:{width:"58px",height:"58px",position:"fixed",top:"286px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"primary",onClick:y.searchFunc},{default:(0,i.w5)((function(){return[(0,i.Uk)("查询")]})),_:1},8,["onClick"]),(0,i.Wm)(C,{style:{width:"58px",height:"58px",position:"fixed",top:"352px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"warning",onClick:y.restFunc},{default:(0,i.w5)((function(){return[(0,i.Uk)("重置")]})),_:1},8,["onClick"]),(0,i.Wm)(C,{style:{width:"58px",height:"58px",position:"fixed",top:"418px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"secondary",onClick:y.selectAllFunc},{default:(0,i.w5)((function(){return[(0,i.Uk)("全选")]})),_:1},8,["onClick"]),(0,i.Wm)(C,{style:{width:"58px",height:"58px",position:"fixed",top:"483px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"warning",onClick:y.sumitFunc},{default:(0,i.w5)((function(){return[(0,i.Uk)("提交"),o,(0,i.Uk)("点检")]})),_:1},8,["onClick"]),(0,i.Wm)(_,{ref:"scanBar1",placeholder:"扫描或输入 区域码",onSearchClick:y.barSearchClick},null,8,["onSearchClick"]),(0,i.Wm)(T,{modelValue:e.process,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.process=t}),ref:"select123",label:"设备类型",option:e.processSelectOption,onOnChange:y.processOnChange},null,8,["modelValue","option","onOnChange"]),(0,i.Wm)(S,{modelValue:e.fieldValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.fieldValue=t}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",autosize:{maxHeight:100,minHeight:32},onClick:t[2]||(t[2]=function(t){return e.show=!0})},null,8,["modelValue"]),(0,i.Wm)($,{show:e.show,"onUpdate:show":t[6]||(t[6]=function(t){return e.show=t}),round:"",position:"bottom"},{default:(0,i.w5)((function(){return[(0,i.Wm)(C,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:t[3]||(t[3]=function(){return e.show=!1})},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 确定 ")]})),_:1}),e.hideFactory?((0,i.wg)(),(0,i.j4)(Z,{key:0,modelValue:e.factoryID,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.factoryID=t}),title:"请选择工厂节点",options:e.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:t[5]||(t[5]=function(t){return e.show=!1}),onChange:y.onFinish},null,8,["modelValue","options","onChange"])):(0,i.kq)("",!0)]})),_:1},8,["show"]),(0,i.Wm)(O,{modelValue:e.tab,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.tab=t})},{default:(0,i.w5)((function(){return[(0,i.Wm)(N,{value:"1",class:"v-window-item-table"},{default:(0,i.w5)((function(){return["1"==e.tab?((0,i.wg)(),(0,i.j4)(q,{key:0,ref:"table1",url:"/iiot/checkTask/list",showSearchBtn:!1,params:(0,r.Z)({pageSize:e.pageSize,params:{typeList:["dj"]},tmBasNodeLevelId:e.factoryID,typeList:["N","C"],tmBasEquipmentTypeId:e.process,tmBasEquipments:e.tmBasEquipments},e.pageSearchConfig1),method:"post",refreshFunc:"",onSearchClick:y.searchClick1,onRefresh:y.refreshTable},{tableBody:(0,i.w5)((function(e){return[(0,i.Wm)(H,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(B,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{modelValue:e.items._checked,"onUpdate:modelValue":function(t){return e.items._checked=t},"checked-color":"#4CAF50",shape:"square",style:{position:"relative",top:"4px",display:"inline-block","margin-right":"12px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Wm)(F,{content:e._index+1,color:"primary",inline:""},null,8,["content"]),c]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(B,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",u,(0,a.zw)(e.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(B,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",s,[l,(0,i._)("span",p,(0,a.zw)(e.items.taskNo),1)])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(B,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",f,[d,(0,i.Uk)(" "+(0,a.zw)(y.FormatDictionary("CHECK_TYPE",e.items.taskType)["lable"]),1)])]})),_:2},1024),(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",h,[m,(0,i.Uk)(" "+(0,a.zw)(e.items.equipmentType),1)])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(B,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",v,[w,(0,i.Uk)(" "+(0,a.zw)(e.items.createDate),1)])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(B,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{cols:"6",class:"text-left"},{default:(0,i.w5)((function(){return[(0,i.Wm)(C,{onClick:function(t){return y.experienceEdit(e)},color:"secondary",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("点检")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,i.Wm)(W,{cols:"6",class:"text-center"})]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick","onRefresh"])):(0,i.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"]),(0,i.Wm)(L,{ref:"searchPage1",hideStatus:!1,onResetHandle:y.resetHandle1,onSearchHandle:y.searchHandle1},null,8,["onResetHandle","onSearchHandle"]),(0,i.Wm)(D,{ref:"searchPage2",hideStatus:!1,onResetHandle:y.resetHandle2,onSearchHandle:y.searchHandle2},null,8,["onResetHandle","onSearchHandle"]),e.showSelect?((0,i.wg)(),(0,i.iD)("span",g,[(0,i.Wm)(T,{ref:"selectContent",label:"设备",placeholderSearch:"请输入设备编号",forbidShow:!0,required:"",showSearch:"",selectAll:"",multiple:"",option:e.equipmentSelectOption,onOnSearchChange:y.equipmentSearchChange,onOnChange:y.equipmentConfirm},null,8,["option","onOnSearchChange","onOnChange"])])):(0,i.kq)("",!0)])}var x=n(50124),y=n(48534),b=(n(57327),n(41539),n(21249),n(92222),n(68309),n(69600),n(38862),n(40561),n(57658),n(73210),n(76496)),C=n(88575),_=n(73378),T=n(2243),S=n(89337),Z=n(5878),$=n(37184),I=(0,i._)("div",{style:{height:"36px"}},null,-1),F={style:{"margin-top":"32px"}};function W(e,t,n,r,a,o){var c=(0,i.up)("van-field"),u=(0,i.up)("v-btn"),s=(0,i.up)("van-cascader"),l=(0,i.up)("van-popup"),p=(0,i.up)("v-col"),f=(0,i.up)("v-row");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(l,{show:e.drawer,"onUpdate:show":t[6]||(t[6]=function(t){return e.drawer=t}),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,i.w5)((function(){return[I,(0,i.Wm)(c,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldValue=t}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",onClick:t[1]||(t[1]=function(t){return e.show=!0})},null,8,["modelValue"]),(0,i.Wm)(l,{show:e.show,"onUpdate:show":t[4]||(t[4]=function(t){return e.show=t}),round:"",position:"bottom"},{default:(0,i.w5)((function(){return[(0,i.Wm)(u,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:t[2]||(t[2]=function(){return e.show=!1})},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 确定 ")]})),_:1}),e.hideFactory?((0,i.wg)(),(0,i.j4)(s,{key:0,title:"请选择工厂节点",options:e.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:t[3]||(t[3]=function(t){return e.show=!1}),onChange:o.onFinish},null,8,["options","onChange"])):(0,i.kq)("",!0)]})),_:1},8,["show"]),(0,i._)("div",F,[(0,i.Wm)(f,{"no-gutters":""},{default:(0,i.w5)((function(){return[(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(u,{onClick:t[5]||(t[5]=function(){return e.drawer=!1}),density:"compact",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("关闭")]})),_:1})]})),_:1}),(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(u,{onClick:o.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(u,{onClick:o.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])}var B={components:{SelectComponents:T.Z},emits:["searchHandle","resetHandle"],data:function(){return{hideFactory:!0,drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",type:"",typeSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],i=r.filter((function(e){return t==e.value}))[0]||{};return i},resetClick:function(){var e=this;this.fieldValue="",this.factoryID="",this.hideFactory=!1,this.$nextTick((function(){e.hideFactory=!0})),this.$emit("resetHandle",{})},initFunc:function(){var e=this;return(0,y.Z)((0,x.Z)().mark((function t(){var n,r,i,a;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,S.jt)();case 2:n=t.sent,r=n.data,i=void 0===r?[]:r,a=(0,Z.b)(i,"tmBasNodeLevelId","parentId"),e.options=a;case 7:case"end":return t.stop()}}),t)})))()},getTypeHttp:function(){var e=arguments,t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r,i,a,o,c;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,(0,$.i)({url:"/iiot/abnormalType/listAbnormalTypeForSelect",method:"get",url_params:{abnormalNo:r}});case 3:i=n.sent,a=i.code,o=i.data,c=void 0===o?[]:o,200==a&&(t.typeSelectOption=c.map((function(e){return Object.assign({text:"".concat(e.abnormalNo).concat(e.abnormalName),value:e.tmBasAbnormalTypeId})})));case 8:case"end":return n.stop()}}),n)})))()},onFinish:function(e){var t=e.selectedOptions;if(t.length){var n=(t[t.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=t.map((function(e){return e.nodeLevelName})).join("/")}},searchClick:function(){var e=this.factoryID,t=(this.type,this.property,this.status,{tmBasNodeLevelId:e});this.$emit("searchHandle",t),this.drawer=!1},showDrawer:function(){this.drawer=!0}},props:{hideStatus:{type:Boolean,default:function(){return!0}}}},H=n(40089);const q=(0,H.Z)(B,[["render",W]]);var N=q,O=n(20868),L=n(69650),D={components:{AppBarPage:b.Z,SearchPage1:N,SearchPage2:N,SelectComponents:T.Z,ScanBarComponents:_.Z,TableComponents:C.Z},data:function(){return{pageSize:10,hideFactory:!0,drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",tab:"1",process:"",processSelectOption:[],bufferTree:[],pageSearchConfig1:{},pageSearchConfig2:{},tmBasEquipments:[],showSelect:!0,tmBasNodeLevelId:"",equipment:"",equipmentSelectOption:[],equipmentSelectOptionData:[]}},created:function(){var e=this;this.initFunc(),this.factoryTreeHTTP(),this.refreshTable();var t=this.$root.$emitter;t.on("update_examineHistory_page",(function(){e.initFunc(),e.factoryTreeHTTP(),e.refreshTable()}))},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],i=r.filter((function(e){return t==e.value}))[0]||{};return i},initFunc:function(){var e=this;return(0,y.Z)((0,x.Z)().mark((function t(){var n,r,i,a,o;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query.tabs,JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t.next=4,(0,S.jt)();case 4:r=t.sent,i=r.data,a=void 0===i?[]:i,o=(0,Z.b)(a,"tmBasNodeLevelId","parentId"),e.options=o,n&&(e.tab=n);case 10:case"end":return t.stop()}}),t)})))()},getContentHttp:function(){var e=this;return(0,y.Z)((0,x.Z)().mark((function t(){var n,r,i,a;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,$.i)({url:"/iiot/equipmentType/list",method:"get",url_params:{}});case 2:n=t.sent,r=n.code,i=n.data,a=void 0===i?[]:i,200==r&&(e.processSelectOption=a.map((function(e){return Object.assign({text:"".concat(e.no).concat(e.name),value:e.tmBasEquipmentTypeId})})),e.$nextTick((function(){var t=localStorage.getItem("examineHistory_index_buffer_equipment_value")||"";t&&(e.process=t,e.$refs.select123&&e.$refs.select123.setValue(t),e.$nextTick((function(){setTimeout((function(){e.$refs.table1.initFunc(1)}),1e3)})))})));case 7:case"end":return t.stop()}}),t)})))()},onFinish:function(e){var t=this,n=e.selectedOptions;if(n.length){var r=(n[n.length-1]||{})["tmBasNodeLevelId"];this.factoryID=r,this.fieldValue=n.map((function(e){return e.nodeLevelName})).join("/"),this.$nextTick((function(){var e={id:r,text:t.fieldValue};localStorage.setItem("examineHistory_index_buffer_nodeLevel_option",JSON.stringify(e))}))}},refreshTable:function(){var e=this;this.$refs["scanBar1"]&&this.$refs["scanBar1"].reset(),this.$refs["scanBar2"]&&this.$refs["scanBar2"].reset(),this.tmBasEquipments=[],this.$nextTick((function(){"1"==e.tab&&e.$refs.table1.initFunc(1,{}),"2"==e.tab&&e.$refs.table2.initFunc(1,{})}))},equipmentSearchChange:function(){var e=arguments,t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:"",t.equipmentHTTP(r);case 2:case"end":return n.stop()}}),n)})))()},equipmentHTTP:function(){var e=arguments,t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r,i,a,o,c,u;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",i=t.tmBasNodeLevelId,n.next=4,(0,$.i)({url:"/iiot/equipment/list",method:"get",url_params:{tmBasNodeLevelId:i,equipmentNo:r}});case 4:a=n.sent,o=a.code,c=a.data,u=void 0===c?[]:c,200==o&&(t.equipmentSelectOptionData=u,t.equipmentSelectOption=u.map((function(e){return Object.assign({text:"".concat(e.equipmentNo,"-").concat(e.equipmentName),value:e.tmBasEquipmentId})})).splice(0,100));case 9:case"end":return n.stop()}}),n)})))()},equipmentConfirm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.tmBasEquipments=t?t.split(","):[],this.$nextTick((function(){"1"==e.tab&&e.$refs.table1.initFunc(1,{}),"2"==e.tab&&e.$refs.table2.initFunc(1,{})}))},factoryTreeHTTP:function(){var e=this;return(0,y.Z)((0,x.Z)().mark((function t(){var n,r,i;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getContentHttp();case 2:return t.next=4,(0,S.jt)();case 4:n=t.sent,r=n.data,i=void 0===r?[]:r,e.bufferTree=i,e.$nextTick((function(){var t=JSON.parse(localStorage.getItem("examineHistory_index_buffer_nodeLevel_option")||"{}");t.id&&(e.hideFactory=!1,e.factoryID=t.id,e.$nextTick((function(){e.hideFactory=!0,e.fieldValue=t.text,e.$nextTick((function(){setTimeout((function(){e.$refs.table1.initFunc(1)}),1e3)}))})))}));case 9:case"end":return t.stop()}}),t)})))()},experienceEditTo:function(e){var t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r,i,a;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.items,n.next=3,(0,$.i)({url:"/iiot/checkTask/checkTask",method:"post",payload:{ttCheckTaskId:r.ttCheckTaskId}});case 3:i=n.sent,a=i.code,200==a&&((0,O.XA)("提交成功！"),t.tab="1",t.$nextTick((function(){t.$refs.table1.initFunc()})));case 6:case"end":return n.stop()}}),n)})))()},experienceEdit:function(e){var t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.items,t.$router.push({path:"/examineHistory/detail",query:{ttCheckTaskId:r.ttCheckTaskId,row:JSON.stringify(r)}}),setTimeout((function(){t.$root.$emitter.emit("update_examineHistory_page_index")}),1e3);case 3:case"end":return n.stop()}}),n)})))()},processOnChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";localStorage.setItem("examineHistory_index_buffer_equipment_value",e)},cancelHandle:function(e){var t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.items,(0,L.vC)({title:"取消确认",message:"取消后数据不可恢复，确认取消！",theme:"round-button",closeOnClickOverlay:!0}).then((0,y.Z)((0,x.Z)().mark((function e(){var n,i;return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,$.i)({url:"/iiot/checkTask",method:"PUT",payload:{ttCheckTaskId:r.ttCheckTaskId,taskState:"N"}});case 2:n=e.sent,i=n.code,200==i&&((0,O.XA)("提交成功！"),t.tab="1",t.$nextTick((function(){t.$refs.table1.initFunc()})));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return n.stop()}}),n)})))()},barSearchClick:function(){var e=arguments,t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r,i,a;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",i=r.trim(),a=t.bufferTree.filter((function(e){return e.nodeLevelNo==i}))[0]||{},a.tmBasNodeLevelId){n.next=6;break}return(0,O.LJ)("无工厂节点！"),n.abrupt("return");case 6:t.showSelect=!1,t.tmBasNodeLevelId=a.tmBasNodeLevelId,t.$nextTick((0,y.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSelect=!0,e.next=3,t.equipmentHTTP("");case 3:t.$nextTick((function(){t.$refs.selectContent.showModle()}));case 4:case"end":return e.stop()}}),e)}))));case 9:case"end":return n.stop()}}),n)})))()},barSearchClick2:function(){var e=arguments,t=this;return(0,y.Z)((0,x.Z)().mark((function n(){var r,i,a;return(0,x.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",i=r.trim(),a=t.bufferTree.filter((function(e){return e.nodeLevelNo==i}))[0]||{},a.tmBasNodeLevelId){n.next=6;break}return(0,O.LJ)("无工厂节点！"),n.abrupt("return");case 6:t.showSelect=!1,t.tmBasNodeLevelId=a.tmBasNodeLevelId,t.$nextTick((0,y.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSelect=!0,e.next=3,t.equipmentHTTP("");case 3:t.$nextTick((function(){t.$refs.selectContent.showModle()}));case 4:case"end":return e.stop()}}),e)}))));case 9:case"end":return n.stop()}}),n)})))()},searchClick1:function(){this.$refs.searchPage1.showDrawer()},searchHandle1:function(e){var t=this;this.pageSearchConfig1=e,this.$nextTick((function(){t.$refs.table1.initFunc(1)}))},resetHandle1:function(e){var t=this;this.pageSearchConfig1={},this.$nextTick((function(){t.$refs.table1.initFunc(1)}))},searchClick2:function(){this.$refs.searchPage2.showDrawer()},searchHandle2:function(e){var t=this;this.pageSearchConfig2=e,this.$nextTick((function(){t.$refs.table2.initFunc(1)}))},resetHandle2:function(e){var t=this;this.pageSearchConfig2={},this.$nextTick((function(){t.$refs.table2.initFunc(1)}))},selectAllFunc:function(){this.$refs.table1.selectAll()},sumitFunc:function(){var e=this;return(0,y.Z)((0,x.Z)().mark((function t(){var n,r,i,a,o,c,u,s;return(0,x.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.table1.resultData().filter((function(e){return e._checked})),r.length){t.next=4;break}return(0,O.LJ)("未选择数据！"),t.abrupt("return");case 4:return t.next=6,(0,$.i)({url:"/iiot/checkTask/checkTask",method:"post",payload:{ttCheckTaskId:null===(n=r[0])||void 0===n?void 0:n.ttCheckTaskId}});case 6:if(i=t.sent,a=i.code,o=i.data,c=void 0===o?[]:o,200!=a){t.next=16;break}return u={checkTaskRecords:c.map((function(e){return Object.assign({checkResult:e.checkResult||"",checkResultContent:e.checkResultContent||"",inspectValue:e.inspectValue||"",judgmentResult:e.judgmentResult||"",ttCheckTaskId:e.ttCheckTaskId||"",ttCheckTaskRecordId:e.ttCheckTaskRecordId||"",ttCheckTaskIds:r.map((function(e){return e.ttCheckTaskId}))})}))},t.next=14,(0,$.i)({url:"/iiot/checkTaskRecord/submitCheckTaskRecords",method:"post",payload:u});case 14:s=t.sent,200==s.code&&((0,O.XA)("提交成功！"),e.$refs.table1.initFunc(1));case 16:case"end":return t.stop()}}),t)})))()},restFunc:function(){var e=this;this.fieldValue="",this.factoryID="",this.process="",this.pageSize=10,this.hideFactory=!1,this.$nextTick((function(){e.hideFactory=!0,e.$refs.select123&&e.$refs.select123.reset(),e.$refs.table1.initFunc(1)}))},searchFunc:function(){var e=this;this.pageSize=50,this.$nextTick((function(){e.$refs.table1.initFunc(1)}))}}};const V=(0,H.Z)(D,[["render",k]]);var U=V},69650:function(e,t,n){n.d(t,{vC:function(){return p}});n(41539);var r,i=n(73396),a=n(12220),o=n(57548),c=n(21178),u={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},s=(0,a.l7)({},u);function l(){var e={setup:function(){var e=(0,o.o)(),t=e.state,n=e.toggle;return function(){return(0,i.Wm)(c.Z,(0,i.dG)(t,{"onUpdate:show":n}),null)}}},t=(0,o.H)(e);r=t.instance}function p(e){return a._f?new Promise((function(t,n){r||l(),r.open((0,a.l7)({},s,e,{callback:function(e){("confirm"===e?t:n)(e)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.6732.1689576086920.js.map