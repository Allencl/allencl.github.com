"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4275],{21472:function(t,e,n){n.d(e,{Oh:function(){return o},_w:function(){return u}});var r=n(50124),i=n(48534),a=n(37184),u=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/responseWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepairHistory",method:"get",url_RESTful:e.url_RESTful});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},89337:function(t,e,n){n.d(e,{$w:function(){return p},AT:function(){return o},NM:function(){return s},ew:function(){return l},jt:function(){return u},vU:function(){return c}});var r=n(50124),i=n(48534),a=n(37184),u=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5878:function(t,e,n){n.d(e,{b:function(){return i}});var r=n(66347),i=(n(57658),function(t,e,n,i){var a,u={id:e||"id",parentId:n||"parentId",childrenList:i||"children"},o={},c={},l=[],s=(0,r.Z)(t);try{for(s.s();!(a=s.n()).done;){var p=a.value,f=p[u.parentId];null==o[f]&&(o[f]=[]),c[p[u.id]]=p,o[f].push(p)}}catch(y){s.e(y)}finally{s.f()}var d,m=(0,r.Z)(t);try{for(m.s();!(d=m.n()).done;){var h=d.value,w=h[u.parentId];null==c[w]&&l.push(h)}}catch(y){m.e(y)}finally{m.f()}for(var g=0,v=l;g<v.length;g++){var x=v[g];_(x)}function _(t){if(null!==o[t[u.id]]&&(t[u.childrenList]=o[t[u.id]]),t[u.childrenList]){var e,n=(0,r.Z)(t[u.childrenList]);try{for(n.s();!(e=n.n()).done;){var i=e.value;_(i)}}catch(y){n.e(y)}finally{n.f()}}}return l})},88575:function(t,e,n){n.d(e,{Z:function(){return Z}});var r=n(73396),i=n(87139),a={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},u=(0,r._)("span",null,"第",-1),o={style:{"padding-left":"1px","padding-right":"1px"}},c=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),l=(0,r._)("span",null,"共",-1),s={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),f=(0,r._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(t,e,n,g,v,x){var _=(0,r.up)("v-icon"),y=(0,r.up)("v-btn"),k=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[t.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(k,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:x.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:x.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",a,[u,(0,r._)("span",o,(0,i.zw)(t.current),1),c,l,(0,r._)("span",s,(0,i.zw)(t.page),1),p,f,(0,r._)("span",d,(0,i.zw)(t.totalNum),1),m]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(y,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:x.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(y,{onClick:x.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),t.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(t.items,(function(e,n){return(0,r.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",w,[(0,r.Wm)(_,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var v=n(50124),x=n(95082),_=n(48534),y=(n(21249),n(37184)),k=n(20868),b={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,k.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,k.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,_.Z)((0,v.Z)().mark((function n(){var r,i,a,u,o,c,l,s,p,f,d,m,h,w,g,_;return(0,v.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:1,i=t.length>1?t[1]:void 0,a=e.url,u=e.params,o=void 0===u?{}:u,c=e.children,l=e.method,s=e.formatData,!c){n.next=7;break}return e.items=c,e.paging=!1,n.abrupt("return");case 7:return p=(0,x.Z)((0,x.Z)({pageNum:r,pageSize:10},o),i),n.next=10,(0,y.i)({method:l,url:a,payload:"post"==l?p:{},url_params:"get"==l?p:{}});case 10:f=n.sent,d=f.code,m=f.total,h=void 0===m?0:m,w=f.msg,void 0===w?"":w,g=f.data,_=f.rows,200==d&&(e.totalNum=h,e.current=r,e.page=Math.ceil(h/p.pageSize),e.items=s?s(g||_||[]):g||_||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},W=n(40089);const C=(0,W.Z)(b,[["render",g]]);var Z=C},24275:function(t,e,n){n.r(e),n.d(e,{default:function(){return Y}});var r=n(95082),i=n(73396),a=n(87139),u=(0,i._)("div",{style:{height:"50px"}},null,-1),o=(0,i._)("span",{class:"font-weight-medium"},"维修设备",-1),c={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},l=(0,i._)("p",{class:"font-weight-medium text"},"故障类型:",-1),s={class:"text-truncate font-weight-light"},p=(0,i._)("p",{class:"font-weight-medium text"},"故障位置:",-1),f={class:"text-truncate font-weight-light"},d=(0,i._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),m=["onClick"],h={class:"text-truncate font-weight-medium text"},w={class:"text-truncate font-weight-medium text"},g={class:"text-truncate font-weight-medium text"},v=(0,i._)("span",{class:"font-weight-medium"},"维修设备",-1),x={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},_=(0,i._)("p",{class:"font-weight-medium text"},"故障类型:",-1),y={class:"text-truncate font-weight-light"},k=(0,i._)("p",{class:"font-weight-medium text"},"故障位置:",-1),b={class:"text-truncate font-weight-light"},W=(0,i._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),C=["onClick"],Z={class:"text-truncate font-weight-medium text"},S={class:"text-truncate font-weight-medium text"},F={class:"text-truncate font-weight-medium text"},B=(0,i._)("h3",null,"取消确认!",-1),I=(0,i._)("span",{style:{color:"#D84315",display:"block","padding-left":"22px","margin-top":"12px","margin-bottom":"22px"}},"取消后数据不可恢复，确认取消！",-1);function q(t,e,n,q,D,R){var T=(0,i.up)("v-tab"),H=(0,i.up)("v-tabs"),$=(0,i.up)("AppBarPage"),A=(0,i.up)("v-badge"),U=(0,i.up)("v-col"),z=(0,i.up)("v-row"),N=(0,i.up)("v-btn"),P=(0,i.up)("v-card"),O=(0,i.up)("TableComponents"),V=(0,i.up)("v-window-item"),L=(0,i.up)("v-window"),j=(0,i.up)("SearchPage1"),E=(0,i.up)("SearchPage2"),M=(0,i.up)("van-field"),J=(0,i.up)("van-popup");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)($,null,{appTabs:(0,i.w5)((function(){return[(0,i.Wm)(H,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.tab=e}),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,i.w5)((function(){return[(0,i.Wm)(T,{value:"1","hide-slider":""},{default:(0,i.w5)((function(){return[(0,i.Uk)("当前维修任务")]})),_:1}),(0,i.Wm)(T,{value:"2","hide-slider":""},{default:(0,i.w5)((function(){return[(0,i.Uk)("我的维修任务")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),u,(0,i.Wm)(L,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tab=e})},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{value:"1",class:"v-window-item-table"},{default:(0,i.w5)((function(){return["1"==t.tab?((0,i.wg)(),(0,i.j4)(O,{key:0,ref:"table1",showSearchBtn:!0,url:"/iiot/equipmentRepair/list",params:(0,r.Z)({warinState:"WM"},t.pageSearchConfig1),onSearchClick:R.searchClick1},{tableBody:(0,i.w5)((function(t){return[(0,i.Wm)(P,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(z,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"1"},{default:(0,i.w5)((function(){return[(0,i.Wm)(A,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,i.Wm)(U,{cols:"5"},{default:(0,i.w5)((function(){return[o]})),_:1}),(0,i.Wm)(U,{cols:"1"})]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",c,(0,a.zw)(t.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[l]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",s,(0,a.zw)(t.items.faultTypeCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[p]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",f,(0,a.zw)(t.items.faultStationCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[d]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{onClick:function(e){return R.GlobalTooltipFunc("".concat(t.items.problemDesc))},class:"text-truncate font-weight-light"},(0,a.zw)(t.items.problemDesc),9,m)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",h,"维修类型: "+(0,a.zw)(R.FormatDictionary("equipment_repair_type",t.items.reportType)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12",class:"text-left"},{default:(0,i.w5)((function(){return[(0,i._)("p",w,"报修人: "+(0,a.zw)(t.items.reportBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",g,"报修时间: "+(0,a.zw)(t.items.reportTime),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12",class:"text-right"},{default:(0,i.w5)((function(){return[(0,i.Wm)(N,{onClick:function(e){return R.preemptClick(t)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("抢单响应")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick"])):(0,i.kq)("",!0)]})),_:1}),(0,i.Wm)(V,{value:"2",class:"v-window-item-table"},{default:(0,i.w5)((function(){return["2"==t.tab?((0,i.wg)(),(0,i.j4)(O,{key:0,ref:"table2",showSearchBtn:!0,url:"/iiot/equipmentRepair/listForApp",params:(0,r.Z)({},t.pageSearchConfig2),onSearchClick:R.searchClick2},{tableBody:(0,i.w5)((function(t){return[(0,i.Wm)(P,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(z,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"1"},{default:(0,i.w5)((function(){return[(0,i.Wm)(A,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,i.Wm)(U,{cols:"5"},{default:(0,i.w5)((function(){return[v]})),_:1}),(0,i.Wm)(U,{cols:"1"})]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",x,(0,a.zw)(t.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[_]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",y,(0,a.zw)(t.items.faultTypeCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[k]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",b,(0,a.zw)(t.items.faultStationCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4"},{default:(0,i.w5)((function(){return[W]})),_:1}),(0,i.Wm)(U,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{onClick:function(e){return R.GlobalTooltipFunc("".concat(t.items.problemDesc))},class:"text-truncate font-weight-light"},(0,a.zw)(t.items.problemDesc),9,C)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",Z,"维修类型: "+(0,a.zw)(R.FormatDictionary("equipment_repair_type",t.items.reportType)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12",class:"text-left"},{default:(0,i.w5)((function(){return[(0,i._)("p",S,"报修人: "+(0,a.zw)(t.items.reportBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",F,"报修时间: "+(0,a.zw)(t.items.reportTime),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(z,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(N,{onClick:function(e){return R.checkExperience(t)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("查看维修经验")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,i.Wm)(U,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(N,{onClick:function(e){return R.cancelMaintain(t)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("取消维修")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,i.Wm)(U,{cols:"4",class:"text-right"},{default:(0,i.w5)((function(){return[(0,i.Wm)(N,{onClick:function(e){return R.equipmentMaintain(t)},color:"orange mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("设备维修")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick"])):(0,i.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"]),(0,i.Wm)(j,{ref:"searchPage1",hideStatus:!1,onResetHandle:R.resetHandle1,onSearchHandle:R.searchHandle1},null,8,["onResetHandle","onSearchHandle"]),(0,i.Wm)(E,{ref:"searchPage2",hideStatus:!1,onResetHandle:R.resetHandle2,onSearchHandle:R.searchHandle2},null,8,["onResetHandle","onSearchHandle"]),(0,i.Wm)(J,{show:t.showPicker,"onUpdate:show":e[3]||(e[3]=function(e){return t.showPicker=e}),style:{padding:"12px 12px 4px 12px",width:"90%"},round:""},{default:(0,i.w5)((function(){return[B,I,(0,i.Wm)(M,{modelValue:t.reasonCancellation,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.reasonCancellation=e}),required:"",label:"取消原因",placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"]),(0,i.Wm)(N,{style:{"margin-bottom":"28px","margin-top":"18px"},onClick:R.cancelReimbursement,block:"",color:"error",variant:"outlined"},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 取消报修 ")]})),_:1},8,["onClick"])]})),_:1},8,["show"])])}var D=n(50124),R=n(48534),T=(n(57327),n(41539),n(57658),n(73210),n(76496)),H=n(88575),$=n(37184),A=(0,i._)("div",{style:{height:"36px"}},null,-1),U={style:{"margin-top":"32px"}};function z(t,e,n,r,a,u){var o=(0,i.up)("van-field"),c=(0,i.up)("v-btn"),l=(0,i.up)("van-cascader"),s=(0,i.up)("van-popup"),p=(0,i.up)("v-col"),f=(0,i.up)("v-row");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(s,{show:t.drawer,"onUpdate:show":e[6]||(e[6]=function(e){return t.drawer=e}),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,i.w5)((function(){return[A,(0,i.Wm)(o,{modelValue:t.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.fieldValue=e}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",onClick:e[1]||(e[1]=function(e){return t.show=!0})},null,8,["modelValue"]),(0,i.Wm)(s,{show:t.show,"onUpdate:show":e[4]||(e[4]=function(e){return t.show=e}),round:"",position:"bottom"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:e[2]||(e[2]=function(){return t.show=!1})},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 确定 ")]})),_:1}),t.hideFactory?((0,i.wg)(),(0,i.j4)(l,{key:0,title:"请选择工厂节点",options:t.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:e[3]||(e[3]=function(e){return t.show=!1}),onChange:u.onFinish},null,8,["options","onChange"])):(0,i.kq)("",!0)]})),_:1},8,["show"]),(0,i._)("div",U,[(0,i.Wm)(f,{"no-gutters":""},{default:(0,i.w5)((function(){return[(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:e[5]||(e[5]=function(){return t.drawer=!1}),density:"compact",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("关闭")]})),_:1})]})),_:1}),(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:u.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,i.Wm)(p,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:u.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])}n(21249),n(92222),n(69600);var N=n(2243),P=n(89337),O=n(5878),V={components:{SelectComponents:N.Z},emits:["searchHandle","resetHandle"],data:function(){return{hideFactory:!0,drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",type:"",typeSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},resetClick:function(){var t=this;this.fieldValue="",this.factoryID="",this.hideFactory=!1,this.$nextTick((function(){t.hideFactory=!0})),this.$emit("resetHandle",{})},initFunc:function(){var t=this;return(0,R.Z)((0,D.Z)().mark((function e(){var n,r,i,a;return(0,D.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,P.jt)();case 2:n=e.sent,r=n.data,i=void 0===r?[]:r,a=(0,O.b)(i,"tmBasNodeLevelId","parentId"),t.options=a;case 7:case"end":return e.stop()}}),e)})))()},getTypeHttp:function(){var t=arguments,e=this;return(0,R.Z)((0,D.Z)().mark((function n(){var r,i,a,u,o;return(0,D.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",n.next=3,(0,$.i)({url:"/iiot/abnormalType/listAbnormalTypeForSelect",method:"get",url_params:{abnormalNo:r}});case 3:i=n.sent,a=i.code,u=i.data,o=void 0===u?[]:u,200==a&&(e.typeSelectOption=o.map((function(t){return Object.assign({text:"".concat(t.abnormalNo).concat(t.abnormalName),value:t.tmBasAbnormalTypeId})})));case 8:case"end":return n.stop()}}),n)})))()},onFinish:function(t){var e=t.selectedOptions;if(e.length){var n=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=e.map((function(t){return t.nodeLevelName})).join("/")}},searchClick:function(){var t=this.factoryID,e=(this.type,this.property,this.status,{tmBasNodeLevelId:t});this.$emit("searchHandle",e),this.drawer=!1},showDrawer:function(){this.drawer=!0}},props:{hideStatus:{type:Boolean,default:function(){return!0}}}},L=n(40089);const j=(0,L.Z)(V,[["render",z]]);var E=j,M=n(21472),J=n(69650),G=n(20868),X={components:{AppBarPage:T.Z,SearchPage1:E,SearchPage2:E,TableComponents:H.Z},data:function(){return{showPicker:!1,reasonCancellation:"",rowData:{},tab:"1",repairsPersonnel:"",pageSearchConfig1:{},pageSearchConfig2:{}}},created:function(){this.initFunc()},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,G.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},initFunc:function(){var t=this.$route.query.tabs;this.repairsPersonnel=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}")["userName"],t&&(this.tab=t)},preemptClick:function(t){var e=this;return(0,R.Z)((0,D.Z)().mark((function n(){var r,i,a;return(0,D.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.items,n.next=3,(0,M._w)({payload:{tmBasEquipmentId:r.tmBasEquipmentId,teAdRepairId:r.teAdRepairId}});case 3:i=n.sent,a=i.code,200==a&&((0,G.XA)("提交成功！"),e.$refs["table1"].initFunc());case 6:case"end":return n.stop()}}),n)})))()},checkExperience:function(t){var e=this;return(0,R.Z)((0,D.Z)().mark((function n(){var r;return(0,D.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,e.$router.push({path:"/equipment/maintain/experience",query:{state:"1",teAdRepairId:r.teAdRepairId,tmBasEquipmentId:r.tmBasEquipmentId}});case 2:case"end":return n.stop()}}),n)})))()},cancelMaintain:function(t){var e=this;return(0,R.Z)((0,D.Z)().mark((function n(){var r;return(0,D.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,(0,J.vC)({title:"取消确认！",message:"取消后，数据会回到当前维修任务！",theme:"round-button",closeOnClickOverlay:!0}).then((0,R.Z)((0,D.Z)().mark((function t(){var n,i,a;return(0,D.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,$.i)({url:"/iiot/equipmentRepair/cancelRepair",method:"post",payload:{tmBasEquipmentId:r.tmBasEquipmentId,teAdRepairId:r.teAdRepairId}});case 2:n=t.sent,i=n.code,a=n.data,void 0===a?{}:a,200==i&&((0,G.XA)("提交成功！"),e.$refs.table2.initFunc());case 7:case"end":return t.stop()}}),t)}))));case 2:case"end":return n.stop()}}),n)})))()},cancelReimbursement:function(){var t=this;return(0,R.Z)((0,D.Z)().mark((function e(){var n,r,i,a,u,o;return(0,D.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.rowData,r=t.reasonCancellation.trim(),r){e.next=5;break}return(0,G.LJ)("取消原因必填！"),e.abrupt("return");case 5:return i={cancelReason:r,tmBasEquipmentId:n.tmBasEquipmentId,teAdRepairId:n.teAdRepairId},e.next=8,(0,$.i)({url:"/iiot/equipmentRepair/cancelRepairWbForceForApp",method:"post",payload:i});case 8:a=e.sent,u=a.code,o=a.data,void 0===o?{}:o,200==u&&((0,G.XA)("提交成功！"),t.showPicker=!1,t.$refs.table2.initFunc());case 13:case"end":return e.stop()}}),e)})))()},equipmentMaintain:function(t){var e=this;return(0,R.Z)((0,D.Z)().mark((function n(){var r;return(0,D.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,e.$router.push({path:"/equipment/maintain/detail",query:{teAdRepairId:r.teAdRepairId,filePath:r.filePath}}),setTimeout((function(){e.$root.$emitter.emit("update_maintain_page_index")}),1500);case 3:case"end":return n.stop()}}),n)})))()},searchClick1:function(){this.$refs.searchPage1.showDrawer()},searchHandle1:function(t){var e=this;this.pageSearchConfig1=t,this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},resetHandle1:function(t){var e=this;this.pageSearchConfig1={},this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},searchClick2:function(){this.$refs.searchPage2.showDrawer()},searchHandle2:function(t){var e=this;this.pageSearchConfig2=t,this.$nextTick((function(){e.$refs.table2.initFunc(1)}))},resetHandle2:function(t){var e=this;this.pageSearchConfig2={},this.$nextTick((function(){e.$refs.table2.initFunc(1)}))}}};const K=(0,L.Z)(X,[["render",q]]);var Y=K},69650:function(t,e,n){n.d(e,{vC:function(){return p}});n(41539);var r,i=n(73396),a=n(12220),u=n(57548),o=n(21178),c={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},l=(0,a.l7)({},c);function s(){var t={setup:function(){var t=(0,u.o)(),e=t.state,n=t.toggle;return function(){return(0,i.Wm)(o.Z,(0,i.dG)(e,{"onUpdate:show":n}),null)}}},e=(0,u.H)(t);r=e.instance}function p(t){return a._f?new Promise((function(e,n){r||s(),r.open((0,a.l7)({},l,t,{callback:function(t){("confirm"===t?e:n)(t)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.4275.1689579697743.js.map