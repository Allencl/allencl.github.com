"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4015],{14614:function(t,e,n){n.d(e,{m:function(){return a}});var i=n(50124),r=n(48534),u=n(37184),a=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,u.i)({url:"/iiot/equipmentRepair/proConfirmWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},88575:function(t,e,n){n.d(e,{Z:function(){return F}});var i=n(73396),r=n(87139),u={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},a=(0,i._)("span",null,"第",-1),o={style:{"padding-left":"1px","padding-right":"1px"}},l=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,i._)("span",null,"共",-1),s={style:{"padding-left":"1px","padding-right":"1px"}},f=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),p=(0,i._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},d=(0,i._)("span",null,"条",-1),g={style:{position:"relative",top:"1px","margin-left":"0px"}},h={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(t,e,n,w,_,x){var v=(0,i.up)("v-icon"),y=(0,i.up)("v-btn"),k=(0,i.up)("v-card");return(0,i.wg)(),(0,i.iD)("span",null,[t.paging&&n.pagingShow?((0,i.wg)(),(0,i.j4)(k,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,i.w5)((function(){return[(0,i.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:x.previousHandle},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{size:"28"},{default:(0,i.w5)((function(){return[(0,i.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,i.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:x.nextHandle},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{size:"28"},{default:(0,i.w5)((function(){return[(0,i.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,i._)("span",u,[a,(0,i._)("span",o,(0,r.zw)(t.current),1),l,c,(0,i._)("span",s,(0,r.zw)(t.page),1),f,p,(0,i._)("span",m,(0,r.zw)(t.totalNum),1),d]),(0,i._)("span",g,[n.showSearchBtn?((0,i.wg)(),(0,i.j4)(y,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:x.searchClick,variant:"plain",color:"primary"},{default:(0,i.w5)((function(){return[(0,i.Wm)(v,{size:"24",icon:"mdi-magnify"}),(0,i.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(y,{onClick:x.refreshClick,style:(0,r.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,i.kq)("",!0),t.items.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(t.items,(function(e,n){return(0,i.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,i.wg)(),(0,i.iD)("p",h,[(0,i.Wm)(v,{icon:"mdi-emoticon-sad-outline"}),(0,i.Uk)(" 无数据！ ")]))])}var _=n(50124),x=n(95082),v=n(48534),y=(n(21249),n(37184)),k=n(20868),W={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,k.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,k.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,v.Z)((0,_.Z)().mark((function n(){var i,r,u,a,o,l,c,s,f,p,m,d,g,h,w,v;return(0,_.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:1,r=t.length>1?t[1]:void 0,u=e.url,a=e.params,o=void 0===a?{}:a,l=e.children,c=e.method,s=e.formatData,!l){n.next=7;break}return e.items=l,e.paging=!1,n.abrupt("return");case 7:return f=(0,x.Z)((0,x.Z)({pageNum:i,pageSize:10},o),r),n.next=10,(0,y.i)({method:c,url:u,payload:"post"==c?f:{},url_params:"get"==c?f:{}});case 10:p=n.sent,m=p.code,d=p.total,g=void 0===d?0:d,h=p.msg,void 0===h?"":h,w=p.data,v=p.rows,200==m&&(e.totalNum=g,e.current=i,e.page=Math.ceil(g/f.pageSize),e.items=s?s(w||v||[]):w||v||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},b=n(40089);const C=(0,b.Z)(W,[["render",w]]);var F=C},57265:function(t,e,n){n.d(e,{Z:function(){return _}});var i=n(73396),r={style:{padding:"0px 12px 0px 12px"}},u={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},a={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},o={class:"custem-iamge-upload"},l=["src"];function c(t,e,n,c,s,f){var p=(0,i.up)("van-uploader"),m=(0,i.up)("v-icon");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i._)("div",r,[n.preview?((0,i.wg)(),(0,i.iD)("p",u,"图片预览 ")):((0,i.wg)(),(0,i.iD)("p",a," 图片上传 ")),n.preview?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(p,{key:2,"after-read":f.afterRead,"preview-image":!1},null,8,["after-read"])),(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.bufferFileList,(function(r,u){return(0,i.wg)(),(0,i.iD)("li",{key:u,onClick:e[0]||(e[0]=function(e){return f.checkImage(t.bufferFileList)})},[(0,i._)("img",{src:r.url},null,8,l),n.preview?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(m,{key:0,onClick:function(t){return f.removeClick(r,t)},class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])})),128))])])])}var s=n(50124),f=n(48534),p=(n(21249),n(26699),n(32023),n(92222),n(38862),n(57327),n(41539),n(37184)),m=n(20868),d=n(9801),g={components:{},emits:["update:modelValue","onChange"],data:function(){return{bufferFileList:[]}},watch:{modelValue:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.bufferFileList=t},deep:!0,immediate:!0},initPath:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t&&(this.bufferFileList=t.split(",").map((function(t){return Object.assign({url:t})})))},deep:!0,immediate:!0}},methods:{checkImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&(0,d.V)(t.map((function(t){return t.url})))},afterRead:function(t){var e=this;return(0,f.Z)((0,s.Z)().mark((function n(){var i,r,u,a,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.file.type.includes("image")){n.next=3;break}return(0,m.LJ)("只能选择图片！"),n.abrupt("return");case 3:if(!(t.file.size>=19922944)){n.next=6;break}return(0,m.LJ)("图片超过20M！"),n.abrupt("return");case 6:if(!(e.bufferFileList.length>2)){n.next=9;break}return(0,m.LJ)("最多只能选择3张图片！"),n.abrupt("return");case 9:return i=new FormData,i.append("file",t.file),n.next=13,(0,p.i)({url:"/file/upload",method:"post",formData:!0,payload:i});case 13:r=n.sent,u=r.code,a=r.data,o=void 0===a?{}:a,200==u?(e.bufferFileList=e.bufferFileList.concat([o]),(0,m.XA)("图片上传成功！"),e.$emit("update:modelValue",JSON.parse(JSON.stringify(e.bufferFileList)))):(0,m.LJ)("图片上传失败！");case 18:case"end":return n.stop()}}),n)})))()},removeClick:function(t,e){var n=this;e.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((function(e){return e.url!=t.url})),this.$nextTick((function(){n.$emit("update:modelValue",JSON.parse(JSON.stringify(n.bufferFileList)))}))}},props:{modelValue:{type:Array,default:function(){return[]}},initPath:{type:String,default:function(){return""}},preview:{type:Boolean,default:function(){return!1}}}},h=n(40089);const w=(0,h.Z)(g,[["render",c]]);var _=w},74015:function(t,e,n){n.r(e),n.d(e,{default:function(){return $}});var i=n(73396),r=n(87139),u={class:"v-window-item-table"},a=(0,i._)("span",{class:"font-weight-medium"},"维修设备",-1),o={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},l=(0,i._)("p",{class:"font-weight-medium text"},"故障类型:",-1),c={class:"text-truncate font-weight-light"},s=(0,i._)("p",{class:"font-weight-medium text"},"故障位置:",-1),f={class:"text-truncate font-weight-light"},p=(0,i._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),m=["onClick"],d=(0,i._)("p",{class:"font-weight-medium text"},"维修类型:",-1),g={class:"text-truncate font-weight-light"},h=(0,i._)("p",{class:"font-weight-medium text"},"是否外修:",-1),w={class:"text-truncate font-weight-light"},_=(0,i._)("p",{class:"font-weight-medium text"},"是否报废:",-1),x={class:"text-truncate font-weight-light"},v={key:0},y=(0,i._)("p",{class:"font-weight-medium text"},"取消人:",-1),k={class:"text-truncate font-weight-light"},W=(0,i._)("p",{class:"font-weight-medium text"},"取消时间:",-1),b={class:"text-truncate font-weight-light"},C=(0,i._)("span",{class:"font-weight-medium text"},"取消原因:",-1),F=["onClick"],Z={key:1},z=(0,i._)("p",{class:"font-weight-medium text"},"维修人:",-1),B={class:"text-truncate font-weight-light"},S=(0,i._)("p",{class:"font-weight-medium text"},"维修结束时间:",-1),D={class:"text-truncate font-weight-light"},L=(0,i._)("p",{class:"font-weight-medium text",style:{position:"relative",top:"4px"}},"影响时长:",-1);function A(t,e,n,A,T,q){var N=(0,i.up)("AppBarPage"),R=(0,i.up)("v-badge"),I=(0,i.up)("v-col"),J=(0,i.up)("v-row"),O=(0,i.up)("UploaderImageComponents"),U=(0,i.up)("van-field"),P=(0,i.up)("v-btn"),V=(0,i.up)("v-card"),$=(0,i.up)("TableComponents");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(N),(0,i._)("div",u,[(0,i.Wm)($,{ref:"table1",url:"/iiot/equipmentRepair/list",params:{warinState:"MC",reportBy:t.reportBy}},{tableBody:(0,i.w5)((function(t){return[(0,i.Wm)(V,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(J,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"1"},{default:(0,i.w5)((function(){return[(0,i.Wm)(R,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,i.Wm)(I,{cols:"5"},{default:(0,i.w5)((function(){return[a]})),_:1}),(0,i.Wm)(I,{cols:"1"})]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",o,(0,r.zw)(t.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[l]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",c,(0,r.zw)(t.items.faultTypeCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[s]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",f,(0,r.zw)(t.items.faultStationCn),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[p]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{class:"text-truncate font-weight-light",onClick:function(e){return q.GlobalTooltipFunc(t.items.problemDesc)}},(0,r.zw)(t.items.problemDesc),9,m)]})),_:2},1024)]})),_:2},1024),((0,i.wg)(),(0,i.j4)(O,{key:t._index,initPath:t.items.filePath,preview:""},null,8,["initPath"])),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[d]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",g,(0,r.zw)(q.FormatDictionary("equipment_repair_type",t.items.reportType)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[h]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",w,(0,r.zw)(t.items.isRepair?"是":"否"),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[_]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",x,(0,r.zw)(t.items.isStop?"是":"否"),1)]})),_:2},1024)]})),_:2},1024),t.items.cancelBy?((0,i.wg)(),(0,i.iD)("span",v,[(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[y]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",k,(0,r.zw)(t.items.cancelBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[W]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",b,(0,r.zw)(t.items.cancelTime),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"12"},{default:(0,i.w5)((function(){return[C,(0,i._)("span",{onClick:function(e){return q.GlobalTooltipFunc(t.items.cancelReason)}},(0,r.zw)(t.items.cancelReason),9,F)]})),_:2},1024)]})),_:2},1024)])):(0,i.kq)("",!0),t.items.cancelBy?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Z,[(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[z]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",B,(0,r.zw)(t.items.maintainRepairBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4"},{default:(0,i.w5)((function(){return[S]})),_:1}),(0,i.Wm)(I,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",D,(0,r.zw)(t.items.maintainRepairTime),1)]})),_:2},1024)]})),_:2},1024)])),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"4",class:"text-left"},{default:(0,i.w5)((function(){return[L]})),_:1}),(0,i.Wm)(I,{cols:"8",class:"text-left"},{default:(0,i.w5)((function(){return[(0,i.Wm)(U,{modelValue:t.items.productAffectTime,"onUpdate:modelValue":function(e){return t.items.productAffectTime=e},style:{padding:"0px"},class:"custem-input-index1",placeholder:"请输入",autocomplete:"off",type:"number"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(J,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(I,{cols:"6",class:"text-left"},{default:(0,i.w5)((function(){return[(0,i.Wm)(P,{onClick:function(e){return q.detailCheckClick(t)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("详情")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,i.Wm)(I,{cols:"6",class:"text-right"},{default:(0,i.w5)((function(){return[(0,i.Wm)(P,{onClick:function(e){return q.detailClick(t)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("确认维修结束")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params"])])])}var T=n(50124),q=n(48534),N=(n(57327),n(41539),n(9653),n(57658),n(76496)),R=n(88575),I=n(57265),J=n(14614),O=n(20868),U={components:{AppBarPage:N.Z,UploaderImageComponents:I.Z,TableComponents:R.Z},data:function(){return{reportBy:""}},created:function(){this.reportBy=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}")["userName"]},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,O.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=n[t]||[],r=i.filter((function(t){return e==t.value}))[0]||{};return r},detailClick:function(t){var e=this;return(0,q.Z)((0,T.Z)().mark((function n(){var i,r,u;return(0,T.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.items,n.next=3,(0,J.m)({payload:{productAffectTime:Number(i.productAffectTime||0),teAdRepairId:i.teAdRepairId,tmBasEquipmentId:i.tmBasEquipmentId,productRepairBy:i.productRepairBy}});case 3:r=n.sent,u=r.code,200==u&&((0,O.XA)("提交成功！"),e.$refs.table1.initFunc());case 6:case"end":return n.stop()}}),n)})))()},detailCheckClick:function(t){var e=this;return(0,q.Z)((0,T.Z)().mark((function n(){var i;return(0,T.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=t.items,e.$router.push({path:"/equipment/equipmentAffirm/detail2",query:{teAdRepairId:i.teAdRepairId,filePath:i.filePath}});case 2:case"end":return n.stop()}}),n)})))()}}},P=n(40089);const V=(0,P.Z)(U,[["render",A]]);var $=V}}]);
//# sourceMappingURL=chunk.4015.1689576086920.js.map