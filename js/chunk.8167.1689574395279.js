"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[8167],{89337:function(e,t,n){n.d(t,{$w:function(){return p},AT:function(){return o},NM:function(){return s},ew:function(){return c},jt:function(){return l},vU:function(){return u}});var r=n(50124),a=n(48534),i=n(37184),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:t.payload});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},5878:function(e,t,n){n.d(t,{b:function(){return a}});var r=n(66347),a=(n(57658),function(e,t,n,a){var i,l={id:t||"id",parentId:n||"parentId",childrenList:a||"children"},o={},u={},c=[],s=(0,r.Z)(e);try{for(s.s();!(i=s.n()).done;){var p=i.value,d=p[l.parentId];null==o[d]&&(o[d]=[]),u[p[l.id]]=p,o[d].push(p)}}catch(x){s.e(x)}finally{s.f()}var f,h=(0,r.Z)(e);try{for(h.s();!(f=h.n()).done;){var m=f.value,w=m[l.parentId];null==u[w]&&c.push(m)}}catch(x){h.e(x)}finally{h.f()}for(var v=0,y=c;v<y.length;v++){var b=y[v];g(b)}function g(e){if(null!==o[e[l.id]]&&(e[l.childrenList]=o[e[l.id]]),e[l.childrenList]){var t,n=(0,r.Z)(e[l.childrenList]);try{for(n.s();!(t=n.n()).done;){var a=t.value;g(a)}}catch(x){n.e(x)}finally{n.f()}}}return c})},98167:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(73396),a=(0,r._)("div",{style:{height:"12px"}},null,-1),i=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否紧急",-1),l=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否已收货",-1),o=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否外检",-1),u={style:{"margin-top":"32px","margin-bottom":"62px"}};function c(e,t,n,c,s,p){var d=(0,r.up)("AppBarPage"),f=(0,r.up)("van-field"),h=(0,r.up)("v-btn"),m=(0,r.up)("van-cascader"),w=(0,r.up)("van-popup"),v=(0,r.up)("SelectComponents"),y=(0,r.up)("v-col"),b=(0,r.up)("v-switch"),g=(0,r.up)("v-row");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(d),a,(0,r.Wm)(f,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldValue=t}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",required:"",onClick:t[1]||(t[1]=function(t){return e.show=!0})},null,8,["modelValue"]),(0,r.Wm)(w,{show:e.show,"onUpdate:show":t[4]||(t[4]=function(t){return e.show=t}),round:"",position:"bottom"},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:t[2]||(t[2]=function(){return e.show=!1})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 确定 ")]})),_:1}),e.showFactory?((0,r.wg)(),(0,r.j4)(m,{key:0,title:"请选择工厂节点",options:e.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:t[3]||(t[3]=function(t){return e.show=!1}),onChange:p.onFinish},null,8,["options","onChange"])):(0,r.kq)("",!0)]})),_:1},8,["show"]),(0,r.Wm)(v,{modelValue:e.supplier,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.supplier=t}),ref:"select678",label:"供应商",required:"",option:e.supplierSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(v,{modelValue:e.part,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.part=t}),ref:"select567",label:"零件",required:"",showSearch:"",option:e.partSelectOption,onOnSearchChange:p.partSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,r.Wm)(v,{modelValue:e.process,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.process=t}),ref:"select22",label:"过程类型",option:e.processSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(v,{modelValue:e.typeMaterial,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.typeMaterial=t}),ref:"select663",label:"来料类型",required:"",option:e.typeMaterialSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(v,{modelValue:e.classes,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.classes=t}),ref:"select33",label:"班次",option:e.classesSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(f,{modelValue:e.taskQty,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.taskQty=t}),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"任务数量"},null,8,["modelValue"]),(0,r.Wm)(f,{modelValue:e.receiptNo,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.receiptNo=t}),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单编号"},null,8,["modelValue"]),(0,r.Wm)(f,{modelValue:e.receiptline,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.receiptline=t}),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单序号"},null,8,["modelValue"]),(0,r.Wm)(f,{modelValue:e.receiptQty,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.receiptQty=t}),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"收货数量"},null,8,["modelValue"]),(0,r.Wm)(g,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[i]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{modelValue:e.switchUrgency,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.switchUrgency=t}),label:e.switchUrgency?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r.Wm)(g,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[l]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{modelValue:e.switchReceived,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.switchReceived=t}),label:e.switchReceived?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r.Wm)(g,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[o]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(b,{modelValue:e.switchOutInspect,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.switchOutInspect=t}),label:e.switchOutInspect?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r._)("div",u,[(0,r.Wm)(g,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"6",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{onClick:p.resetClick,color:"warning"},{default:(0,r.w5)((function(){return[(0,r.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(y,{cols:"6",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{onClick:p.searchClick,color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)("提交")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])])}var s=n(50124),p=n(48534),d=(n(57327),n(41539),n(21249),n(40561),n(92222),n(69600),n(9653),n(73210),n(57658),n(76496)),f=n(2243),h=n(37184),m=n(20868),w=n(89337),v=n(5878),y={components:{AppBarPage:d.Z,SelectComponents:f.Z},emits:["searchHandle","resetHandle"],data:function(){return{drawer:!1,showFactory:!0,show:!1,fieldValue:"",options:[],factoryID:"",process:"",processSelectOption:[],typeMaterial:"",typeMaterialSelectOption:[],switchUrgency:!1,switchReceived:!1,switchOutInspect:!1,classes:"",classesSelectOption:[],taskQty:"",receiptNo:"",receiptline:"",receiptQty:"",supplier:"",supplierSelectOption:[],part:"",partSelectOption:[]}},created:function(){this.initFunc(),this.getSupplierHttp(),this.partHttp()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],a=r.filter((function(e){return t==e.value}))[0]||{};return a},resetClick:function(){var e=this;this.factoryID="",this.part="",this.supplier="",this.process="",this.typeMaterial="",this.switchUrgency=!1,this.classes="",this.taskQty="",this.receiptNo="",this.receiptline="",this.receiptQty="",this.switchReceived=!1,this.switchOutInspect=!1,this.$refs.select678.reset(),this.$refs.select567.reset(),this.$refs.select22.reset(),this.$refs.select663.reset(),this.$refs.select33.reset(),this.fieldValue="",this.showFactory=!1,this.$nextTick((function(){e.showFactory=!0}))},initFunc:function(){var e=this;return(0,p.Z)((0,s.Z)().mark((function t(){var n,r,a,i,l,o,u,c;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n["QC_TASK_TYPE"]||[],e.processSelectOption=r.map((function(e){return Object.assign({text:e.lable,value:e.value})})),a=n["in_part_model"]||[],e.typeMaterialSelectOption=a.map((function(e){return Object.assign({text:e.lable,value:e.value})})),i=n["shiftno"]||[],e.classesSelectOption=i.map((function(e){return Object.assign({text:e.lable,value:e.value})})),t.next=9,(0,w.jt)();case 9:l=t.sent,o=l.data,u=void 0===o?[]:o,c=(0,v.b)(u,"tmBasNodeLevelId","parentId"),e.options=c;case 14:case"end":return t.stop()}}),t)})))()},getSupplierHttp:function(){var e=arguments,t=this;return(0,p.Z)((0,s.Z)().mark((function n(){var r,a,i,l;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,(0,h.i)({url:"/iiot/supplier/list?delFlag=Y",method:"get"});case 3:r=n.sent,a=r.code,i=r.data,l=void 0===i?[]:i,200==a&&(t.supplierSelectOption=l.map((function(e){return Object.assign({text:"".concat(e.supplierName),value:e.supplierCode})})));case 8:case"end":return n.stop()}}),n)})))()},partHttp:function(){var e=arguments,t=this;return(0,p.Z)((0,s.Z)().mark((function n(){var r,a,i,l,o;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,(0,h.i)({url:"/iiot/part/listPartForSelect",method:"get",url_params:{noOrName:r}});case 3:a=n.sent,i=a.code,l=a.data,o=void 0===l?[]:l,200==i&&(t.partSelectOption=o.map((function(e){return Object.assign({text:"".concat(e.matnr||"","-").concat(e.maktxC||""),value:e.tmBasPartId})})).splice(0,100));case 8:case"end":return n.stop()}}),n)})))()},partSearchChange:function(e){this.partHttp(e)},onFinish:function(e){var t=e.selectedOptions;if(t.length){var n=(t[t.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=t.map((function(e){return e.nodeLevelName})).join("/")}},searchClick:function(){var e=this;return(0,p.Z)((0,s.Z)().mark((function t(){var n,r,a,i;return(0,s.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.factoryID){t.next=3;break}return(0,m.LJ)("工厂必填！"),t.abrupt("return");case 3:if(e.supplier){t.next=6;break}return(0,m.LJ)("供应商必填！"),t.abrupt("return");case 6:if(e.part){t.next=9;break}return(0,m.LJ)("零件必填！"),t.abrupt("return");case 9:if(e.typeMaterial){t.next=12;break}return(0,m.LJ)("来料类型必填！"),t.abrupt("return");case 12:if(Number(e.taskQty)){t.next=15;break}return(0,m.LJ)("任务数量必填！"),t.abrupt("return");case 15:if(e.receiptNo.trim()){t.next=18;break}return(0,m.LJ)("收货单号必填！"),t.abrupt("return");case 18:if(e.receiptline.trim()){t.next=21;break}return(0,m.LJ)("收货单行号必填！"),t.abrupt("return");case 21:if(Number(e.receiptQty)){t.next=24;break}return(0,m.LJ)("收货数量必填！"),t.abrupt("return");case 24:return n={taskType:"IQC",tmBasNodeLevelId:e.factoryID,tmBasPartId:e.part,tmBasSupplId:e.supplier,processType:e.process,partModel:e.typeMaterial,isUrgent:e.switchUrgency?"1":"0",shiftno:e.classes,taskQty:Number(e.taskQty),receiptNo:e.receiptNo,receiptline:e.receiptline,receiptQty:Number(e.receiptQty),isReceipt:e.switchReceived?"1":"0",isOutInspect:e.switchOutInspect?"1":"0"},t.next=27,(0,h.i)({url:"/iiot/qmTask",method:"post",payload:n});case 27:r=t.sent,a=r.code,i=r.data,void 0===i?{}:i,200==a&&((0,m.XA)("提交成功！"),e.$router.push({path:"/qualityMaterial/index",query:{}}));case 32:case"end":return t.stop()}}),t)})))()},showDrawer:function(){this.drawer=!0}},props:{}},b=n(40089);const g=(0,b.Z)(y,[["render",c]]);var x=g}}]);
//# sourceMappingURL=chunk.8167.1689574395279.js.map