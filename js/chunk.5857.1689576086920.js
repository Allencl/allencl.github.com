"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[5857],{21655:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(73396);function r(e,t,n,r,o,i){var u=(0,a.up)("van-field"),l=(0,a.up)("van-date-picker"),c=(0,a.up)("van-picker-group"),s=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(u,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldValue=t}),"is-link":"",readonly:"",required:n.required,label:n.label,placeholder:n.placeholder,autocomplete:"off",onClick:t[1]||(t[1]=function(t){return e.showPicker=!0})},null,8,["modelValue","required","label","placeholder"]),(0,a.Wm)(s,{show:e.showPicker,"onUpdate:show":t[4]||(t[4]=function(t){return e.showPicker=t}),round:"",position:"bottom"},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{title:"预约日期",tabs:["选择日期"],onConfirm:i.onConfirm,onCancel:t[3]||(t[3]=function(t){return e.showPicker=!1})},{default:(0,a.w5)((function(){return[(0,a.Wm)(l,{modelValue:e.currentDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.currentDate=t}),"columns-type":n.columnsType,"min-date":e.minDate,"max-date":e.maxDate},null,8,["modelValue","columns-type","min-date","max-date"])]})),_:1},8,["onConfirm"])]})),_:1},8,["show"])])}n(69600);var o={components:{},emits:["update:modelValue"],data:function(){return{fieldValue:"",showPicker:!1,currentDate:[],currentDate2:[],minDate:new Date(2018,0,1),maxDate:new Date(2028,11,1),currentTime:["12","00"]}},methods:{reset:function(){this.fieldValue="",this.$emit("update:modelValue","")},onConfirm:function(){var e=this.currentDate,t=(this.currentTime,"".concat(e.join("-")));this.showPicker=!1,this.fieldValue=t,this.$emit("update:modelValue",t)}},props:{modelValue:{type:String,default:function(){return""}},columnsType:{type:Array,default:function(){return["year","month","day"]}},label:{type:String,default:function(){return"标题"}},placeholder:{type:String,default:function(){return"请选择"}},required:{type:Boolean,default:function(){return!1}}}},i=n(40089);const u=(0,i.Z)(o,[["render",r]]);var l=u},5857:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});n(82526),n(41817);var a=n(73396),r=n(87139),o=(0,a._)("span",{style:{"padding-left":"6px"}},"当前报修设备",-1),i={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},u={class:"text-h7 card-title-index1"},l=(0,a._)("span",null,"故障确认",-1),c=(0,a._)("div",{style:{height:"8px"}},null,-1),s=(0,a._)("div",{style:{height:"12px"}},null,-1),p={class:"text-h7 card-title-index1"},m=(0,a._)("span",null,"报修确认",-1),d=(0,a._)("div",{style:{height:"8px"}},null,-1),f={class:"mt-3 mb-4"},h=(0,a._)("div",{style:{height:"52px"}},null,-1);function v(e,t,n,v,w,y){var V=(0,a.up)("AppBarPage"),x=(0,a.up)("v-icon"),b=(0,a.up)("v-col"),g=(0,a.up)("v-row"),k=(0,a.up)("SelectComponents"),D=(0,a.up)("van-field"),S=(0,a.up)("UploaderImageComponents"),Z=(0,a.up)("v-sheet"),T=(0,a.up)("v-btn");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(V),(0,a.Wm)(g,{"no-gutters":"",style:{"margin-bottom":"2px"}},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{cols:"11"},{default:(0,a.w5)((function(){return[(0,a.Wm)(x,{icon:"mdi-tools",size:"16",color:"#3F51B5"}),o]})),_:1}),(0,a.Wm)(b,{cols:"1",class:"text-right",style:{"padding-right":"6px"}})]})),_:1}),(0,a.Wm)(g,{"no-gutters":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{cols:"12",style:{"margin-bottom":"4px","padding-left":"2px"}},{default:(0,a.w5)((function(){return[(0,a._)("p",i,(0,r.zw)(e.equipmentName),1)]})),_:1})]})),_:1}),(0,a.Wm)(Z,{elevation:"2",rounded:"",class:"pa-1"},{default:(0,a.w5)((function(){return[(0,a._)("div",u,[(0,a.Wm)(x,{size:"x-small",color:"#26C6DA",icon:"mdi-file-document-edit"}),l]),c,(0,a.Wm)(k,{modelValue:e.formData.typeSelectValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.formData.typeSelectValue=t}),label:"故障类型",required:"",option:e.typeOption},null,8,["modelValue","option"]),(0,a.Wm)(k,{modelValue:e.formData.locationSelectValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.locationSelectValue=t}),label:"故障位置",required:"",option:e.locationOption},null,8,["modelValue","option"]),(0,a.Wm)(D,{modelValue:e.formData.description,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.description=t}),rows:"2",autosize:"",label:"故障详细描述",type:"textarea",autocomplete:"off",placeholder:"请输入",maxlength:"200",required:"","show-word-limit":""},null,8,["modelValue"]),(0,a.Wm)(S,{modelValue:e.bufferFileList,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.bufferFileList=t})},null,8,["modelValue"])]})),_:1}),s,(0,a.Wm)(Z,{elevation:"2",rounded:"",class:"pa-1"},{default:(0,a.w5)((function(){return[(0,a._)("div",p,[(0,a.Wm)(x,{size:"x-small",color:"#3F51B5",icon:"mdi-account-wrench"}),m]),d,(0,a.Wm)(k,{modelValue:e.formData.maintainTypeSelectValue,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.maintainTypeSelectValue=t}),label:"维修类型",required:"",option:e.maintainTypeSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(D,{modelValue:e.repairsPersonnel,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.repairsPersonnel=t}),placeholder:"请输入",autocomplete:"off",label:"报修人",readonly:""},null,8,["modelValue"])]})),_:1}),(0,a._)("div",f,[(0,a.Wm)(T,{block:"",color:"primary",onClick:y.submit},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 确定 ")]})),_:1},8,["onClick"])]),h])}var w=n(50124),y=n(48534),V=(n(92222),n(21249),n(73210),n(69600),n(76496)),x=n(2243),b=n(21655),g=n(57265),k=n(37184),D=n(89337),S=n(20868),Z=(n(51693),{components:{AppBarPage:V.Z,SelectComponents:x.Z,UploaderImageComponents:g.Z,DatePickerComponents:b.Z},data:function(){return{repairsPersonnel:"",equipmentName:"",bufferFileList:[],formData:{typeSelectValue:"",locationSelectValue:"",description:"",maintainTypeSelectValue:"",user:"",date:""},typeOption:[],locationOption:[],maintainTypeSelectOption:[],repairmanSelectOption:[]}},created:function(){this.initType(),this.initPosition(),this.initMaintainType(),this.initRepairman(),this.initTime()},methods:{initTime:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r,o,i,u,l,c,s;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,a=n.equipmentNo,void 0===a?"":a,r=n.equipmentName,void 0===r?"":r,o=n.tmBasEquipmentId,e.formData.date="2023-2-23 15:33",i=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}"),e.repairsPersonnel="".concat(i["userName"],"-").concat(i["nickName"]),t.next=6,(0,k.i)({url:"/iiot/equipment/getEquipment/".concat(o),method:"get"});case 6:u=t.sent,l=u.code,c=u.data,s=void 0===c?{}:c,200==l&&(e.equipmentName=s.equipmentName);case 11:case"end":return t.stop()}}),t)})))()},initType:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,D.AT)();case 2:n=t.sent,a=n.data,r=void 0===a?[]:a,e.typeOption=r.map((function(e){return Object.assign({text:"".concat(e.faultTypeNo,"-").concat(e.faultTypeName),value:e.tmBasFaultTypeId})}));case 6:case"end":return t.stop()}}),t)})))()},initPosition:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,D.vU)();case 2:n=t.sent,a=n.data,r=void 0===a?[]:a,e.locationOption=r.map((function(e){return Object.assign({text:"".concat(e.faultNo,"-").concat(e.faultName),value:e.tmBasFaultId})}));case 6:case"end":return t.stop()}}),t)})))()},initMaintainType:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,D.ew)();case 2:n=t.sent,a=n.data,r=void 0===a?[]:a,e.maintainTypeSelectOption=r.map((function(e){return Object.assign({text:"".concat(e.dictLabel),value:e.dictValue})}));case 6:case"end":return t.stop()}}),t)})))()},initRepairman:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,D.NM)();case 2:n=t.sent,a=n.data,r=void 0===a?[]:a,e.repairmanSelectOption=r.map((function(e){return Object.assign({text:"".concat(e.userName,"-").concat(e.nickName),value:String(e.userName)})}));case 6:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return(0,y.Z)((0,w.Z)().mark((function t(){var n,a,r,o,i,u,l,c;return(0,w.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.formData,a=n.typeSelectValue,r=n.locationSelectValue,o=n.description,i=n.maintainTypeSelectValue,n.user,u=e.$route.query.tmBasEquipmentId,a){t.next=5;break}return(0,S.LJ)("故障类型必填！"),t.abrupt("return");case 5:if(r){t.next=8;break}return(0,S.LJ)("故障位置必填！"),t.abrupt("return");case 8:if(o.trim()){t.next=11;break}return(0,S.LJ)("故障详细描述必填！"),t.abrupt("return");case 11:if(i){t.next=14;break}return(0,S.LJ)("维修类型必填！"),t.abrupt("return");case 14:return t.next=16,(0,D.$w)({payload:{tmBasFaultTypeId:a,tmBasFaultId:r,problemCause:o,reportType:i,tmBasEquipmentId:u,filePath:e.bufferFileList.map((function(e){return e.url})).join()}});case 16:l=t.sent,c=l.code,200==c&&((0,S.XA)("提交成功！"),e.$router.go(-1));case 19:case"end":return t.stop()}}),t)})))()}}}),T=n(40089);const W=(0,T.Z)(Z,[["render",v]]);var _=W}}]);
//# sourceMappingURL=chunk.5857.1689576086920.js.map