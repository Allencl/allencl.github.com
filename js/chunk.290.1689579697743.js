"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[290],{57265:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(73396),i={style:{padding:"0px 12px 0px 12px"}},a={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},u={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},o={class:"custem-iamge-upload"},l=["src"];function s(e,t,r,s,c,p){var f=(0,n.up)("van-uploader"),m=(0,n.up)("v-icon");return(0,n.wg)(),(0,n.iD)("span",null,[(0,n._)("div",i,[r.preview?((0,n.wg)(),(0,n.iD)("p",a,"图片预览 ")):((0,n.wg)(),(0,n.iD)("p",u," 图片上传 ")),r.preview?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(f,{key:2,"after-read":p.afterRead,"preview-image":!1},null,8,["after-read"])),(0,n._)("div",o,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.bufferFileList,(function(i,a){return(0,n.wg)(),(0,n.iD)("li",{key:a,onClick:t[0]||(t[0]=function(t){return p.checkImage(e.bufferFileList)})},[(0,n._)("img",{src:i.url},null,8,l),r.preview?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:0,onClick:function(e){return p.removeClick(i,e)},class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])})),128))])])])}var c=r(50124),p=r(48534),f=(r(21249),r(26699),r(32023),r(92222),r(38862),r(57327),r(41539),r(37184)),m=r(20868),d=r(9801),v={components:{},emits:["update:modelValue","onChange"],data:function(){return{bufferFileList:[]}},watch:{modelValue:{handler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.bufferFileList=e},deep:!0,immediate:!0},initPath:{handler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(this.bufferFileList=e.split(",").map((function(e){return Object.assign({url:e})})))},deep:!0,immediate:!0}},methods:{checkImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(0,d.V)(e.map((function(e){return e.url})))},afterRead:function(e){var t=this;return(0,p.Z)((0,c.Z)().mark((function r(){var n,i,a,u,o;return(0,c.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.file.type.includes("image")){r.next=3;break}return(0,m.LJ)("只能选择图片！"),r.abrupt("return");case 3:if(!(e.file.size>=19922944)){r.next=6;break}return(0,m.LJ)("图片超过20M！"),r.abrupt("return");case 6:if(!(t.bufferFileList.length>2)){r.next=9;break}return(0,m.LJ)("最多只能选择3张图片！"),r.abrupt("return");case 9:return n=new FormData,n.append("file",e.file),r.next=13,(0,f.i)({url:"/file/upload",method:"post",formData:!0,payload:n});case 13:i=r.sent,a=i.code,u=i.data,o=void 0===u?{}:u,200==a?(t.bufferFileList=t.bufferFileList.concat([o]),(0,m.XA)("图片上传成功！"),t.$emit("update:modelValue",JSON.parse(JSON.stringify(t.bufferFileList)))):(0,m.LJ)("图片上传失败！");case 18:case"end":return r.stop()}}),r)})))()},removeClick:function(e,t){var r=this;t.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((function(t){return t.url!=e.url})),this.$nextTick((function(){r.$emit("update:modelValue",JSON.parse(JSON.stringify(r.bufferFileList)))}))}},props:{modelValue:{type:Array,default:function(){return[]}},initPath:{type:String,default:function(){return""}},preview:{type:Boolean,default:function(){return!1}}}},g=r(40089);const h=(0,g.Z)(v,[["render",s]]);var b=h},40290:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(73396),i=r(87139),a={class:"eror-content-steps-container"},u={class:"title text"},o={class:"user text"},l={class:"time text"},s={class:"remark text"},c=(0,n._)("div",{style:{height:"52px"}},null,-1);function p(e,t,r,p,f,m){var d=(0,n.up)("AppBarPage"),v=(0,n.up)("UploaderImageComponents"),g=(0,n.up)("van-step"),h=(0,n.up)("van-steps");return(0,n.wg)(),(0,n.iD)("span",null,[(0,n.Wm)(d),(0,n._)("div",a,[(0,n.Wm)(h,{direction:"vertical",active:e.active,"active-color":"#07c160"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.steapList,(function(e,t){return(0,n.wg)(),(0,n.j4)(g,{key:t},{default:(0,n.w5)((function(){return[(0,n._)("p",u,(0,i.zw)(e.title),1),(0,n._)("p",o,(0,i.zw)(e.user),1),(0,n._)("p",l,(0,i.zw)(e.time),1),(0,n._)("p",s,(0,i.zw)(e.remark),1),e._bufferFileList.length?((0,n.wg)(),(0,n.j4)(v,{key:0,modelValue:e._bufferFileList,"onUpdate:modelValue":function(t){return e._bufferFileList=t},preview:""},null,8,["modelValue","onUpdate:modelValue"])):(0,n.kq)("",!0)]})),_:2},1024)})),128))]})),_:1},8,["active"])]),c])}var f=r(50124),m=r(48534),d=(r(57327),r(41539),r(21249),r(92222),r(76496)),v=r(37184),g=r(57265),h={components:{AppBarPage:d.Z,UploaderImageComponents:g.Z},data:function(){return{active:0,steapList:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),n=r[e]||[],i=n.filter((function(e){return t==e.value}))[0]||{};return i},initFunc:function(){var e=this;return(0,m.Z)((0,f.Z)().mark((function t(){var r,n,i,a,u;return(0,f.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query.ttQmAbnormalId,t.next=3,(0,v.i)({url:"/iiot/abnormalDetail/list",method:"get",url_params:{ttQmAbnormalId:r}});case 3:n=t.sent,i=n.code,a=n.data,u=void 0===a?[]:a,200==i&&u.length&&(e.steapList=u.map((function(e){var t="",r=e.operatePath||"";"1"!=e.operateType&&"5"!=e.operateType||(t=e.abnormalDesc||""),"2"==e.operateType&&(t=e.retransmissionDesc||""),"3"==e.operateType&&(t=e.appointDesc||""),"4"==e.operateType&&(t=e.manageDesc||""),"6"!=e.operateType&&"8"!=e.operateType||(t=e.rejectReason||""),"7"==e.operateType&&(t=e.closeAppraise||"");var n=Object.assign({title:e.operateTypeName,user:e.operateBy,time:e.operateTime,remark:"".concat(e.operateTypeName,"描述: ").concat(t),_bufferFileList:r?r.split(",").map((function(e){return Object.assign({url:e})})):[]});return n})),e.active=u.length-1);case 8:case"end":return t.stop()}}),t)})))()}}},b=r(40089);const w=(0,b.Z)(h,[["render",p]]);var y=w}}]);
//# sourceMappingURL=chunk.290.1689579697743.js.map