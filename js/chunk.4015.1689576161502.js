"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4015],{14614:function(t,e,i){i.d(e,{m:function(){return l}});var a=i(37184);const l=async t=>await(0,a.i)({url:"/iiot/equipmentRepair/proConfirmWbForApp",method:"post",payload:t.payload})},88575:function(t,e,i){i.d(e,{Z:function(){return C}});var a=i(73396),l=i(87139);const s={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},n=(0,a._)("span",null,"第",-1),o={style:{"padding-left":"1px","padding-right":"1px"}},r=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,a._)("span",null,"共",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,a._)("span",{style:{"margin-right":"3px"}},"页",-1),m=(0,a._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},f=(0,a._)("span",null,"条",-1),g={style:{position:"relative",top:"1px","margin-left":"0px"}},h={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(t,e,i,w,_,y){const x=(0,a.up)("v-icon"),k=(0,a.up)("v-btn"),W=(0,a.up)("v-card");return(0,a.wg)(),(0,a.iD)("span",null,[t.paging&&i.pagingShow?((0,a.wg)(),(0,a.j4)(W,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:y.previousHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(k,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:y.nextHandle},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"28"},{default:(0,a.w5)((()=>[(0,a.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,a._)("span",s,[n,(0,a._)("span",o,(0,l.zw)(t.current),1),r,c,(0,a._)("span",u,(0,l.zw)(t.page),1),p,m,(0,a._)("span",d,(0,l.zw)(t.totalNum),1),f]),(0,a._)("span",g,[i.showSearchBtn?((0,a.wg)(),(0,a.j4)(k,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:y.searchClick,variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{size:"24",icon:"mdi-magnify"}),(0,a.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(k,{onClick:y.refreshClick,style:(0,l.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,a.kq)("",!0),t.items.length?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:1},(0,a.Ko)(t.items,((e,i)=>(0,a.WI)(t.$slots,"tableBody",{key:i,items:e,_index:i}))),128)):((0,a.wg)(),(0,a.iD)("p",h,[(0,a.Wm)(x,{icon:"mdi-emoticon-sad-outline"}),(0,a.Uk)(" 无数据！ ")]))])}var _=i(21801),y=i(37184);var x=i(20868),k={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:t,url:e}=this;t&&e&&this.initFunc()},methods:{previousHandle(){const{current:t}=this;1!=t?(this.current=t-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,x.LJ)("第一页！")},nextHandle(){const{current:t,page:e}=this;t>=e?(0,x.LJ)("最后一页！"):(this.current=t+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(t=1,e){const{url:i,params:a={},children:l,method:s,formatData:n}=this;if(l)return this.items=l,void(this.paging=!1);const o=(0,_.Z)((0,_.Z)({pageNum:t,pageSize:10},a),e),{code:r,total:c=0,msg:u="",data:p,rows:m}=await(0,y.i)({method:s,url:i,payload:"post"==s?o:{},url_params:"get"==s?o:{}});200==r&&(this.totalNum=c,this.current=t,this.page=Math.ceil(c/o.pageSize),this.items=n?n(p||m||[]):p||m||[])},refreshClick(){const{refreshFunc:t}=this;!t&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((t=>Object.assign(t,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},W=i(40089);const v=(0,W.Z)(k,[["render",w]]);var C=v},57265:function(t,e,i){i.d(e,{Z:function(){return h}});var a=i(73396);const l={style:{padding:"0px 12px 0px 12px"}},s={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},n={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},o={class:"custem-iamge-upload"},r=["src"];function c(t,e,i,c,u,p){const m=(0,a.up)("van-uploader"),d=(0,a.up)("v-icon");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a._)("div",l,[i.preview?((0,a.wg)(),(0,a.iD)("p",s,"图片预览 ")):((0,a.wg)(),(0,a.iD)("p",n," 图片上传 ")),i.preview?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:2,"after-read":p.afterRead,"preview-image":!1},null,8,["after-read"])),(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.bufferFileList,((l,s)=>((0,a.wg)(),(0,a.iD)("li",{key:s,onClick:e[0]||(e[0]=e=>p.checkImage(t.bufferFileList))},[(0,a._)("img",{src:l.url},null,8,r),i.preview?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,onClick:t=>p.removeClick(l,t),class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])))),128))])])])}i(26699),i(32023),i(38862);var u=i(37184),p=i(20868),m=i(9801),d={components:{},emits:["update:modelValue","onChange"],data:()=>({bufferFileList:[]}),watch:{modelValue:{handler(t=[]){this.bufferFileList=t},deep:!0,immediate:!0},initPath:{handler(t=""){t&&(this.bufferFileList=t.split(",").map((t=>Object.assign({url:t}))))},deep:!0,immediate:!0}},methods:{checkImage(t=[]){t.length&&(0,m.V)(t.map((t=>t.url)))},async afterRead(t){if(!t.file.type.includes("image"))return void(0,p.LJ)("只能选择图片！");if(t.file.size>=19922944)return void(0,p.LJ)("图片超过20M！");if(this.bufferFileList.length>2)return void(0,p.LJ)("最多只能选择3张图片！");let e=new FormData;e.append("file",t.file);const{code:i,data:a={}}=await(0,u.i)({url:"/file/upload",method:"post",formData:!0,payload:e});200==i?(this.bufferFileList=this.bufferFileList.concat([a]),(0,p.XA)("图片上传成功！"),this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.bufferFileList)))):(0,p.LJ)("图片上传失败！")},removeClick(t,e){e.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((e=>e.url!=t.url)),this.$nextTick((()=>{this.$emit("update:modelValue",JSON.parse(JSON.stringify(this.bufferFileList)))}))}},props:{modelValue:{type:Array,default:()=>[]},initPath:{type:String,default:()=>""},preview:{type:Boolean,default:()=>!1}}},f=i(40089);const g=(0,f.Z)(d,[["render",c]]);var h=g},74015:function(t,e,i){i.r(e),i.d(e,{default:function(){return V}});var a=i(73396),l=i(87139);const s={class:"v-window-item-table"},n=(0,a._)("span",{class:"font-weight-medium"},"维修设备",-1),o={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},r=(0,a._)("p",{class:"font-weight-medium text"},"故障类型:",-1),c={class:"text-truncate font-weight-light"},u=(0,a._)("p",{class:"font-weight-medium text"},"故障位置:",-1),p={class:"text-truncate font-weight-light"},m=(0,a._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),d=["onClick"],f=(0,a._)("p",{class:"font-weight-medium text"},"维修类型:",-1),g={class:"text-truncate font-weight-light"},h=(0,a._)("p",{class:"font-weight-medium text"},"是否外修:",-1),w={class:"text-truncate font-weight-light"},_=(0,a._)("p",{class:"font-weight-medium text"},"是否报废:",-1),y={class:"text-truncate font-weight-light"},x={key:0},k=(0,a._)("p",{class:"font-weight-medium text"},"取消人:",-1),W={class:"text-truncate font-weight-light"},v=(0,a._)("p",{class:"font-weight-medium text"},"取消时间:",-1),C={class:"text-truncate font-weight-light"},b=(0,a._)("span",{class:"font-weight-medium text"},"取消原因:",-1),F=["onClick"],z={key:1},B=(0,a._)("p",{class:"font-weight-medium text"},"维修人:",-1),S={class:"text-truncate font-weight-light"},D=(0,a._)("p",{class:"font-weight-medium text"},"维修结束时间:",-1),L={class:"text-truncate font-weight-light"},A=(0,a._)("p",{class:"font-weight-medium text",style:{position:"relative",top:"4px"}},"影响时长:",-1);function T(t,e,i,T,q,N){const R=(0,a.up)("AppBarPage"),I=(0,a.up)("v-badge"),J=(0,a.up)("v-col"),O=(0,a.up)("v-row"),U=(0,a.up)("UploaderImageComponents"),P=(0,a.up)("van-field"),V=(0,a.up)("v-btn"),Z=(0,a.up)("v-card"),$=(0,a.up)("TableComponents");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(R),(0,a._)("div",s,[(0,a.Wm)($,{ref:"table1",url:"/iiot/equipmentRepair/list",params:{warinState:"MC",reportBy:t.reportBy}},{tableBody:(0,a.w5)((t=>[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(O,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{content:t._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,a.Wm)(J,{cols:"5"},{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(J,{cols:"1"})])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"12"},{default:(0,a.w5)((()=>[(0,a._)("p",o,(0,l.zw)(t.items.equipmentName),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",c,(0,l.zw)(t.items.faultTypeCn),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",p,(0,l.zw)(t.items.faultStationCn),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",{class:"text-truncate font-weight-light",onClick:e=>N.GlobalTooltipFunc(t.items.problemDesc)},(0,l.zw)(t.items.problemDesc),9,d)])),_:2},1024)])),_:2},1024),((0,a.wg)(),(0,a.j4)(U,{key:t._index,initPath:t.items.filePath,preview:""},null,8,["initPath"])),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[f])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",g,(0,l.zw)(N.FormatDictionary("equipment_repair_type",t.items.reportType)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",w,(0,l.zw)(t.items.isRepair?"是":"否"),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",y,(0,l.zw)(t.items.isStop?"是":"否"),1)])),_:2},1024)])),_:2},1024),t.items.cancelBy?((0,a.wg)(),(0,a.iD)("span",x,[(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",W,(0,l.zw)(t.items.cancelBy),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",C,(0,l.zw)(t.items.cancelTime),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"12"},{default:(0,a.w5)((()=>[b,(0,a._)("span",{onClick:e=>N.GlobalTooltipFunc(t.items.cancelReason)},(0,l.zw)(t.items.cancelReason),9,F)])),_:2},1024)])),_:2},1024)])):(0,a.kq)("",!0),t.items.cancelBy?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",z,[(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[B])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",S,(0,l.zw)(t.items.maintainRepairBy),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4"},{default:(0,a.w5)((()=>[D])),_:1}),(0,a.Wm)(J,{cols:"8"},{default:(0,a.w5)((()=>[(0,a._)("p",L,(0,l.zw)(t.items.maintainRepairTime),1)])),_:2},1024)])),_:2},1024)])),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"4",class:"text-left"},{default:(0,a.w5)((()=>[A])),_:1}),(0,a.Wm)(J,{cols:"8",class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{modelValue:t.items.productAffectTime,"onUpdate:modelValue":e=>t.items.productAffectTime=e,style:{padding:"0px"},class:"custem-input-index1",placeholder:"请输入",autocomplete:"off",type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,a.Wm)(O,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{cols:"6",class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:e=>N.detailCheckClick(t),color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("详情")])),_:2},1032,["onClick"])])),_:2},1024),(0,a.Wm)(J,{cols:"6",class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:e=>N.detailClick(t),color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("确认维修结束")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["params"])])])}i(57658);var q=i(76496),N=i(88575),R=i(57265),I=i(14614),J=i(20868),O={components:{AppBarPage:q.Z,UploaderImageComponents:R.Z,TableComponents:N.Z},data:()=>({reportBy:""}),created(){this.reportBy=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}")["userName"]},methods:{GlobalTooltipFunc(t=""){(0,J.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary(t="",e=""){const i=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),a=i[t]||[],l=a.filter((t=>e==t.value))[0]||{};return l},async detailClick(t){const{items:e}=t,{code:i}=await(0,I.m)({payload:{productAffectTime:Number(e.productAffectTime||0),teAdRepairId:e.teAdRepairId,tmBasEquipmentId:e.tmBasEquipmentId,productRepairBy:e.productRepairBy}});200==i&&((0,J.XA)("提交成功！"),this.$refs.table1.initFunc())},async detailCheckClick(t){const{items:e}=t;this.$router.push({path:"/equipment/equipmentAffirm/detail2",query:{teAdRepairId:e.teAdRepairId,filePath:e.filePath}})}}},U=i(40089);const P=(0,U.Z)(O,[["render",T]]);var V=P}}]);
//# sourceMappingURL=chunk.4015.1689576161502.js.map