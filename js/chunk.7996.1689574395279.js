"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[7996],{47996:function(e,t,l){l.r(t),l.d(t,{default:function(){return S}});var a=l(73396),n=l(87139),o={style:{"padding-left":"6px"}},r=(0,a._)("div",{style:{height:"80px"}},null,-1);function i(e,t,l,i,u,p){var s=(0,a.up)("AppBarPage"),c=(0,a.up)("v-icon"),d=(0,a.up)("v-col"),m=(0,a.up)("v-row"),f=(0,a.up)("SelectComponents"),y=(0,a.up)("van-field"),b=(0,a.up)("v-sheet"),v=(0,a.up)("v-btn");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(s),(0,a.Wm)(m,{"no-gutters":"",style:{"margin-bottom":"8px"}},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{icon:"mdi-bullhorn",size:"16",color:"error"}),(0,a._)("span",o,(0,n.zw)("".concat(e.abnormalId?"修改异常":"添加异常")),1)]})),_:1}),(0,a.Wm)(d,{cols:"4",class:"text-right",style:{"padding-right":"6px"}})]})),_:1}),(0,a.Wm)(b,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{modelValue:e.user,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.user=t}),ref:"select11",label:"物料编码",option:e.repairmanSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(y,{modelValue:e.reqQty,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.reqQty=t}),type:"number",placeholder:"请输入",label:"数量",autocomplete:"off"},null,8,["modelValue"]),(0,a.Wm)(f,{modelValue:e.type,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.type=t}),ref:"select22",label:"异常类型",option:e.typeSelectOption},null,8,["modelValue","option"]),(0,a.Wm)(f,{modelValue:e.type2,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.type2=t}),ref:"select33",label:"处理类型",option:e.type2SelectOption},null,8,["modelValue","option"]),(0,a.Wm)(y,{modelValue:e.abnormalExplain,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.abnormalExplain=t}),placeholder:"请输入",label:"异常说明",autocomplete:"off"},null,8,["modelValue"]),e.isDispose?((0,a.wg)(),(0,a.j4)(y,{key:0,modelValue:e.disposeExplain,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.disposeExplain=t}),placeholder:"请输入",label:"处理说明",autocomplete:"off"},null,8,["modelValue"])):(0,a.kq)("",!0),e.isDispose?((0,a.wg)(),(0,a.j4)(f,{key:1,modelValue:e.dataStatus,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.dataStatus=t}),ref:"select55",label:"数据状态",option:e.dataStatusSelectOption},null,8,["modelValue","option"])):(0,a.kq)("",!0)]})),_:1}),(0,a.Wm)(m,{"no-gutters":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{block:"",color:"primary",onClick:p.onSubmit},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 提交 ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),r])}var u=l(95082),p=l(50124),s=l(48534),c=(l(21249),l(92222),l(57327),l(41539),l(76496)),d=l(2243),m=l(20868),f=l(37184),y={components:{AppBarPage:c.Z,SelectComponents:d.Z},data:function(){return{bufferRow:{},abnormalId:"",editData:{},isDispose:!1,user:"",repairmanSelectOption:[],reqQty:"",type:"",typeSelectOption:[],type2:"",type2SelectOption:[],abnormalExplain:"",disposeExplain:"",dataStatus:"",dataStatusSelectOption:[]}},created:function(){this.initFunc(),this.initRepairman()},methods:{initFunc:function(){var e=this;return(0,s.Z)((0,p.Z)().mark((function t(){var l,a,n,o,r,i,u,s,c,d,m;return(0,p.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=e.$route.query,a=l.abnormalId,n=l.isDispose,e.abnormalId=a,e.isDispose=n,o=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=o["ccgl_abnormal_type"]||[],e.typeSelectOption=r.map((function(e){return Object.assign({text:e.lable,value:e.value})})),i=o["ccgl_abnomal_dispose"]||[],e.type2SelectOption=i.map((function(e){return Object.assign({text:e.lable,value:e.value})})),u=o["ccgl_abnomal_state"]||[],e.dataStatusSelectOption=u.map((function(e){return Object.assign({text:e.lable,value:e.value})})),t.next=12,(0,f.i)({url:"/iiot/deliverySlipAbnormal/"+a,method:"get"});case 12:s=t.sent,c=s.code,d=s.data,m=void 0===d?{}:d,200==c&&(e.editData=m,e.user=m.partNo,e.reqQty=m.reqQty,e.type=m.abnormalType,e.type2=m.disposeType,e.abnormalExplain=m.abnormalExplain,e.$nextTick((function(){e.$refs.select11&&e.$refs.select11.setValue(m.partNo),e.$refs.select22&&e.$refs.select22.setValue(m.abnormalType),e.$refs.select33&&e.$refs.select33.setValue(m.disposeType)})));case 17:case"end":return t.stop()}}),t)})))()},initRepairman:function(){var e=this;return(0,s.Z)((0,p.Z)().mark((function t(){var l,a;return(0,p.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=e.$route.query.deliverySlipId,t.next=3,(0,f.i)({url:"/iiot/deliverySlipPart/dict/".concat(l),method:"get"});case 3:a=t.sent,e.repairmanSelectOption=(a||[]).map((function(e){return Object.assign({text:"".concat(e.dictValue||"","-").concat(e.dictLabel||""),value:e.dictValue,dictLabel:e.dictLabel})}));case 5:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return(0,s.Z)((0,p.Z)().mark((function t(){var l,a,n,o,r,i,s,c,d,y,b,v,S;return(0,p.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query,n=a.deliverySlipId,o=a.deliverySlipType,r=a.poNo,i=a.srmNo,s=a.abnormalId,c={abnormalId:null,deliverySlipId:n,deliverySlipType:o,poNo:r,srmNo:i,abnormalType:null,abnormalExplain:null,partNo:null,reqQty:null,partName:null,submitDatetime:null,submitUser:null,disposeType:null,disposeExplain:null,disposeUser:null,disposeDatetime:null,dataState:2,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null,version:null},d=s?e.editData:c,y=(0,u.Z)((0,u.Z)({},d),{},{partNo:e.user,partName:null===(l=e.repairmanSelectOption.filter((function(t){return t.value==e.user}))[0])||void 0===l?void 0:l.dictLabel,reqQty:e.reqQty,abnormalType:e.type,disposeType:e.type2,abnormalExplain:e.abnormalExplain,disposeExplain:e.disposeExplain,dataState:e.dataStatus}),t.next=6,(0,f.i)({url:"/iiot/deliverySlipAbnormal",method:s?"put":"post",payload:y});case 6:b=t.sent,v=b.code,S=b.data,void 0===S?{}:S,200==v&&((0,m.XA)("提交成功！"),e.$router.go(-1));case 11:case"end":return t.stop()}}),t)})))()}}},b=l(40089);const v=(0,b.Z)(y,[["render",i]]);var S=v}}]);
//# sourceMappingURL=chunk.7996.1689574395279.js.map