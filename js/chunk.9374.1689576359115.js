"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[9374],{39374:function(t,e,n){n.r(e),n.d(e,{default:function(){return E}});var r=n(73396),u=n(87139),a=(0,r._)("span",{class:"font-weight-medium"},"异常发起信息流水",-1),o={class:"font-weight-medium text-truncate text-center text-teal-lighten-1",color:"primary"},i=(0,r._)("p",{class:"font-weight-medium text"},"异常类型属性:",-1),l={class:"text-truncate font-weight-light"},c=(0,r._)("p",{class:"font-weight-medium text"},"紧急程度:",-1),s={class:"text-truncate font-weight-light",style:{color:"#00E5FF"}},f=(0,r._)("span",{class:"font-weight-medium text"},"异常类型:",-1),m={class:"font-weight-light"},d=(0,r._)("span",{class:"font-weight-medium text"},"异常内容:",-1),w={class:"font-weight-light"},p=(0,r._)("span",{class:"font-weight-medium text"},"异常描述:",-1),h={class:"font-weight-light"},_=(0,r._)("p",{class:"font-weight-medium text"},"产品序列号:",-1),g={class:"text-truncate font-weight-light"},x=(0,r._)("p",{class:"font-weight-medium text"},"产品名称:",-1),W={class:"text-truncate font-weight-light"},b=(0,r._)("p",{class:"font-weight-medium text"},"异常地点:",-1),v={class:"text-truncate font-weight-light"},k=(0,r._)("p",{class:"font-weight-medium text"},"设备型号:",-1),y={class:"text-truncate font-weight-light"},R=(0,r._)("p",{class:"font-weight-medium text"},"发起人:",-1),Z={class:"text-truncate font-weight-light"},C=(0,r._)("p",{class:"font-weight-medium text"},"发起时间:",-1),q={class:"text-truncate font-weight-light"},z=(0,r._)("p",{class:"font-weight-medium text"},"发起联系方式:",-1),I={class:"text-truncate font-weight-light"},N=(0,r._)("div",{style:{height:"6px"}},null,-1),V=(0,r._)("span",{class:"font-weight-medium"},"异常转发信息",-1),$=(0,r._)("div",{style:{height:"6px"}},null,-1),P=(0,r._)("div",{style:{height:"12px"}},null,-1),S=(0,r._)("div",{style:{height:"36px"}},null,-1);function U(t,e,n,U,A,F){var H=(0,r.up)("AppBarPage"),O=(0,r.up)("v-icon"),L=(0,r.up)("v-col"),j=(0,r.up)("v-row"),D=(0,r.up)("UploaderImageComponents"),B=(0,r.up)("v-sheet"),J=(0,r.up)("van-field"),T=(0,r.up)("SelectComponents"),Q=(0,r.up)("v-btn");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(H),(0,r.Wm)(B,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(j,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r.Wm)(O,{icon:"mdi-rocket-launch",size:"16",color:"primary"}),a]})),_:1}),(0,r.Wm)(L,{cols:"5"},{default:(0,r.w5)((function(){return[(0,r._)("p",o,(0,u.zw)(t.bufferRow.abnormalNo),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"5"},{default:(0,r.w5)((function(){return[i]})),_:1}),(0,r.Wm)(L,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r._)("p",l,(0,u.zw)(t.bufferRow.abnormalTypeName),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",s,(0,u.zw)(t.bufferRow.urgentDegreeName),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"12"},{default:(0,r.w5)((function(){return[f,(0,r._)("span",m,(0,u.zw)(t.bufferRow.abnormalName),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"12"},{default:(0,r.w5)((function(){return[d,(0,r._)("span",w,(0,u.zw)(t.bufferRow.contentName),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"12"},{default:(0,r.w5)((function(){return[p,(0,r._)("span",h,(0,u.zw)(t.bufferRow.abnormalDesc),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[_]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",g,(0,u.zw)(t.bufferRow.ttPpOrderSnId),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[x]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",W,(0,u.zw)(t.bufferRow.partName),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[b]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",v,(0,u.zw)(t.bufferRow.abnormalPlace),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[k]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",y,(0,u.zw)((t.bufferRow.equipmentNo||"")+"-"+(t.bufferRow.equipmentName||"")),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[R]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",Z,(0,u.zw)(t.bufferRow.initiateBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"4"},{default:(0,r.w5)((function(){return[C]})),_:1}),(0,r.Wm)(L,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",q,(0,u.zw)(t.bufferRow.initiateTime),1)]})),_:1})]})),_:1}),(0,r.Wm)(j,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"5"},{default:(0,r.w5)((function(){return[z]})),_:1}),(0,r.Wm)(L,{cols:"7"},{default:(0,r.w5)((function(){return[(0,r._)("p",I,(0,u.zw)(t.bufferRow.initiatePhone),1)]})),_:1})]})),_:1}),(0,r.Wm)(D,{modelValue:t.bufferFileListPreview,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.bufferFileListPreview=e}),preview:""},null,8,["modelValue"])]})),_:1}),N,(0,r.Wm)(B,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(j,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(O,{icon:"mdi-share",size:"16",color:"indigo"}),V]})),_:1}),(0,r.Wm)(L,{cols:"6"})]})),_:1}),(0,r.Wm)(J,{modelValue:t.explain,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.explain=e}),autocomplete:"off",placeholder:"请输入",label:"转发说明",required:""},null,8,["modelValue"]),(0,r.Wm)(T,{modelValue:t.user,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.user=e}),label:"转发到",required:"",showSearch:"",option:t.selectOption,onOnSearchChange:F.userSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,r.Wm)(J,{modelValue:t.remark,"onUpdate:modelValue":e[3]||(e[3]=function(e){return t.remark=e}),placeholder:"请输入",autocomplete:"off",label:"备注"},null,8,["modelValue"])]})),_:1}),$,(0,r.Wm)(j,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"3",class:"text-left"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Q,{onClick:F.modificationHandle,color:"info"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 异常变更 ")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(L,{cols:"3",class:"text-center"}),(0,r.Wm)(L,{cols:"3",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Q,{color:"primary",onClick:e[4]||(e[4]=function(t){return F.forwardHandle()})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 直接指派 ")]})),_:1})]})),_:1}),(0,r.Wm)(L,{cols:"3",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Q,{onClick:e[5]||(e[5]=function(t){return F.forwardHandle("forward")}),color:"info"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 转发 ")]})),_:1})]})),_:1})]})),_:1}),P,(0,r.Wm)(j,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{cols:"3",class:"text-left"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Q,{color:"error",onClick:F.rejectHandle},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 驳回 ")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(L,{cols:"3",class:"text-center"}),(0,r.Wm)(L,{cols:"3",class:"text-center"}),(0,r.Wm)(L,{cols:"3",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(Q,{color:"error",onClick:F.closeHandle},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 关闭 ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),S])}var A=n(95082),F=n(50124),H=n(48534),O=(n(57327),n(41539),n(21249),n(40561),n(92222),n(57658),n(73210),n(76496)),L=n(37184),j=(n(89337),n(57265)),D=n(2243),B=n(20868),J=(n(36797),n(51693),{components:{AppBarPage:O.Z,UploaderImageComponents:j.Z,SelectComponents:D.Z},data:function(){return{bufferRow:{},bufferFileListPreview:[],explain:"",user:"",selectOption:[],remark:""}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],u=r.filter((function(t){return e==t.value}))[0]||{};return u},initFunc:function(){var t=this;return(0,H.Z)((0,F.Z)().mark((function e(){var n,r,u,a,o;return(0,F.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.query.ttQmAbnormalId,e.next=3,(0,L.i)({url:"/iiot/abnormal",method:"get",url_RESTful:"/".concat(n)});case 3:r=e.sent,u=r.code,a=r.data,o=void 0===a?{}:a,200==u&&(t.bufferRow=o,o.initiatePath&&(t.bufferFileListPreview=o.initiatePath.split(",").map((function(t){return Object.assign({url:t})}))),t.$nextTick((function(){t.initRepairman()})));case 8:case"end":return e.stop()}}),e)})))()},initRepairman:function(){var t=arguments,e=this;return(0,H.Z)((0,F.Z)().mark((function n(){var r,u,a,o,i;return(0,F.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",e.bufferRow,n.next=4,(0,L.i)({url:"/system/user/list",method:"get",url_params:{userKey:r}});case 4:u=n.sent,a=u.code,o=u.data,i=void 0===o?[]:o,200==a&&(e.selectOption=i.map((function(t){return Object.assign({text:"".concat(t.userName,"-").concat(t.nickName),value:t.userName})})).splice(0,100));case 9:case"end":return n.stop()}}),n)})))()},userSearchChange:function(t){this.initRepairman(t)},modificationHandle:function(){var t=this.bufferRow;this.$router.push({path:"/anomalyInitiate/sponsor",query:{ttQmAbnormalId:t.ttQmAbnormalId}})},rejectHandle:function(){var t=this;return(0,H.Z)((0,F.Z)().mark((function e(){var n,r,u,a,o,i;return(0,F.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.bufferRow,r=t.$route.query.pageAction,t.remark.trim()){e.next=5;break}return(0,B.LJ)("备注必填！"),e.abrupt("return");case 5:return u=(0,A.Z)((0,A.Z)({},n),{},{rejectReason:t.remark}),e.next=8,(0,L.i)({url:"/iiot/abnormal/reject",method:"post",payload:u});case 8:a=e.sent,o=a.code,i=a.data,void 0===i?{}:i,200==o&&((0,B.XA)("提交成功！"),2==r?t.$router.push({path:"/anomalyInitiate/index/transpond",query:{}}):t.$router.push({path:"/anomalyInitiate/index",query:{}}));case 13:case"end":return e.stop()}}),e)})))()},forwardHandle:function(t){var e=this;return(0,H.Z)((0,F.Z)().mark((function n(){var r,u,a,o,i,l;return(0,F.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.bufferRow,u=e.$route.query.pageAction,e.explain.trim()){n.next=5;break}return(0,B.LJ)("转发说明必填！"),n.abrupt("return");case 5:if(e.user){n.next=8;break}return(0,B.LJ)("转发到必填！"),n.abrupt("return");case 8:return a=(0,A.Z)((0,A.Z)({},r),{},{retransmissionDesc:e.explain,retransmissionRemark:e.remark,retransmissionBy:e.user}),n.next=11,(0,L.i)({url:t?"/iiot/abnormal/retransmission":"/iiot/abnormal/appoint",method:"post",payload:a});case 11:o=n.sent,i=o.code,l=o.data,void 0===l?{}:l,200==i&&((0,B.XA)("提交成功！"),2==u?e.$router.push({path:"/anomalyInitiate/index/transpond",query:{}}):e.$router.push({path:"/anomalyInitiate/index",query:{}}));case 16:case"end":return n.stop()}}),n)})))()},closeHandle:function(){var t=this.$route.query.pageAction;2==t?this.$router.push({path:"/anomalyInitiate/index/transpond",query:{}}):this.$router.push({path:"/anomalyInitiate/index",query:{}})}}}),T=n(40089);const Q=(0,T.Z)(J,[["render",U]]);var E=Q}}]);
//# sourceMappingURL=chunk.9374.1689576359115.js.map