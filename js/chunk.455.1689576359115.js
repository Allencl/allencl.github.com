"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[455],{89337:function(e,t,n){n.d(t,{$w:function(){return p},AT:function(){return c},NM:function(){return l},ew:function(){return s},jt:function(){return o},vU:function(){return u}});var r=n(50124),a=n(48534),i=n(37184),o=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:t.payload});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},5878:function(e,t,n){n.d(t,{b:function(){return a}});var r=n(66347),a=(n(57658),function(e,t,n,a){var i,o={id:t||"id",parentId:n||"parentId",childrenList:a||"children"},c={},u={},s=[],l=(0,r.Z)(e);try{for(l.s();!(i=l.n()).done;){var p=i.value,f=p[o.parentId];null==c[f]&&(c[f]=[]),u[p[o.id]]=p,c[f].push(p)}}catch(y){l.e(y)}finally{l.f()}var h,d=(0,r.Z)(e);try{for(d.s();!(h=d.n()).done;){var m=h.value,w=m[o.parentId];null==u[w]&&s.push(m)}}catch(y){d.e(y)}finally{d.f()}for(var v=0,g=s;v<g.length;v++){var k=g[v];x(k)}function x(e){if(null!==c[e[o.id]]&&(e[o.childrenList]=c[e[o.id]]),e[o.childrenList]){var t,n=(0,r.Z)(e[o.childrenList]);try{for(n.s();!(t=n.n()).done;){var a=t.value;x(a)}}catch(y){n.e(y)}finally{n.f()}}}return s})},88575:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(73396),a=n(87139),i={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,r._)("span",null,"第",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},u=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),s=(0,r._)("span",null,"共",-1),l={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),f=(0,r._)("span",null,"总",-1),h={style:{"padding-left":"1px","padding-right":"1px"}},d=(0,r._)("span",null,"条",-1),m={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function v(e,t,n,v,g,k){var x=(0,r.up)("v-icon"),y=(0,r.up)("v-btn"),_=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[e.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(_,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:k.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(y,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:k.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",i,[o,(0,r._)("span",c,(0,a.zw)(e.current),1),u,s,(0,r._)("span",l,(0,a.zw)(e.page),1),p,f,(0,r._)("span",h,(0,a.zw)(e.totalNum),1),d]),(0,r._)("span",m,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(y,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:k.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(y,{onClick:k.refreshClick,style:(0,a.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),e.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.items,(function(t,n){return(0,r.WI)(e.$slots,"tableBody",{key:n,items:t,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",w,[(0,r.Wm)(x,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var g=n(50124),k=n(95082),x=n(48534),y=(n(21249),n(37184)),_=n(20868),b={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var e=this.auto,t=this.url;e&&t&&this.initFunc()},methods:{previousHandle:function(){var e=this,t=this.current;1!=t?(this.current=t-1,this.$nextTick((function(){e.initFunc(e.current)}))):(0,_.LJ)("第一页！")},nextHandle:function(){var e=this,t=this.current,n=this.page;t>=n?(0,_.LJ)("最后一页！"):(this.current=t+1,this.$nextTick((function(){e.initFunc(e.current)})))},initFunc:function(){var e=arguments,t=this;return(0,x.Z)((0,g.Z)().mark((function n(){var r,a,i,o,c,u,s,l,p,f,h,d,m,w,v,x;return(0,g.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:1,a=e.length>1?e[1]:void 0,i=t.url,o=t.params,c=void 0===o?{}:o,u=t.children,s=t.method,l=t.formatData,!u){n.next=7;break}return t.items=u,t.paging=!1,n.abrupt("return");case 7:return p=(0,k.Z)((0,k.Z)({pageNum:r,pageSize:10},c),a),n.next=10,(0,y.i)({method:s,url:i,payload:"post"==s?p:{},url_params:"get"==s?p:{}});case 10:f=n.sent,h=f.code,d=f.total,m=void 0===d?0:d,w=f.msg,void 0===w?"":w,v=f.data,x=f.rows,200==h&&(t.totalNum=m,t.current=r,t.page=Math.ceil(m/p.pageSize),t.items=l?l(v||x||[]):v||x||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var e=this.refreshFunc;!e&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(e){return Object.assign(e,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},C=n(40089);const S=(0,C.Z)(b,[["render",v]]);var Z=S},14085:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var r=n(95082),a=n(73396),i=n(87139),o=(0,a._)("span",{class:"font-weight-medium"},"点检设备",-1),c={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},u={class:"font-weight-light"},s=(0,a._)("span",{class:"font-weight-medium text"},"单据编号: ",-1),l={class:"text-teal-lighten-1"},p={class:"font-weight-light"},f=(0,a._)("span",{class:"font-weight-medium text"},"点检类型: ",-1),h={class:"font-weight-light"},d=(0,a._)("span",{class:"font-weight-medium text"},"设备类型: ",-1),m={class:"font-weight-light"},w=(0,a._)("span",{class:"font-weight-medium text"},"申请时间: ",-1),v={class:"font-weight-light"},g=(0,a._)("span",{class:"font-weight-medium text"},"状态: ",-1),k=(0,a._)("span",{class:"font-weight-medium"},"点检设备",-1),x={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},y={class:"text-truncate font-weight-light"},_=(0,a._)("span",{class:"font-weight-medium text"},"点检类型: ",-1),b={class:"text-truncate font-weight-light"},C=(0,a._)("span",{class:"font-weight-medium text"},"申请人: ",-1),S={class:"text-truncate font-weight-light"},Z=(0,a._)("span",{class:"font-weight-medium text"},"申请时间: ",-1),T={key:0,class:"hide-select-equipment-input"};function W(e,t,n,W,B,$){var H=(0,a.up)("AppBarPage"),q=(0,a.up)("v-badge"),F=(0,a.up)("v-col"),N=(0,a.up)("v-row"),I=(0,a.up)("v-card"),D=(0,a.up)("TableComponents"),O=(0,a.up)("v-window-item"),L=(0,a.up)("ScanBarComponents"),U=(0,a.up)("v-btn"),P=(0,a.up)("v-window"),z=(0,a.up)("SearchPage1"),E=(0,a.up)("SearchPage2"),j=(0,a.up)("SelectComponents");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(H),(0,a.Wm)(P,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tab=t})},{default:(0,a.w5)((function(){return[(0,a.Wm)(O,{value:"1",class:"v-window-item-table"},{default:(0,a.w5)((function(){return["1"==e.tab?((0,a.wg)(),(0,a.j4)(D,{key:0,ref:"table1",url:"/iiot/checkTask/list",showSearchBtn:!0,params:(0,r.Z)({params:{typeList:["dj"]},taskState:"",tmBasEquipments:e.tmBasEquipments},e.pageSearchConfig1),method:"post",refreshFunc:"",onSearchClick:$.searchClick1,onRefresh:$.refreshTable},{tableBody:(0,a.w5)((function(e){return[(0,a.Wm)(I,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(N,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"1"},{default:(0,a.w5)((function(){return[(0,a.Wm)(q,{content:e._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,a.Wm)(F,{cols:"5"},{default:(0,a.w5)((function(){return[o]})),_:1}),(0,a.Wm)(F,{cols:"3"})]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",c,(0,i.zw)(e.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",u,[s,(0,a._)("span",l,(0,i.zw)(e.items.taskNo),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",p,[f,(0,a.Uk)(" "+(0,i.zw)($.FormatDictionary("CHECK_TYPE",e.items.taskType)["lable"]),1)])]})),_:2},1024),(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",h,[d,(0,a.Uk)(" "+(0,i.zw)(e.items.equipmentType),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",m,[w,(0,a.Uk)(" "+(0,i.zw)(e.items.createDate),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",v,[g,(0,a.Uk)(" "+(0,i.zw)($.FormatDictionary("CHECK_STATE",e.items.taskState)["lable"]),1)])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick","onRefresh"])):(0,a.kq)("",!0)]})),_:1}),(0,a.Wm)(O,{value:"2",class:"v-window-item-table"},{default:(0,a.w5)((function(){return[(0,a.Wm)(L,{ref:"scanBar2",placeholder:"扫描或输入 区域码",onSearchClick:$.barSearchClick2},null,8,["onSearchClick"]),"2"==e.tab?((0,a.wg)(),(0,a.j4)(D,{key:0,ref:"table2",url:"/iiot/checkTask/listForApp",showSearchBtn:!0,params:(0,r.Z)({params:{typeList:["dj"]},taskState:"C",tmBasEquipments:e.tmBasEquipments},e.pageSearchConfig2),method:"post",onSearchClick:$.searchClick2,refreshFunc:"",onRefresh:$.refreshTable},{tableBody:(0,a.w5)((function(e){return[(0,a.Wm)(I,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(N,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"1"},{default:(0,a.w5)((function(){return[(0,a.Wm)(q,{content:e._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,a.Wm)(F,{cols:"5"},{default:(0,a.w5)((function(){return[k]})),_:1}),(0,a.Wm)(F,{cols:"1"})]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",x,(0,i.zw)(e.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"6"},{default:(0,a.w5)((function(){return[(0,a._)("p",y,[_,(0,a.Uk)(" "+(0,i.zw)($.FormatDictionary("CHECK_TYPE",e.items.taskType)["lable"]),1)])]})),_:2},1024),(0,a.Wm)(F,{cols:"6"},{default:(0,a.w5)((function(){return[(0,a._)("p",b,[C,(0,a.Uk)(" "+(0,i.zw)(e.items.createBy),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",S,[Z,(0,a.Uk)(" "+(0,i.zw)(e.items.createDate),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(N,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(F,{cols:"4",class:"text-center"}),(0,a.Wm)(F,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{onClick:function(t){return $.cancelHandle(e)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("取消点检")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,a.Wm)(F,{cols:"4",class:"text-right"},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{onClick:function(t){return $.experienceEdit(e)},color:"orange mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("点检")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick","onRefresh"])):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"]),(0,a.Wm)(z,{ref:"searchPage1",hideStatus:!1,onResetHandle:$.resetHandle1,onSearchHandle:$.searchHandle1},null,8,["onResetHandle","onSearchHandle"]),(0,a.Wm)(E,{ref:"searchPage2",hideStatus:!1,onResetHandle:$.resetHandle2,onSearchHandle:$.searchHandle2},null,8,["onResetHandle","onSearchHandle"]),e.showSelect?((0,a.wg)(),(0,a.iD)("span",T,[(0,a.Wm)(j,{ref:"selectContent",label:"设备",placeholderSearch:"请输入设备编号",forbidShow:!0,required:"",showSearch:"",multiple:"",option:e.equipmentSelectOption,onOnSearchChange:$.equipmentSearchChange,onOnChange:$.equipmentConfirm},null,8,["option","onOnSearchChange","onOnChange"])])):(0,a.kq)("",!0)])}var B=n(50124),$=n(48534),H=(n(57327),n(41539),n(40561),n(21249),n(92222),n(57658),n(38862),n(73210),n(76496)),q=n(88575),F=n(73378),N=n(2243),I=n(89337),D=n(37184),O=(0,a._)("div",{style:{height:"36px"}},null,-1),L={style:{"margin-top":"32px"}};function U(e,t,n,r,i,o){var c=(0,a.up)("van-field"),u=(0,a.up)("v-btn"),s=(0,a.up)("van-cascader"),l=(0,a.up)("van-popup"),p=(0,a.up)("SelectComponents"),f=(0,a.up)("v-col"),h=(0,a.up)("v-row");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(l,{show:e.drawer,"onUpdate:show":t[7]||(t[7]=function(t){return e.drawer=t}),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,a.w5)((function(){return[O,(0,a.Wm)(c,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.fieldValue=t}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",onClick:t[1]||(t[1]=function(t){return e.show=!0})},null,8,["modelValue"]),(0,a.Wm)(l,{show:e.show,"onUpdate:show":t[4]||(t[4]=function(t){return e.show=t}),round:"",position:"bottom"},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:t[2]||(t[2]=function(){return e.show=!1})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 确定 ")]})),_:1}),e.hideFactory?((0,a.wg)(),(0,a.j4)(s,{key:0,title:"请选择工厂节点",options:e.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:t[3]||(t[3]=function(t){return e.show=!1}),onChange:o.onFinish},null,8,["options","onChange"])):(0,a.kq)("",!0)]})),_:1},8,["show"]),(0,a.Wm)(p,{modelValue:e.property,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.property=t}),ref:"select2",label:"状态",option:e.propertySelectOption},null,8,["modelValue","option"]),(0,a._)("div",L,[(0,a.Wm)(h,{"no-gutters":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{onClick:t[6]||(t[6]=function(){return e.drawer=!1}),density:"compact",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("关闭")]})),_:1})]})),_:1}),(0,a.Wm)(f,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{onClick:o.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,a.Wm)(f,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{onClick:o.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])}n(69600);var P=n(5878),z={components:{SelectComponents:N.Z},emits:["searchHandle","resetHandle"],data:function(){return{hideFactory:!0,drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",type:"",typeSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],a=r.filter((function(e){return t==e.value}))[0]||{};return a},resetClick:function(){var e=this;this.fieldValue="",this.factoryID="",this.property="",this.$refs.select2&&this.$refs.select2.reset(),this.hideFactory=!1,this.$nextTick((function(){e.hideFactory=!0})),this.$emit("resetHandle",{})},initFunc:function(){var e=this;return(0,$.Z)((0,B.Z)().mark((function t(){var n,r,a,i,o,c;return(0,B.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n["CHECK_STATE"]||[],e.propertySelectOption=r.map((function(e){return Object.assign({text:e.lable,value:e.value})})),t.next=5,(0,I.jt)();case 5:a=t.sent,i=a.data,o=void 0===i?[]:i,c=(0,P.b)(o,"tmBasNodeLevelId","parentId"),e.options=c;case 10:case"end":return t.stop()}}),t)})))()},getTypeHttp:function(){var e=arguments,t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r,a,i,o,c;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",n.next=3,(0,D.i)({url:"/iiot/abnormalType/listAbnormalTypeForSelect",method:"get",url_params:{abnormalNo:r}});case 3:a=n.sent,i=a.code,o=a.data,c=void 0===o?[]:o,200==i&&(t.typeSelectOption=c.map((function(e){return Object.assign({text:"".concat(e.abnormalNo).concat(e.abnormalName),value:e.tmBasAbnormalTypeId})})));case 8:case"end":return n.stop()}}),n)})))()},onFinish:function(e){var t=e.selectedOptions;if(t.length){var n=(t[t.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=t.map((function(e){return e.nodeLevelName})).join("/")}},searchClick:function(){var e=this.factoryID,t=(this.type,this.property),n=(this.status,{tmBasNodeLevelId:e,taskState:t});this.$emit("searchHandle",n),this.drawer=!1},showDrawer:function(){this.drawer=!0}},props:{hideStatus:{type:Boolean,default:function(){return!0}}}},E=n(40089);const j=(0,E.Z)(z,[["render",U]]);var A=j,V=n(20868),R=n(69650),J={components:{AppBarPage:H.Z,SearchPage1:A,SearchPage2:A,SelectComponents:N.Z,ScanBarComponents:F.Z,TableComponents:q.Z},data:function(){return{tab:"1",bufferTree:[],pageSearchConfig1:{},pageSearchConfig2:{},tmBasEquipments:[],showSelect:!0,tmBasNodeLevelId:"",equipment:"",equipmentSelectOption:[],equipmentSelectOptionData:[]}},created:function(){var e=this;this.initFunc(),this.factoryTreeHTTP();var t=this.$root.$emitter;t.on("update_examineHistory_page",(function(){e.initFunc(),e.factoryTreeHTTP(),e.refreshTable()}))},methods:{FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],a=r.filter((function(e){return t==e.value}))[0]||{};return a},initFunc:function(){var e=this.$route.query.tabs;e&&(this.tab=e)},refreshTable:function(){var e=this;this.$refs["scanBar1"]&&this.$refs["scanBar1"].reset(),this.$refs["scanBar2"]&&this.$refs["scanBar2"].reset(),this.tmBasEquipments=[],this.$nextTick((function(){"1"==e.tab&&e.$refs.table1.initFunc(1,{}),"2"==e.tab&&e.$refs.table2.initFunc(1,{})}))},equipmentSearchChange:function(){var e=arguments,t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:"",t.equipmentHTTP(r);case 2:case"end":return n.stop()}}),n)})))()},equipmentHTTP:function(){var e=arguments,t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r,a,i,o,c,u;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"",a=t.tmBasNodeLevelId,n.next=4,(0,D.i)({url:"/iiot/equipment/list",method:"get",url_params:{tmBasNodeLevelId:a,equipmentNo:r}});case 4:i=n.sent,o=i.code,c=i.data,u=void 0===c?[]:c,200==o&&(t.equipmentSelectOptionData=u,t.equipmentSelectOption=u.map((function(e){return Object.assign({text:"".concat(e.equipmentNo,"-").concat(e.equipmentName),value:e.tmBasEquipmentId})})).splice(0,100));case 9:case"end":return n.stop()}}),n)})))()},equipmentConfirm:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.tmBasEquipments=t?t.split(","):[],this.$nextTick((function(){"1"==e.tab&&e.$refs.table1.initFunc(1,{}),"2"==e.tab&&e.$refs.table2.initFunc(1,{})}))},factoryTreeHTTP:function(){var e=this;return(0,$.Z)((0,B.Z)().mark((function t(){var n,r,a;return(0,B.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,I.jt)();case 2:n=t.sent,r=n.data,a=void 0===r?[]:r,e.bufferTree=a;case 6:case"end":return t.stop()}}),t)})))()},experienceEditTo:function(e){var t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r,a,i;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.items,n.next=3,(0,D.i)({url:"/iiot/checkTask/checkTask",method:"post",payload:{ttCheckTaskId:r.ttCheckTaskId}});case 3:a=n.sent,i=a.code,200==i&&((0,V.XA)("提交成功！"),t.tab="1",t.$nextTick((function(){t.$refs.table1.initFunc()})));case 6:case"end":return n.stop()}}),n)})))()},experienceEdit:function(e){var t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.items,t.$router.push({path:"/examineHistory/detail",query:{ttCheckTaskId:r.ttCheckTaskId,row:JSON.stringify(r)}}),setTimeout((function(){t.$root.$emitter.emit("update_examineHistory_page_index")}),1e3);case 3:case"end":return n.stop()}}),n)})))()},cancelHandle:function(e){var t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.items,(0,R.vC)({title:"取消确认",message:"取消后数据不可恢复，确认取消！",theme:"round-button",closeOnClickOverlay:!0}).then((0,$.Z)((0,B.Z)().mark((function e(){var n,a;return(0,B.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,D.i)({url:"/iiot/checkTask",method:"PUT",payload:{ttCheckTaskId:r.ttCheckTaskId,taskState:"N"}});case 2:n=e.sent,a=n.code,200==a&&((0,V.XA)("提交成功！"),t.tab="1",t.$nextTick((function(){t.$refs.table1.initFunc()})));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return n.stop()}}),n)})))()},barSearchClick:function(){var e=arguments,t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r,a,i;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",a=r.trim(),i=t.bufferTree.filter((function(e){return e.nodeLevelNo==a}))[0]||{},i.tmBasNodeLevelId){n.next=6;break}return(0,V.LJ)("无工厂节点！"),n.abrupt("return");case 6:t.showSelect=!1,t.tmBasNodeLevelId=i.tmBasNodeLevelId,t.$nextTick((0,$.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSelect=!0,e.next=3,t.equipmentHTTP("");case 3:t.$nextTick((function(){t.$refs.selectContent.showModle()}));case 4:case"end":return e.stop()}}),e)}))));case 9:case"end":return n.stop()}}),n)})))()},barSearchClick2:function(){var e=arguments,t=this;return(0,$.Z)((0,B.Z)().mark((function n(){var r,a,i;return(0,B.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",a=r.trim(),i=t.bufferTree.filter((function(e){return e.nodeLevelNo==a}))[0]||{},i.tmBasNodeLevelId){n.next=6;break}return(0,V.LJ)("无工厂节点！"),n.abrupt("return");case 6:t.showSelect=!1,t.tmBasNodeLevelId=i.tmBasNodeLevelId,t.$nextTick((0,$.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showSelect=!0,e.next=3,t.equipmentHTTP("");case 3:t.$nextTick((function(){t.$refs.selectContent.showModle()}));case 4:case"end":return e.stop()}}),e)}))));case 9:case"end":return n.stop()}}),n)})))()},searchClick1:function(){this.$refs.searchPage1.showDrawer()},searchHandle1:function(e){var t=this;this.pageSearchConfig1=e,this.$nextTick((function(){t.$refs.table1.initFunc(1)}))},resetHandle1:function(e){var t=this;this.pageSearchConfig1={},this.$nextTick((function(){t.$refs.table1.initFunc(1)}))},searchClick2:function(){this.$refs.searchPage2.showDrawer()},searchHandle2:function(e){var t=this;this.pageSearchConfig2=e,this.$nextTick((function(){t.$refs.table2.initFunc(1)}))},resetHandle2:function(e){var t=this;this.pageSearchConfig2={},this.$nextTick((function(){t.$refs.table2.initFunc(1)}))}}};const K=(0,E.Z)(J,[["render",W]]);var M=K},69650:function(e,t,n){n.d(t,{vC:function(){return p}});n(41539);var r,a=n(73396),i=n(12220),o=n(57548),c=n(21178),u={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},s=(0,i.l7)({},u);function l(){var e={setup:function(){var e=(0,o.o)(),t=e.state,n=e.toggle;return function(){return(0,a.Wm)(c.Z,(0,a.dG)(t,{"onUpdate:show":n}),null)}}},t=(0,o.H)(e);r=t.instance}function p(e){return i._f?new Promise((function(t,n){r||l(),r.open((0,i.l7)({},s,e,{callback:function(e){("confirm"===e?t:n)(e)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.455.1689576359115.js.map