"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[6832],{21472:function(e,t,a){a.d(t,{Oh:function(){return l},_w:function(){return s}});var i=a(37184);const s=async e=>await(0,i.i)({url:"/iiot/equipmentRepair/responseWbForApp",method:"post",payload:e.payload}),l=async e=>await(0,i.i)({url:"/iiot/equipmentRepairHistory",method:"get",url_RESTful:e.url_RESTful})},89337:function(e,t,a){a.d(t,{$w:function(){return c},AT:function(){return l},NM:function(){return o},ew:function(){return r},jt:function(){return s},vU:function(){return n}});var i=a(37184);const s=async(e={})=>await(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e}),l=async e=>await(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"}),n=async e=>await(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"}),r=async e=>await(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"}),o=async e=>await(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"}),c=async e=>await(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload})},5878:function(e,t,a){a.d(t,{b:function(){return i}});a(33948),a(57658);const i=(e,t,a,i)=>{let s={id:t||"id",parentId:a||"parentId",childrenList:i||"children"};var l={},n={},r=[];for(let c of e){let e=c[s.parentId];null==l[e]&&(l[e]=[]),n[c[s.id]]=c,l[e].push(c)}for(let c of e){let e=c[s.parentId];null==n[e]&&r.push(c)}for(let c of r)o(c);function o(e){if(null!==l[e[s.id]]&&(e[s.childrenList]=l[e[s.id]]),e[s.childrenList])for(let t of e[s.childrenList])o(t)}return r}},88575:function(e,t,a){a.d(t,{Z:function(){return S}});var i=a(73396),s=a(87139);const l={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},n=(0,i._)("span",null,"第",-1),r={style:{"padding-left":"1px","padding-right":"1px"}},o=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,i._)("span",null,"共",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),p=(0,i._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,i._)("span",null,"条",-1),f={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(e,t,a,g,_,y){const x=(0,i.up)("v-icon"),W=(0,i.up)("v-btn"),v=(0,i.up)("v-card");return(0,i.wg)(),(0,i.iD)("span",null,[e.paging&&a.pagingShow?((0,i.wg)(),(0,i.j4)(v,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:y.previousHandle},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{size:"28"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(W,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:y.nextHandle},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{size:"28"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,i._)("span",l,[n,(0,i._)("span",r,(0,s.zw)(e.current),1),o,c,(0,i._)("span",u,(0,s.zw)(e.page),1),m,p,(0,i._)("span",d,(0,s.zw)(e.totalNum),1),h]),(0,i._)("span",f,[a.showSearchBtn?((0,i.wg)(),(0,i.j4)(W,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:y.searchClick,variant:"plain",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{size:"24",icon:"mdi-magnify"}),(0,i.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(W,{onClick:y.refreshClick,style:(0,s.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0),e.items.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(e.items,((t,a)=>(0,i.WI)(e.$slots,"tableBody",{key:a,items:t,_index:a}))),128)):((0,i.wg)(),(0,i.iD)("p",w,[(0,i.Wm)(x,{icon:"mdi-emoticon-sad-outline"}),(0,i.Uk)(" 无数据！ ")]))])}var _=a(21801),y=a(37184);var x=a(20868),W={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:e,url:t}=this;e&&t&&this.initFunc()},methods:{previousHandle(){const{current:e}=this;1!=e?(this.current=e-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,x.LJ)("第一页！")},nextHandle(){const{current:e,page:t}=this;e>=t?(0,x.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(e=1,t){const{url:a,params:i={},children:s,method:l,formatData:n}=this;if(s)return this.items=s,void(this.paging=!1);const r=(0,_.Z)((0,_.Z)({pageNum:e,pageSize:10},i),t),{code:o,total:c=0,msg:u="",data:m,rows:p}=await(0,y.i)({method:l,url:a,payload:"post"==l?r:{},url_params:"get"==l?r:{}});200==o&&(this.totalNum=c,this.current=e,this.page=Math.ceil(c/r.pageSize),this.items=n?n(m||p||[]):m||p||[])},refreshClick(){const{refreshFunc:e}=this;!e&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((e=>Object.assign(e,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},v=a(40089);const k=(0,v.Z)(W,[["render",g]]);var S=k},96832:function(e,t,a){a.r(t),a.d(t,{default:function(){return He}});var i=a(21801),s=a(73396),l=a(87139);const n=(0,s._)("div",{style:{height:"50px"}},null,-1),r=(0,s._)("span",{class:"font-weight-medium"},"维修设备",-1),o={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},c=(0,s._)("p",{class:"font-weight-medium text"},"故障类型:",-1),u={class:"text-truncate font-weight-light"},m=(0,s._)("p",{class:"font-weight-medium text"},"维修类型:",-1),p={class:"text-truncate font-weight-light"},d=(0,s._)("p",{class:"font-weight-medium text"},"故障位置:",-1),h={class:"text-truncate font-weight-light"},f=(0,s._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),w=["onClick"],g=(0,s._)("p",{class:"font-weight-medium text"},"报修人:",-1),_={class:"text-truncate font-weight-light"},y=(0,s._)("p",{class:"font-weight-medium text"},"报修时间:",-1),x={class:"text-truncate font-weight-light"},W={key:0},v=(0,s._)("p",{class:"font-weight-medium text"},"取消人:",-1),k={class:"text-truncate font-weight-light"},S=(0,s._)("p",{class:"font-weight-medium text"},"取消时间:",-1),C={class:"text-truncate font-weight-light"},b=(0,s._)("span",{class:"font-weight-medium text"},"取消原因:",-1),O=["onClick"],q={key:1},T=(0,s._)("p",{class:"font-weight-medium text"},"维修人:",-1),V={class:"text-truncate font-weight-light"},$=(0,s._)("p",{class:"font-weight-medium text"},"维修结束时间:",-1),D={class:"text-truncate font-weight-light"},H={class:"text-truncate font-weight-medium text"},z={class:"text-truncate font-weight-medium text"},B=(0,s._)("span",{class:"font-weight-medium"},"维修设备",-1),F={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},N=(0,s._)("p",{class:"font-weight-medium text"},"故障类型:",-1),U={class:"text-truncate font-weight-light"},A=(0,s._)("p",{class:"font-weight-medium text"},"维修类型:",-1),I={class:"text-truncate font-weight-light"},R=(0,s._)("p",{class:"font-weight-medium text"},"故障位置:",-1),P={class:"text-truncate font-weight-light"},j=(0,s._)("p",{class:"font-weight-medium text"},"故障详细描述:",-1),L=["onClick"],Z=(0,s._)("p",{class:"font-weight-medium text"},"报修人:",-1),J={class:"text-truncate font-weight-light"},E=(0,s._)("p",{class:"font-weight-medium text"},"报修时间:",-1),M={class:"text-truncate font-weight-light"},G={key:0},K=(0,s._)("p",{class:"font-weight-medium text"},"取消人:",-1),Y={class:"text-truncate font-weight-light"},Q=(0,s._)("p",{class:"font-weight-medium text"},"取消时间:",-1),X={class:"text-truncate font-weight-light"},ee=(0,s._)("span",{class:"font-weight-medium text"},"取消原因:",-1),te=["onClick"],ae={key:1},ie=(0,s._)("p",{class:"font-weight-medium text"},"维修人:",-1),se={class:"text-truncate font-weight-light"},le=(0,s._)("p",{class:"font-weight-medium text"},"维修结束时间:",-1),ne={class:"text-truncate font-weight-light"},re={class:"text-truncate font-weight-medium text"},oe={class:"text-truncate font-weight-medium text"};function ce(e,t,a,ce,ue,me){const pe=(0,s.up)("v-tab"),de=(0,s.up)("v-tabs"),he=(0,s.up)("AppBarPage"),fe=(0,s.up)("v-badge"),we=(0,s.up)("v-col"),ge=(0,s.up)("v-row"),_e=(0,s.up)("v-btn"),ye=(0,s.up)("v-card"),xe=(0,s.up)("TableComponents"),We=(0,s.up)("v-window-item"),ve=(0,s.up)("v-window"),ke=(0,s.up)("SearchPage1"),Se=(0,s.up)("SearchPage2");return(0,s.wg)(),(0,s.iD)("span",null,[(0,s.Wm)(he,null,{appTabs:(0,s.w5)((()=>[(0,s.Wm)(de,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,s.w5)((()=>[(0,s.Wm)(pe,{value:"1","hide-slider":""},{default:(0,s.w5)((()=>[(0,s.Uk)("已填写")])),_:1}),(0,s.Wm)(pe,{value:"2","hide-slider":""},{default:(0,s.w5)((()=>[(0,s.Uk)("未填写")])),_:1})])),_:1},8,["modelValue"])])),_:1}),n,(0,s.Wm)(ve,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tab=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(We,{value:"1",class:"v-window-item-table"},{default:(0,s.w5)((()=>["1"==e.tab?((0,s.wg)(),(0,s.j4)(xe,{key:0,ref:"table1",url:"/iiot/equipmentRepairHistory/list",params:(0,i.Z)({state:"1"},e.pageSearchConfig1),showSearchBtn:!0,onSearchClick:me.searchClick1},{tableBody:(0,s.w5)((e=>[(0,s.Wm)(ye,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ge,{"no-gutters":"",class:"table-title"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(fe,{content:e._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,s.Wm)(we,{cols:"3"},{default:(0,s.w5)((()=>[r])),_:1}),(0,s.Wm)(we,{cols:"8"})])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("p",o,(0,l.zw)(e.items.equipmentName),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[c])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",u,(0,l.zw)(e.items.faultTypeCn),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[m])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",p,(0,l.zw)(me.FormatDictionary("equipment_repair_type",e.items.reportType)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[d])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",h,(0,l.zw)(e.items.faultStationCn),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[f])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",{class:"text-truncate font-weight-light",onClick:t=>me.GlobalTooltipFunc(e.items.problemDesc)},(0,l.zw)(e.items.problemDesc),9,w)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",_,(0,l.zw)(e.items.reportBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[y])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",x,(0,l.zw)(e.items.reportTime),1)])),_:2},1024)])),_:2},1024),e.items.cancelBy?((0,s.wg)(),(0,s.iD)("span",W,[(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[v])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",k,(0,l.zw)(e.items.cancelBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[S])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",C,(0,l.zw)(e.items.cancelTime),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"12"},{default:(0,s.w5)((()=>[b,(0,s._)("span",{onClick:t=>me.GlobalTooltipFunc(e.items.cancelReason)},(0,l.zw)(e.items.cancelReason),9,O)])),_:2},1024)])),_:2},1024)])):(0,s.kq)("",!0),e.items.cancelBy?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",q,[(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[T])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",V,(0,l.zw)(e.items.maintainRepairBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[$])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",D,(0,l.zw)(e.items.maintainRepairTime),1)])),_:2},1024)])),_:2},1024)])),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"6"},{default:(0,s.w5)((()=>[(0,s._)("p",H,"是否外修: "+(0,l.zw)(e.items.isRepair?"是":"否"),1)])),_:2},1024),(0,s.Wm)(we,{cols:"6"},{default:(0,s.w5)((()=>[(0,s._)("p",z,"是否报废: "+(0,l.zw)(e.items.isStop?"是":"否"),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"6"}),(0,s.Wm)(we,{cols:"6",class:"text-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(_e,{onClick:t=>me.detailClick(e),color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["params","onSearchClick"])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(We,{value:"2",class:"v-window-item-table"},{default:(0,s.w5)((()=>["2"==e.tab?((0,s.wg)(),(0,s.j4)(xe,{key:0,ref:"table2",url:"/iiot/equipmentRepairHistory/list",params:(0,i.Z)({state:"0"},e.pageSearchConfig2),showSearchBtn:!0,onSearchClick:me.searchClick2},{tableBody:(0,s.w5)((e=>[(0,s.Wm)(ye,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ge,{"no-gutters":"",class:"table-title"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"1"},{default:(0,s.w5)((()=>[(0,s.Wm)(fe,{content:e._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,s.Wm)(we,{cols:"3"},{default:(0,s.w5)((()=>[B])),_:1}),(0,s.Wm)(we,{cols:"8"})])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("p",F,(0,l.zw)(e.items.equipmentName),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[N])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",U,(0,l.zw)(e.items.faultTypeCn),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[A])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",I,(0,l.zw)(me.FormatDictionary("equipment_repair_type",e.items.reportType)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[R])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",P,(0,l.zw)(e.items.faultStationCn),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[j])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",{class:"text-truncate font-weight-light",onClick:t=>me.GlobalTooltipFunc(e.items.problemDesc)},(0,l.zw)(e.items.problemDesc),9,L)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[Z])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",J,(0,l.zw)(e.items.reportBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[E])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",M,(0,l.zw)(e.items.reportTime),1)])),_:2},1024)])),_:2},1024),e.items.cancelBy?((0,s.wg)(),(0,s.iD)("span",G,[(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[K])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",Y,(0,l.zw)(e.items.cancelBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[Q])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",X,(0,l.zw)(e.items.cancelTime),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"12"},{default:(0,s.w5)((()=>[ee,(0,s._)("span",{onClick:t=>me.GlobalTooltipFunc(e.items.cancelReason)},(0,l.zw)(e.items.cancelReason),9,te)])),_:2},1024)])),_:2},1024)])):(0,s.kq)("",!0),e.items.cancelBy?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",ae,[(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[ie])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",se,(0,l.zw)(e.items.maintainRepairBy),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4"},{default:(0,s.w5)((()=>[le])),_:1}),(0,s.Wm)(we,{cols:"8"},{default:(0,s.w5)((()=>[(0,s._)("p",ne,(0,l.zw)(e.items.maintainRepairTime),1)])),_:2},1024)])),_:2},1024)])),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"6"},{default:(0,s.w5)((()=>[(0,s._)("p",re,"是否外修: "+(0,l.zw)(e.items.isRepair?"是":"否"),1)])),_:2},1024),(0,s.Wm)(we,{cols:"6"},{default:(0,s.w5)((()=>[(0,s._)("p",oe,"是否报废: "+(0,l.zw)(e.items.isStop?"是":"否"),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(ge,{"no-gutters":"",class:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{cols:"4",class:"text-center"}),(0,s.Wm)(we,{cols:"4",class:"text-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(_e,{onClick:t=>me.experienceEdit(e),color:"orange mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("经验填写")])),_:2},1032,["onClick"])])),_:2},1024),(0,s.Wm)(we,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(_e,{onClick:t=>me.detailClick(e),color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["params","onSearchClick"])):(0,s.kq)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(ke,{ref:"searchPage1",onResetHandle:me.resetHandle1,onSearchHandle:me.searchHandle1},null,8,["onResetHandle","onSearchHandle"]),(0,s.Wm)(Se,{ref:"searchPage2",onResetHandle:me.resetHandle2,onSearchHandle:me.searchHandle2},null,8,["onResetHandle","onSearchHandle"])])}a(57658);var ue=a(76496),me=a(88575);const pe=(0,s._)("div",{style:{height:"52px"}},null,-1),de={style:{"margin-top":"32px"}};function he(e,t,a,i,l,n){const r=(0,s.up)("SelectComponents"),o=(0,s.up)("DatePickerComponents"),c=(0,s.up)("v-btn"),u=(0,s.up)("v-col"),m=(0,s.up)("v-row"),p=(0,s.up)("van-popup");return(0,s.wg)(),(0,s.iD)("span",null,[(0,s.Wm)(p,{show:e.drawer,"onUpdate:show":t[7]||(t[7]=t=>e.drawer=t),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,s.w5)((()=>[pe,(0,s.Wm)(r,{modelValue:e.equipment,"onUpdate:modelValue":t[0]||(t[0]=t=>e.equipment=t),ref:"selectContent",label:"设备",placeholderSearch:"请输入设备编号",showSearch:"",option:e.equipmentSelectOption,onOnSearchChange:n.equipmentSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,s.Wm)(o,{modelValue:e.dateStart,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dateStart=t),label:"报修开始日期",ref:"dateTimeStart","columns-type":["year","month","day"]},null,8,["modelValue"]),(0,s.Wm)(o,{modelValue:e.dateOver,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dateOver=t),label:"报修结束时间",ref:"dateTimeOver","columns-type":["year","month","day"]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:e.user,"onUpdate:modelValue":t[3]||(t[3]=t=>e.user=t),label:"报修人",ref:"user",option:e.userSelectOption},null,8,["modelValue","option"]),(0,s.Wm)(r,{modelValue:e.userAffirm,"onUpdate:modelValue":t[4]||(t[4]=t=>e.userAffirm=t),label:"维修人",ref:"userAffirm",option:e.userAffirmSelectOption},null,8,["modelValue","option"]),(0,s.Wm)(r,{modelValue:e.property,"onUpdate:modelValue":t[5]||(t[5]=t=>e.property=t),ref:"select2",label:"维修类型",option:e.propertySelectOption},null,8,["modelValue","option"]),(0,s._)("div",de,[(0,s.Wm)(m,{"no-gutters":""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:t[6]||(t[6]=()=>e.drawer=!1),density:"compact",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("关闭")])),_:1})])),_:1}),(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:n.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("重置")])),_:1},8,["onClick"])])),_:1}),(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:n.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}var fe=a(2243),we=a(37184),ge=a(21655),_e=a(20868),ye=a(89337),xe=a(5878),We={components:{SelectComponents:fe.Z,DatePickerComponents:ge.Z},emits:["searchHandle","resetHandle"],data:()=>({showFactory:!0,drawer:!1,dateStart:"",dateOver:"",show:!1,fieldValue:"",options:[],factoryID:"",equipment:"",equipmentSelectOption:[],equipmentSelectOptionBuffer:[],user:"",userSelectOption:[],userAffirm:"",userAffirmSelectOption:[],property:"",propertySelectOption:[]}),created(){this.initFunc(),this.equipmentHTTP(),this.initUserHTTP()},methods:{FormatDictionary(e="",t=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=a[e]||[],s=i.filter((e=>t==e.value))[0]||{};return s},resetClick(){this.factoryID="",this.equipment="",this.dateStart="",this.dateOver="",this.user="",this.userAffirm="",this.fieldValue="",this.property="",this.$refs.select2.reset(),this.$refs.selectContent.reset(),this.$refs.dateTimeStart.reset(),this.$refs.dateTimeOver.reset(),this.$refs.user.reset(),this.$refs.userAffirm.reset(),this.showFactory=!1,this.$nextTick((()=>{this.showFactory=!0})),this.$emit("resetHandle",{})},async initFunc(){const e=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t=e["equipment_repair_type"]||[];this.propertySelectOption=t.map((e=>Object.assign({text:e.lable,value:e.value})));const{data:a=[]}=await(0,ye.jt)(),i=(0,xe.b)(a,"tmBasNodeLevelId","parentId");this.options=i},async equipmentHTTP(e=""){const{fieldSelectValue:t={}}=this,{code:a,data:i=[]}=await(0,we.i)({url:"/iiot/equipment/list",method:"get",url_params:{equipmentType:"星邦设备区域",equipmentNo:e}});200==a&&(this.equipmentSelectOptionData=i,this.equipmentSelectOptionBuffer=i,this.equipmentSelectOption=i.map((e=>Object.assign({text:`${e.equipmentNo}-${e.equipmentName}`,value:e.tmBasEquipmentId}))).splice(0,100))},async initUserHTTP(){const{data:e=[]}=await(0,ye.NM)();this.userSelectOption=e.map((e=>Object.assign({text:`${e.userName}-${e.nickName}`,value:e.userName}))),this.userAffirmSelectOption=e.map((e=>Object.assign({text:`${e.userName}-${e.nickName}`,value:e.userName})))},onFinish({selectedOptions:e}){if(!e.length)return;let t=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=t,this.fieldValue=e.map((e=>e.nodeLevelName)).join("/")},searchClick(){if(this.dateStart&&!this.dateOver)return void(0,_e.LJ)("结束日期必填！");if(!this.dateStart&&this.dateOver)return void(0,_e.LJ)("开始日期必填！");if(new Date(this.dateStart).getTime()>new Date(this.dateOver).getTime())return void(0,_e.LJ)("结束日期必须大于开始日期！");const e={tmBasEquipmentId:this.equipment,beginTime:this.dateStart,endTime:this.dateOver,reportBy:this.user,maintainRepairBy:this.userAffirm,reportType:this.property};this.$emit("searchHandle",e),this.drawer=!1},showDrawer(){this.drawer=!0},async equipmentSearchChange(e=""){this.equipmentHTTP(e)}}},ve=a(40089);const ke=(0,ve.Z)(We,[["render",he]]);var Se=ke;const Ce=(0,s._)("div",{style:{height:"52px"}},null,-1),be={style:{"margin-top":"32px"}};function Oe(e,t,a,i,l,n){const r=(0,s.up)("SelectComponents"),o=(0,s.up)("DatePickerComponents"),c=(0,s.up)("v-btn"),u=(0,s.up)("v-col"),m=(0,s.up)("v-row"),p=(0,s.up)("van-popup");return(0,s.wg)(),(0,s.iD)("span",null,[(0,s.Wm)(p,{show:e.drawer,"onUpdate:show":t[7]||(t[7]=t=>e.drawer=t),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,s.w5)((()=>[Ce,(0,s.Wm)(r,{modelValue:e.equipment,"onUpdate:modelValue":t[0]||(t[0]=t=>e.equipment=t),ref:"selectContent",label:"设备",placeholderSearch:"请输入设备编号",showSearch:"",option:e.equipmentSelectOption,onOnSearchChange:n.equipmentSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,s.Wm)(o,{modelValue:e.dateStart,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dateStart=t),label:"报修开始日期",ref:"dateTimeStart","columns-type":["year","month","day"]},null,8,["modelValue"]),(0,s.Wm)(o,{modelValue:e.dateOver,"onUpdate:modelValue":t[2]||(t[2]=t=>e.dateOver=t),label:"报修结束时间",ref:"dateTimeOver","columns-type":["year","month","day"]},null,8,["modelValue"]),(0,s.Wm)(r,{modelValue:e.user,"onUpdate:modelValue":t[3]||(t[3]=t=>e.user=t),label:"报修人",ref:"user",option:e.userSelectOption},null,8,["modelValue","option"]),(0,s.Wm)(r,{modelValue:e.userAffirm,"onUpdate:modelValue":t[4]||(t[4]=t=>e.userAffirm=t),label:"维修人",ref:"userAffirm",option:e.userAffirmSelectOption},null,8,["modelValue","option"]),(0,s.Wm)(r,{modelValue:e.property,"onUpdate:modelValue":t[5]||(t[5]=t=>e.property=t),ref:"select2",label:"维修类型",option:e.propertySelectOption},null,8,["modelValue","option"]),(0,s._)("div",be,[(0,s.Wm)(m,{"no-gutters":""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:t[6]||(t[6]=()=>e.drawer=!1),density:"compact",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("关闭")])),_:1})])),_:1}),(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:n.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("重置")])),_:1},8,["onClick"])])),_:1}),(0,s.Wm)(u,{cols:"4",class:"text-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{onClick:n.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}var qe={components:{SelectComponents:fe.Z,DatePickerComponents:ge.Z},emits:["searchHandle","resetHandle"],data:()=>({showFactory:!0,drawer:!1,dateStart:"",dateOver:"",show:!1,fieldValue:"",options:[],factoryID:"",equipment:"",equipmentSelectOption:[],equipmentSelectOptionBuffer:[],user:"",userSelectOption:[],userAffirm:"",userAffirmSelectOption:[],property:"",propertySelectOption:[]}),created(){this.initFunc(),this.equipmentHTTP(),this.initUserHTTP()},methods:{FormatDictionary(e="",t=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=a[e]||[],s=i.filter((e=>t==e.value))[0]||{};return s},resetClick(){this.factoryID="",this.equipment="",this.dateStart="",this.dateOver="",this.user="",this.userAffirm="",this.fieldValue="",this.property="",this.$refs.select2.reset(),this.$refs.selectContent.reset(),this.$refs.dateTimeStart.reset(),this.$refs.dateTimeOver.reset(),this.$refs.user.reset(),this.$refs.userAffirm.reset(),this.showFactory=!1,this.$nextTick((()=>{this.showFactory=!0})),this.$emit("resetHandle",{})},async initFunc(){const e=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),t=e["equipment_repair_type"]||[];this.propertySelectOption=t.map((e=>Object.assign({text:e.lable,value:e.value})));const{data:a=[]}=await(0,ye.jt)(),i=(0,xe.b)(a,"tmBasNodeLevelId","parentId");this.options=i},async equipmentHTTP(e=""){const{fieldSelectValue:t={}}=this,{code:a,data:i=[]}=await(0,we.i)({url:"/iiot/equipment/list",method:"get",url_params:{equipmentType:"星邦设备区域",equipmentNo:e}});200==a&&(this.equipmentSelectOptionData=i,this.equipmentSelectOptionBuffer=i,this.equipmentSelectOption=i.map((e=>Object.assign({text:`${e.equipmentNo}-${e.equipmentName}`,value:e.tmBasEquipmentId}))).splice(0,100))},async initUserHTTP(){const{data:e=[]}=await(0,ye.NM)();this.userSelectOption=e.map((e=>Object.assign({text:`${e.userName}-${e.nickName}`,value:e.userName}))),this.userAffirmSelectOption=e.map((e=>Object.assign({text:`${e.userName}-${e.nickName}`,value:e.userName})))},onFinish({selectedOptions:e}){if(!e.length)return;let t=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=t,this.fieldValue=e.map((e=>e.nodeLevelName)).join("/")},searchClick(){if(this.dateStart&&!this.dateOver)return void(0,_e.LJ)("结束日期必填！");if(!this.dateStart&&this.dateOver)return void(0,_e.LJ)("开始日期必填！");if(new Date(this.dateStart).getTime()>new Date(this.dateOver).getTime())return void(0,_e.LJ)("结束日期必须大于开始日期！");const e={tmBasEquipmentId:this.equipment,beginTime:this.dateStart,endTime:this.dateOver,reportBy:this.user,maintainRepairBy:this.userAffirm,reportType:this.property};this.$emit("searchHandle",e),this.drawer=!1},showDrawer(){this.drawer=!0},async equipmentSearchChange(e=""){this.equipmentHTTP(e)}}};const Te=(0,ve.Z)(qe,[["render",Oe]]);var Ve=Te,$e=(a(21472),{components:{AppBarPage:ue.Z,SearchPage1:Se,SearchPage2:Ve,TableComponents:me.Z},data:()=>({tab:"1",pageSearchConfig1:{},pageSearchConfig2:{}}),created(){this.initFunc()},methods:{GlobalTooltipFunc(e=""){(0,_e.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary(e="",t=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=a[e]||[],s=i.filter((e=>t==e.value))[0]||{};return s},initFunc(){const{tabs:e}=this.$route.query;e&&(this.tab=e)},async experienceEdit(e){const{items:t}=e;this.$router.push({path:"/equipmentMessage/detail",query:{ttAdRepairId:t.ttAdRepairId}})},detailClick(e){const{items:t}=e;this.$router.push({path:"/equipmentMessage/maintainDetail",query:{ttAdRepairId:e.items.ttAdRepairId,filePath:e.items.filePath}})},searchClick1(){this.$refs.searchPage1.showDrawer()},searchHandle1(e={}){this.pageSearchConfig1=e,this.$nextTick((()=>{this.$refs.table1.initFunc(1)}))},resetHandle1(e){this.pageSearchConfig1={},this.$nextTick((()=>{this.$refs.table1.initFunc(1)}))},searchClick2(){this.$refs.searchPage2.showDrawer()},searchHandle2(e={}){this.pageSearchConfig2=e,this.$nextTick((()=>{this.$refs.table2.initFunc(1)}))},resetHandle2(e){this.pageSearchConfig2={},this.$nextTick((()=>{this.$refs.table2.initFunc(1)}))}}});const De=(0,ve.Z)($e,[["render",ce]]);var He=De}}]);
//# sourceMappingURL=chunk.6832.1689577235749.js.map