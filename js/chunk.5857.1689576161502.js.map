{"version":3,"file":"js/chunk.5857.1689576161502.js","mappings":"iNAQgBA,EAAAA,EAAAA,GAA6C,QAAvCC,MAAA,wBAA0B,UAAM,G,GASnCC,MAAM,mDAAmDC,MAAM,W,GAKjED,MAAM,6B,GAEPF,EAAAA,EAAAA,GAAiB,YAAX,QAAI,G,GAEdA,EAAAA,EAAAA,GAA+B,OAA1BC,MAAA,gBAAmB,S,GAkC5BD,EAAAA,EAAAA,GAAgC,OAA3BC,MAAA,iBAAoB,S,GAEhBC,MAAM,6B,GAEPF,EAAAA,EAAAA,GAAiB,YAAX,QAAI,G,GAEdA,EAAAA,EAAAA,GAA+B,OAA1BC,MAAA,gBAAmB,S,GAqCvBC,MAAM,a,GAKXF,EAAAA,EAAAA,GAAiC,OAA5BC,MAAA,iBAAqB,S,6QA3G9BG,EAAAA,EAAAA,IA4GO,cA3GHC,EAAAA,EAAAA,IACaC,IAEbD,EAAAA,EAAAA,IAQQE,EAAA,CARD,gBAAWN,MAAA,yB,mBACd,IAGQ,EAHRI,EAAAA,EAAAA,IAGQG,EAAA,CAHDC,KAAK,MAAI,C,kBACZ,IAA4D,EAA5DJ,EAAAA,EAAAA,IAA4DK,EAAA,CAApDC,KAAK,YAAYC,KAAK,KAAKT,MAAM,YACzCU,K,OAEJR,EAAAA,EAAAA,IAEQG,EAAA,CAFDC,KAAK,IAAIP,MAAM,aAAaD,MAAA,6B,OAKvCI,EAAAA,EAAAA,IAIQE,EAAA,CAJD,iBAAU,C,kBACb,IAEQ,EAFRF,EAAAA,EAAAA,IAEQG,EAAA,CAFDC,KAAK,KAAKR,MAAA,8C,mBACb,IAAkG,EAAlGD,EAAAA,EAAAA,GAAkG,IAAlGc,GAAkGC,EAAAA,EAAAA,IAApBC,EAAAC,eAAa,M,gBAInGZ,EAAAA,EAAAA,IAqCUa,EAAA,CArCDC,UAAU,IAAIC,QAAA,GAAQlB,MAAM,Q,mBACjC,IAGM,EAHNF,EAAAA,EAAAA,GAGM,MAHNqB,EAGM,EAFFhB,EAAAA,EAAAA,IAA8EK,EAAA,CAAtEE,KAAK,UAAUT,MAAM,UAAUQ,KAAK,2BAC5CW,IAEJC,GACAlB,EAAAA,EAAAA,IAKEmB,EAAA,C,WAJWR,EAAAS,SAASC,gB,qCAATV,EAAAS,SAASC,gBAAeC,GACjCC,MAAM,OACNC,SAAA,GACCC,OAAQd,EAAAe,Y,iCAEb1B,EAAAA,EAAAA,IAKEmB,EAAA,C,WAJWR,EAAAS,SAASO,oB,qCAAThB,EAAAS,SAASO,oBAAmBL,GACrCC,MAAM,OACNC,SAAA,GACCC,OAAQd,EAAAiB,gB,iCAGb5B,EAAAA,EAAAA,IAWE6B,EAAA,C,WAVWlB,EAAAS,SAASU,Y,qCAATnB,EAAAS,SAASU,YAAWR,GAC7BS,KAAK,IACLC,SAAA,GACAT,MAAM,SACNU,KAAK,WACLC,aAAa,MACbC,YAAY,MACZC,UAAU,MACVZ,SAAA,GACA,sB,wBAGJxB,EAAAA,EAAAA,IAEEqC,EAAA,C,WADW1B,EAAA2B,e,qCAAA3B,EAAA2B,eAAchB,I,gCAM/BiB,GACAvC,EAAAA,EAAAA,IAwCUa,EAAA,CAxCDC,UAAU,IAAIC,QAAA,GAAQlB,MAAM,Q,mBACjC,IAGM,EAHNF,EAAAA,EAAAA,GAGM,MAHN6C,EAGM,EAFFxC,EAAAA,EAAAA,IAA0EK,EAAA,CAAlEE,KAAK,UAAUT,MAAM,UAAUQ,KAAK,uBAC5CmC,IAEJC,GACA1C,EAAAA,EAAAA,IAKEmB,EAAA,C,WAJWR,EAAAS,SAASuB,wB,qCAAThC,EAAAS,SAASuB,wBAAuBrB,GACzCC,MAAM,OACNC,SAAA,GACCC,OAAQd,EAAAiC,0B,iCAsBb5C,EAAAA,EAAAA,IAAmG6B,EAAA,C,WAA/ElB,EAAAkC,iB,qCAAAlC,EAAAkC,iBAAgBvB,GAAEa,YAAY,MAAMD,aAAa,MAAMX,MAAM,MAAMuB,SAAA,I,iCAU3FnD,EAAAA,EAAAA,GAIM,MAJNoD,EAIM,EAHF/C,EAAAA,EAAAA,IAEQgD,EAAA,CAFDC,MAAA,GAAMnD,MAAM,UAAWoD,QAAOC,EAAAC,Q,mBAAQ,IAE7C,UAF6C,W,sBAIjDC,G,0FAiBN,G,SAAA,CACEC,WAAW,CACPC,WAAU,IACVC,iBAAgB,IAChBC,wBAAuB,IACvBC,qBAAoBA,EAAAA,GAExBC,KAAMA,KAAA,CACFd,iBAAiB,GAEjBjC,cAAc,GACd0B,eAAe,GAIflB,SAAS,CACLC,gBAAgB,GAChBM,oBAAoB,GACpBG,YAAY,GAEZa,wBAAwB,GACxBiB,KAAK,GACLC,KAAK,IAKTnC,WAAW,GAQXE,eAAe,GAUfgB,yBAAyB,GAQzBkB,sBAAsB,KAK1BC,UACIC,KAAKC,WACLD,KAAKE,eACLF,KAAKG,mBACLH,KAAKI,gBAELJ,KAAKK,UACT,EACAC,QAAS,CAELC,iBACI,MAAM,YAACC,EAAY,GAAE,cAAC5D,EAAc,GAAE,iBAAC6D,GAAkBT,KAAKU,OAAOC,MAIrEX,KAAK5C,SAASyC,KAAK,kBAEnB,MAAMe,EAAOC,KAAKC,MAAOC,aAAaC,QAAQ,mBAAmB,MACjEhB,KAAKnB,iBAAkB,GAAE+B,EAAO,eAAeA,EAAO,cAEtD,MAAM,KAACK,EAAI,KAACtB,EAAK,CAAC,SAAUuB,EAAAA,EAAAA,GAAW,CAEnCC,IAAK,gCAA+BV,IACpCW,OAAO,QAGF,KAANH,IACCjB,KAAKpD,cAAc+C,EAAK/C,cAGhC,EAEA2D,iBACI,MAAM,KAACZ,EAAK,UAAU0B,EAAAA,EAAAA,MACtBrB,KAAKtC,WAAWiC,EAAK2B,KAAIC,GAAIC,OAAOC,OAAO,CAACC,KAAM,GAAEH,EAAEI,eAAeJ,EAAEK,gBAAgBC,MAAMN,EAAEO,oBACnG,EAEAvB,qBACI,MAAM,KAACZ,EAAK,UAAUoC,EAAAA,EAAAA,MACtB/B,KAAKpC,eAAe+B,EAAK2B,KAAIC,GAAIC,OAAOC,OAAO,CAACC,KAAM,GAAEH,EAAES,WAAWT,EAAEU,YAAYJ,MAAMN,EAAEW,gBAC/F,EAEA3B,yBACI,MAAM,KAACZ,EAAK,UAAUwC,EAAAA,EAAAA,MACtBnC,KAAKpB,yBAAyBe,EAAK2B,KAAIC,GAAIC,OAAOC,OAAO,CAACC,KAAM,GAAEH,EAAEa,YAAYP,MAAMN,EAAEc,aAC5F,EAEA9B,sBACI,MAAM,KAACZ,EAAK,UAAU2C,EAAAA,EAAAA,MACtBtC,KAAKF,sBAAsBH,EAAK2B,KAAIC,GAAIC,OAAOC,OAAO,CAACC,KAAM,GAAEH,EAAEgB,YAAYhB,EAAEiB,WAAWX,MAAMY,OAAOlB,EAAEgB,aAC7G,EAGAhC,eACI,MAAM,gBAAClD,EAAe,oBAACM,EAAmB,YAACG,EAAW,wBAACa,EAAuB,KAACiB,GAAMI,KAAK5C,UACpF,iBAACqD,GAAkBT,KAAKU,OAAOC,MAIrC,IAAItD,EAEA,YADAqF,EAAAA,EAAAA,IAAc,WAIlB,IAAI/E,EAEA,YADA+E,EAAAA,EAAAA,IAAc,WAIlB,IAAI5E,EAAY6E,OAEZ,YADAD,EAAAA,EAAAA,IAAc,aAKlB,IAAI/D,EAEA,YADA+D,EAAAA,EAAAA,IAAc,WASlB,MAAM,KAACzB,SAAY2B,EAAAA,EAAAA,IAAW,CAC1BC,QAAQ,CACJf,iBAAkBzE,EAClB6E,aAAcvE,EACdmF,aAAchF,EAEdiF,WAAYpE,EAGZ8B,iBAAkBA,EAElBuC,SAAWhD,KAAK1B,eAAegD,KAAIC,GAAGA,EAAEJ,MAAK8B,UAK5C,KAANhC,KACCiC,EAAAA,EAAAA,IAAiB,SAKjBlD,KAAKmD,QAAQC,IAAI,GAGzB,K,WChSR,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://sinoboom-mom/./src/views/equipmentRepairs/repairs.vue","webpack://sinoboom-mom/./src/views/equipmentRepairs/repairs.vue?02ec"],"sourcesContent":["<template>\r\n    <span>\r\n        <AppBarPage>\r\n        </AppBarPage>\r\n        \r\n        <v-row no-gutters style=\"margin-bottom:2px;\">\r\n            <v-col cols=\"11\">\r\n                <v-icon icon=\"mdi-tools\" size=\"16\" color=\"#3F51B5\"></v-icon>\r\n                <span style=\"padding-left:6px;\">当前报修设备</span>\r\n            </v-col>\r\n            <v-col cols=\"1\" class=\"text-right\" style=\"padding-right:6px\">\r\n                <!-- <p class=\"text-truncate font-weight-medium text-right text-teal-lighten-1\" color=\"primary\">{{equipmentName }}</p> -->\r\n            </v-col>\r\n        </v-row>\r\n\r\n        <v-row no-gutters>\r\n            <v-col cols=\"12\" style=\"margin-bottom:4px;padding-left: 2px;\">\r\n                <p class=\"font-weight-medium text-left text-teal-lighten-1\" color=\"primary\">{{equipmentName }}</p>\r\n            </v-col>\r\n        </v-row>\r\n\r\n        <v-sheet elevation=\"2\" rounded class=\"pa-1\">\r\n            <div class=\"text-h7 card-title-index1\">\r\n                <v-icon size=\"x-small\" color=\"#26C6DA\" icon=\"mdi-file-document-edit\"></v-icon>\r\n                <span>故障确认</span>\r\n            </div>\r\n            <div style=\"height:8px;\"></div>\r\n            <SelectComponents \r\n                v-model=\"formData.typeSelectValue\"\r\n                label=\"故障类型\"\r\n                required\r\n                :option=\"typeOption\"\r\n            />\r\n            <SelectComponents \r\n                v-model=\"formData.locationSelectValue\"\r\n                label=\"故障位置\"\r\n                required\r\n                :option=\"locationOption\"\r\n            />\r\n\r\n            <van-field\r\n                v-model=\"formData.description\"\r\n                rows=\"2\"\r\n                autosize\r\n                label=\"故障详细描述\"\r\n                type=\"textarea\"\r\n                autocomplete=\"off\"\r\n                placeholder=\"请输入\"\r\n                maxlength=\"200\"\r\n                required\r\n                show-word-limit\r\n            />\r\n\r\n            <UploaderImageComponents \r\n                v-model=\"bufferFileList\"\r\n            />\r\n\r\n\r\n        </v-sheet>\r\n\r\n        <div style=\"height:12px;\"></div>\r\n        <v-sheet elevation=\"2\" rounded class=\"pa-1\">\r\n            <div class=\"text-h7 card-title-index1\">\r\n                <v-icon size=\"x-small\" color=\"#3F51B5\" icon=\"mdi-account-wrench\"></v-icon>\r\n                <span>报修确认</span>\r\n            </div>\r\n            <div style=\"height:8px;\"></div>\r\n            <SelectComponents \r\n                v-model=\"formData.maintainTypeSelectValue\"\r\n                label=\"维修类型\"\r\n                required\r\n                :option=\"maintainTypeSelectOption\"\r\n            />\r\n\r\n            <!-- <van-field \r\n                v-model=\"formData.user\"\r\n                label=\"报修人\" \r\n                placeholder=\"请输入\" \r\n            /> -->\r\n            <!-- <SelectComponents \r\n                v-model=\"formData.user\"\r\n                label=\"报修人\"\r\n                required\r\n                :option=\"repairmanSelectOption\"\r\n            /> -->\r\n            <!-- <v-row no-gutters class=\"text\">\r\n                <v-col cols=\"4\">\r\n                    <p class=\"font-weight-medium text\">报修人:</p>\r\n                </v-col>\r\n                <v-col cols=\"8\">\r\n                    <p class=\"text-truncate font-weight-light\">q'q'qqqq</p>\r\n                </v-col>\r\n            </v-row> -->\r\n            <van-field v-model=\"repairsPersonnel\" placeholder=\"请输入\" autocomplete=\"off\" label=\"报修人\" readonly  />\r\n\r\n\r\n            <!-- <van-field \r\n                v-model=\"formData.date\"\r\n                label=\"报修时间\" \r\n                readonly\r\n            /> -->\r\n        </v-sheet>\r\n\r\n        <div class=\"mt-3 mb-4 \">\r\n            <v-btn block color=\"primary\" @click=\"submit\">\r\n                确定\r\n            </v-btn>\r\n        </div>\r\n        <div style=\"height: 52px;\"></div>\r\n    </span>\r\n</template>\r\n<script>\r\n    import AppBarPage from '@/components/AppBar.vue'\r\n    import SelectComponents from '@/packages/Select.vue'\r\n    import DatePickerComponents from '@/packages/DatePicker.vue'\r\n    import UploaderImageComponents from '@/packages/UploaderImage.vue'\r\n\r\n    import {httpHandle} from '@/http/http'  // api\r\n\r\n    import {FaultTypeHTTP,FaultPositionHTTP,MaintainTypeHTTP,RepairmanHTTP,SubmitHTTP} from '@/http/equipment/repairs'   // api\r\n\r\n\r\n    import { showSuccessToast,showFailToast } from 'vant'\r\n    import { OBJECTMEMBER_TYPES } from '@babel/types'\r\n\r\n  export default {\r\n    components:{\r\n        AppBarPage,\r\n        SelectComponents,\r\n        UploaderImageComponents,\r\n        DatePickerComponents\r\n    },\r\n    data: () => ({\r\n        repairsPersonnel:\"\",   // 报修人\r\n\r\n        equipmentName:\"\",   // 设备\r\n        bufferFileList:[],  // 缓存图片\r\n\r\n\r\n        // 表单数据\r\n        formData:{\r\n            typeSelectValue:\"\",  //  故障类型    \r\n            locationSelectValue:\"\",   // 故障位置\r\n            description:\"\",   // 描述\r\n\r\n            maintainTypeSelectValue:\"\",   // 维修类型\r\n            user:\"\",                    // 报修人\r\n            date:\"\",  // 报修时间\r\n        },\r\n\r\n\r\n        // 故障类型 数据\r\n        typeOption:[\r\n            // { text: '动力系统故障', value: '1' },\r\n            // { text: '电气系统故障', value: '2' },\r\n            // { text: '工具道具故障', value: '3' },\r\n            // { text: '网路故障', value: '4' },\r\n        ],\r\n\r\n        // 故障位置 数据\r\n        locationOption:[\r\n            // { text: '动力系统', value: '1' },\r\n            // { text: '电气系统', value: '2' },\r\n            // { text: '工具道具', value: '3' },\r\n            // { text: '网路', value: '4' },\r\n        ],\r\n\r\n\r\n\r\n        // 维修类型 数据\r\n        maintainTypeSelectOption:[\r\n            // { text: '动力系统7', value: '1' },\r\n            // { text: '电气系统7', value: '2' },\r\n            // { text: '工具道具7', value: '3' },\r\n            // { text: '网路7', value: '4' },\r\n        ],\r\n\r\n        // 报修人 数据\r\n        repairmanSelectOption:[\r\n\r\n        ],\r\n        \r\n    }),\r\n    created(){\r\n        this.initType()\r\n        this.initPosition()\r\n        this.initMaintainType()\r\n        this.initRepairman()\r\n        \r\n        this.initTime()\r\n    },\r\n    methods: {\r\n        // 初始化\r\n        async initTime(){\r\n            const {equipmentNo='',equipmentName='',tmBasEquipmentId}=this.$route.query\r\n\r\n\r\n\r\n            this.formData.date=\"2023-2-23 15:33\"\r\n\r\n            const _json2=JSON.parse( localStorage.getItem(\"bufferUserInfo\")||\"{}\" )\r\n            this.repairsPersonnel=`${_json2[\"userName\"]}-${_json2[\"nickName\"]}`\r\n        \r\n            const {code,data={}}= await httpHandle({\r\n                // url:'/iiot/abnormal',\r\n                url:`/iiot/equipment/getEquipment/${tmBasEquipmentId}`,\r\n                method:\"get\",\r\n            })\r\n\r\n            if(code==200){\r\n                this.equipmentName=data.equipmentName\r\n            }\r\n        \r\n        },\r\n        // 故障类型 下拉数据\r\n        async initType(){\r\n            const {data=[]}=await FaultTypeHTTP()\r\n            this.typeOption=data.map(o=> Object.assign({text:`${o.faultTypeNo}-${o.faultTypeName}`,value:o.tmBasFaultTypeId}))\r\n        },\r\n        // 故障位置\r\n        async initPosition(){\r\n            const {data=[]}=await FaultPositionHTTP()\r\n            this.locationOption=data.map(o=> Object.assign({text:`${o.faultNo}-${o.faultName}`,value:o.tmBasFaultId}))\r\n        },\r\n        // 维修类型\r\n        async initMaintainType(){\r\n            const {data=[]}=await MaintainTypeHTTP()\r\n            this.maintainTypeSelectOption=data.map(o=> Object.assign({text:`${o.dictLabel}`,value:o.dictValue}))\r\n        },\r\n        // 报修人\r\n        async initRepairman(){\r\n            const {data=[]}=await RepairmanHTTP()\r\n            this.repairmanSelectOption=data.map(o=> Object.assign({text:`${o.userName}-${o.nickName}`,value:String(o.userName)}))\r\n        },\r\n\r\n        // 提交\r\n        async submit(){\r\n            const {typeSelectValue,locationSelectValue,description,maintainTypeSelectValue,user}=this.formData\r\n            const {tmBasEquipmentId}=this.$route.query\r\n\r\n            // console.log( )\r\n\r\n            if(!typeSelectValue){\r\n                showFailToast(\"故障类型必填！\")\r\n                return\r\n            }\r\n\r\n            if(!locationSelectValue){\r\n                showFailToast(\"故障位置必填！\")\r\n                return\r\n            }\r\n\r\n            if(!description.trim()){\r\n                showFailToast(\"故障详细描述必填！\")\r\n                return\r\n            }\r\n            \r\n\r\n            if(!maintainTypeSelectValue){\r\n                showFailToast(\"维修类型必填！\")\r\n                return\r\n            }\r\n\r\n            // if(!user){\r\n            //     showFailToast(\"报修人必填！\")\r\n            //     return\r\n            // }\r\n\r\n            const {code}=await SubmitHTTP({\r\n                payload:{\r\n                    tmBasFaultTypeId: typeSelectValue, //  故障类型 o.tmBasFaultTypeId\r\n                    tmBasFaultId: locationSelectValue, //  故障位置  o.tmBasFaultId\r\n                    problemCause: description,  //  详细描述\r\n\r\n                    reportType: maintainTypeSelectValue,  // 报修类型  o.dictValue\r\n                    // reportBy: user, //   报修人   o.userName\r\n\r\n                    tmBasEquipmentId: tmBasEquipmentId, //  设备  o.tmBasEquipmentId\r\n\r\n                    filePath : this.bufferFileList.map(o=>o.url).join()    // 文件上传\r\n                }\r\n            })\r\n\r\n\r\n            if(code==200){\r\n                showSuccessToast(\"提交成功！\")\r\n                // this.$router.push({\r\n                //     path:'/equipment', \r\n                //     query:{ }\r\n                // }) \r\n                this.$router.go(-1)\r\n\r\n            }\r\n        },\r\n  \r\n    },\r\n  }\r\n</script>","import { render } from \"./repairs.vue?vue&type=template&id=23b6dbfc\"\nimport script from \"./repairs.vue?vue&type=script&lang=js\"\nexport * from \"./repairs.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\codeAllen\\\\xingbangh5app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","style","class","color","_createElementBlock","_createVNode","_component_AppBarPage","_component_v_row","_component_v_col","cols","_component_v_icon","icon","size","_hoisted_1","_hoisted_2","_toDisplayString","_ctx","equipmentName","_component_v_sheet","elevation","rounded","_hoisted_3","_hoisted_4","_hoisted_5","_component_SelectComponents","formData","typeSelectValue","$event","label","required","option","typeOption","locationSelectValue","locationOption","_component_van_field","description","rows","autosize","type","autocomplete","placeholder","maxlength","_component_UploaderImageComponents","bufferFileList","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","maintainTypeSelectValue","maintainTypeSelectOption","repairsPersonnel","readonly","_hoisted_10","_component_v_btn","block","onClick","$options","submit","_hoisted_11","components","AppBarPage","SelectComponents","UploaderImageComponents","DatePickerComponents","data","user","date","repairmanSelectOption","created","this","initType","initPosition","initMaintainType","initRepairman","initTime","methods","async","equipmentNo","tmBasEquipmentId","$route","query","_json2","JSON","parse","localStorage","getItem","code","httpHandle","url","method","FaultTypeHTTP","map","o","Object","assign","text","faultTypeNo","faultTypeName","value","tmBasFaultTypeId","FaultPositionHTTP","faultNo","faultName","tmBasFaultId","MaintainTypeHTTP","dictLabel","dictValue","RepairmanHTTP","userName","nickName","String","showFailToast","trim","SubmitHTTP","payload","problemCause","reportType","filePath","join","showSuccessToast","$router","go","__exports__","render"],"sourceRoot":""}