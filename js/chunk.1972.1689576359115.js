"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[1972],{89337:function(e,t,n){n.d(t,{$w:function(){return f},AT:function(){return l},NM:function(){return s},ew:function(){return c},jt:function(){return o},vU:function(){return i}});var r=n(50124),u=n(48534),a=n(37184),o=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(){var t,n=arguments;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:t.payload});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},57265:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(73396),u={style:{padding:"0px 12px 0px 12px"}},a={key:0,class:"font-weight-medium text",style:{"margin-bottom":"8px"}},o={key:1,style:{"margin-bottom":"8px"},class:"font-weight-medium text"},l={class:"custem-iamge-upload"},i=["src"];function c(e,t,n,c,s,f){var m=(0,r.up)("van-uploader"),p=(0,r.up)("v-icon");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r._)("div",u,[n.preview?((0,r.wg)(),(0,r.iD)("p",a,"图片预览 ")):((0,r.wg)(),(0,r.iD)("p",o," 图片上传 ")),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(m,{key:2,"after-read":f.afterRead,"preview-image":!1},null,8,["after-read"])),(0,r._)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.bufferFileList,(function(u,a){return(0,r.wg)(),(0,r.iD)("li",{key:a,onClick:t[0]||(t[0]=function(t){return f.checkImage(e.bufferFileList)})},[(0,r._)("img",{src:u.url},null,8,i),n.preview?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(p,{key:0,onClick:function(e){return f.removeClick(u,e)},class:"icon",icon:"mdi-close-circle-outline",color:"red"},null,8,["onClick"]))])})),128))])])])}var s=n(50124),f=n(48534),m=(n(21249),n(26699),n(32023),n(92222),n(38862),n(57327),n(41539),n(37184)),p=n(20868),d=n(9801),h={components:{},emits:["update:modelValue","onChange"],data:function(){return{bufferFileList:[]}},watch:{modelValue:{handler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.bufferFileList=e},deep:!0,immediate:!0},initPath:{handler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(this.bufferFileList=e.split(",").map((function(e){return Object.assign({url:e})})))},deep:!0,immediate:!0}},methods:{checkImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(0,d.V)(e.map((function(e){return e.url})))},afterRead:function(e){var t=this;return(0,f.Z)((0,s.Z)().mark((function n(){var r,u,a,o,l;return(0,s.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.file.type.includes("image")){n.next=3;break}return(0,p.LJ)("只能选择图片！"),n.abrupt("return");case 3:if(!(e.file.size>=19922944)){n.next=6;break}return(0,p.LJ)("图片超过20M！"),n.abrupt("return");case 6:if(!(t.bufferFileList.length>2)){n.next=9;break}return(0,p.LJ)("最多只能选择3张图片！"),n.abrupt("return");case 9:return r=new FormData,r.append("file",e.file),n.next=13,(0,m.i)({url:"/file/upload",method:"post",formData:!0,payload:r});case 13:u=n.sent,a=u.code,o=u.data,l=void 0===o?{}:o,200==a?(t.bufferFileList=t.bufferFileList.concat([l]),(0,p.XA)("图片上传成功！"),t.$emit("update:modelValue",JSON.parse(JSON.stringify(t.bufferFileList)))):(0,p.LJ)("图片上传失败！");case 18:case"end":return n.stop()}}),n)})))()},removeClick:function(e,t){var n=this;t.stopPropagation(),this.bufferFileList=JSON.parse(JSON.stringify(this.bufferFileList)).filter((function(t){return t.url!=e.url})),this.$nextTick((function(){n.$emit("update:modelValue",JSON.parse(JSON.stringify(n.bufferFileList)))}))}},props:{modelValue:{type:Array,default:function(){return[]}},initPath:{type:String,default:function(){return""}},preview:{type:Boolean,default:function(){return!1}}}},w=n(40089);const v=(0,w.Z)(h,[["render",c]]);var b=v},81972:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(73396),u=n(87139),a=(0,r._)("span",{style:{"padding-left":"6px"}},"设备维修信息",-1),o={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},l=(0,r._)("span",{class:"font-weight-medium"},"报修信息",-1),i=(0,r._)("p",{class:"font-weight-medium text"},"故障类型:",-1),c={class:"text-truncate font-weight-light"},s=(0,r._)("p",{class:"font-weight-medium text"},"故障位置:",-1),f={class:"text-truncate font-weight-light"},m=(0,r._)("p",{class:"font-weight-medium text"},"故障详情描述:",-1),p=(0,r._)("p",{class:"font-weight-medium text"},"维修类型:",-1),d={class:"text-truncate font-weight-light"},h=(0,r._)("p",{class:"font-weight-medium text"},"报修人:",-1),w={class:"text-truncate font-weight-light"},v=(0,r._)("p",{class:"font-weight-medium text"},"报修时间:",-1),b={class:"text-truncate font-weight-light"},g=(0,r._)("p",{class:"font-weight-medium text"},"响应人:",-1),x={class:"text-truncate font-weight-light"},k=(0,r._)("p",{class:"font-weight-medium text"},"响应时间:",-1),_={class:"text-truncate font-weight-light"},W=(0,r._)("span",{class:"font-weight-medium"},"维修确认",-1),y=(0,r._)("span",{class:"font-weight-medium"},"维修报告",-1),V=(0,r._)("div",{style:{height:"120px"}},null,-1);function C(e,t,n,C,R,Z){var q=(0,r.up)("AppBarPage"),F=(0,r.up)("v-icon"),U=(0,r.up)("v-col"),L=(0,r.up)("v-row"),I=(0,r.up)("UploaderImageComponents"),O=(0,r.up)("v-sheet"),S=(0,r.up)("van-field"),A=(0,r.up)("v-btn"),B=(0,r.up)("van-switch"),N=(0,r.up)("SelectComponents");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(q),(0,r.Wm)(L,{"no-gutters":"",style:{"margin-bottom":"2px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r.Wm)(F,{icon:"mdi-tools",size:"16",color:"#3F51B5"}),a]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",style:{"margin-bottom":"4px","padding-left":"6px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("span",o,(0,u.zw)(e.bufferRow.equipmentName),1)]})),_:1})]})),_:1}),(0,r.Wm)(O,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(F,{icon:"mdi-bullhorn",size:"16",color:"primary"}),l]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[i]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",c,(0,u.zw)(e.bufferRow.faultTypeCn),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[s]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",f,(0,u.zw)(e.bufferRow.faultStationCn),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[m]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",{class:"text-truncate font-weight-light",onClick:t[0]||(t[0]=function(t){return Z.GlobalTooltipFunc(e.bufferRow.problemDesc)})},(0,u.zw)(e.bufferRow.problemDesc),1)]})),_:1})]})),_:1}),(0,r.Wm)(I,{modelValue:e.bufferFileListPreviewInitiatePath,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.bufferFileListPreviewInitiatePath=t}),preview:""},null,8,["modelValue"]),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[p]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",d,(0,u.zw)(Z.FormatDictionary("equipment_repair_type",e.bufferRow.reportType)["lable"]),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[h]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",w,(0,u.zw)(e.bufferRow.reportBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[v]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",b,(0,u.zw)(e.bufferRow.reportTime),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[g]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",x,(0,u.zw)(e.bufferRow.responseBy),1)]})),_:1})]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[k]})),_:1}),(0,r.Wm)(U,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",_,(0,u.zw)(e.bufferRow.responseTime),1)]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(S,{modelValue:e.reasonCancellation,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.reasonCancellation=t}),required:"",label:"取消原因",placeholder:"请输入",autocomplete:"off"},null,8,["modelValue"]),(0,r.Wm)(A,{style:{"margin-bottom":"8px"},onClick:Z.cancelReimbursement,block:"",color:"error",variant:"outlined"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 取消报修 ")]})),_:1},8,["onClick"]),(0,r.Wm)(O,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(F,{icon:"mdi-check-bold",size:"16",color:"primary"}),W]})),_:1}),(0,r.Wm)(U,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r._)("p",{onClick:t[3]||(t[3]=function(){return Z.checkExpress&&Z.checkExpress.apply(Z,arguments)}),class:"font-weight-medium text-right text-teal-lighten-1",color:"primary"},"查看维修经验")]})),_:1})]})),_:1}),(0,r.Wm)(S,{name:"switch",placeholder:"请输入",autocomplete:"off",label:"是否外修"},{input:(0,r.w5)((function(){return[(0,r.Wm)(B,{modelValue:e.checked,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.checked=t})},null,8,["modelValue"])]})),_:1}),e.checked?((0,r.wg)(),(0,r.j4)(S,{key:0,modelValue:e.repairUnit,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.repairUnit=t}),placeholder:"请输入",autocomplete:"off",label:"维修单位"},null,8,["modelValue"])):(0,r.kq)("",!0),e.checked?((0,r.wg)(),(0,r.j4)(S,{key:1,modelValue:e.repairCost,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.repairCost=t}),type:"number",placeholder:"请输入",autocomplete:"off",label:"维修费用"},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(S,{name:"switch",placeholder:"请输入",autocomplete:"off",label:"是否报废"},{input:(0,r.w5)((function(){return[(0,r.Wm)(B,{modelValue:e.checked2,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.checked2=t})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(S,{modelValue:e.value,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.value=t}),placeholder:"请输入",autocomplete:"off",label:"维修人",readonly:""},null,8,["modelValue"]),(0,r.Wm)(N,{modelValue:e.user,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.user=t}),label:"协助人",showSearch:"",filterSearch:"",multiple:"",option:e.repairmanSelectOption,onOnChange:Z.repairmanChange},null,8,["modelValue","option","onOnChange"]),(0,r.Wm)(S,{modelValue:e.time,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.time=t}),placeholder:"请输入",autocomplete:"off",label:"确认时间",readonly:""},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(O,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(L,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(F,{icon:"mdi-file-chart",size:"16",color:"primary"}),y]})),_:1}),(0,r.Wm)(U,{cols:"6"})]})),_:1}),(0,r.Wm)(S,{modelValue:e.value1,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.value1=t}),autocomplete:"off",label:"根本问题",placeholder:"请输入",required:""},null,8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value2,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.value2=t}),autocomplete:"off",label:"解决措施",placeholder:"请输入"},null,8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value3,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.value3=t}),autocomplete:"off",label:"改进建议",placeholder:"请输入"},null,8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value4,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.value4=t}),autocomplete:"off",label:"维修用时",type:"number",required:"",placeholder:"请输入"},{button:(0,r.w5)((function(){return[(0,r.Uk)(" 分钟 ")]})),_:1},8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value5,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.value5=t}),autocomplete:"off",label:"维修内容",required:"",placeholder:"请输入"},null,8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value6,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.value6=t}),autocomplete:"off",label:"工具",placeholder:"请输入"},null,8,["modelValue"]),(0,r.Wm)(S,{modelValue:e.value8,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.value8=t}),autocomplete:"off",label:"影响时长",required:"",placeholder:"请输入"},{button:(0,r.w5)((function(){return[(0,r.Uk)(" 分钟 ")]})),_:1},8,["modelValue"]),(0,r.Wm)(S,{name:"switch",placeholder:"请输入",autocomplete:"off",label:"是否遗留"},{input:(0,r.w5)((function(){return[(0,r.Wm)(B,{modelValue:e.checked3,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.checked3=t})},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(S,{modelValue:e.value7,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.value7=t}),autocomplete:"off",label:"遗留原因",placeholder:"请输入"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(L,{"no-gutters":"",class:"global-botom-btn-box"},{default:(0,r.w5)((function(){return[(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{color:"#00E5FF",onClick:Z.onReceiveFunc},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 备件领用 ")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(U,{cols:"4"}),(0,r.Wm)(U,{cols:"4"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{color:"primary",onClick:Z.onSubmit},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 确认维修 ")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(U,{cols:"4",class:"text-right"})]})),_:1}),V])}var R=n(50124),Z=n(48534),q=(n(57327),n(41539),n(92222),n(9653),n(21249),n(57658),n(73210),n(38862),n(76496)),F=n(2243),U=n(37184),L=n(57265),I=n(20868),O=n(89337),S=n(69650),A=n(36797),B=n.n(A),N={components:{AppBarPage:q.Z,UploaderImageComponents:L.Z,SelectComponents:F.Z},data:function(){return{bufferFileListPreviewInitiatePath:[],bufferRow:{},reasonCancellation:"",repairUnit:"",repairCost:"",checked:!1,checked2:!1,value:"",user:"",time:"",value1:"",value2:"",value3:"",value4:"",value5:"",value6:"",checked3:!1,value7:"",value8:"",repairmanSelectOption:[]}},created:function(){var e=this,t=this.$root.$emitter;t.on("update_maintain_page_index",(function(){e.initFunc(),e.initRepairman()}))},methods:{GlobalTooltipFunc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,I.CF)({message:e,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[e]||[],u=r.filter((function(e){return t==e.value}))[0]||{};return u},initFunc:function(){var e=this;return(0,Z.Z)((0,R.Z)().mark((function t(){var n,r,u,a,o,l,i,c;return(0,R.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,r=n.teAdRepairId,u=n.filePath,a=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}"),e.value="".concat(a["userName"],"-").concat(a["nickName"]),e.time=B()(new Date).format("YYYY-MM-DD HH:mm"),t.next=6,(0,U.i)({url:"/iiot/equipmentRepair/equipmentForApp/".concat(r),method:"get"});case 6:o=t.sent,l=o.code,i=o.data,c=void 0===i?{}:i,200==l&&(e.bufferRow=c,e.$nextTick((function(){e.value4=Number(e.bufferRow.repairTime||0),e.value8=Number(e.bufferRow.productAffectTime||0)})),u&&(e.bufferFileListPreviewInitiatePath=u.split(",").map((function(e){return Object.assign({url:e})}))));case 11:case"end":return t.stop()}}),t)})))()},checkExpress:function(){var e=this.bufferRow;this.$router.push({path:"/equipment/maintain/experience",query:{state:"1",teAdRepairId:e.teAdRepairId,tmBasEquipmentId:e.tmBasEquipmentId}})},cancelReimbursement:function(){var e=this;return(0,Z.Z)((0,R.Z)().mark((function t(){var n,r;return(0,R.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.bufferRow,r=e.reasonCancellation.trim(),r){t.next=5;break}return(0,I.LJ)("取消原因必填！"),t.abrupt("return");case 5:(0,S.vC)({title:"取消",message:"取消后数据不可恢复，确认取消！",theme:"round-button",closeOnClickOverlay:!0}).then((0,Z.Z)((0,R.Z)().mark((function t(){var u,a,o;return(0,R.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,U.i)({url:"/iiot/equipmentRepair/cancelRepairWbForceForApp",method:"post",payload:{teAdRepairId:n.teAdRepairId,cancelReason:r,tmBasEquipmentId:n.tmBasEquipmentId}});case 2:u=t.sent,a=u.code,o=u.data,void 0===o?{}:o,200==a&&((0,I.XA)("提交成功！"),e.$router.push({path:"/equipment/maintain",query:{tabs:2}}));case 7:case"end":return t.stop()}}),t)}))));case 6:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return(0,Z.Z)((0,R.Z)().mark((function t(){var n,r,u,a,o,l,i,c,s,f,m,p,d,h,w,v;return(0,R.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.bufferRow,r=e.checked,u=e.checked2,a=e.user,o=e.value1,l=void 0===o?"":o,i=e.value2,c=void 0===i?"":i,s=e.value3,f=void 0===s?"":s,m=e.value7,p=void 0===m?"":m,l.trim()){t.next=5;break}return(0,I.LJ)("根本问题必填!"),t.abrupt("return");case 5:if(Number(e.value4)){t.next=8;break}return(0,I.LJ)("维修用时必填!"),t.abrupt("return");case 8:if(e.value5.trim()){t.next=11;break}return(0,I.LJ)("维修内容必填!"),t.abrupt("return");case 11:if(!(Number(e.value8)<0)){t.next=14;break}return(0,I.LJ)("影响时长必填!"),t.abrupt("return");case 14:if(!e.checked3||p.trim()){t.next=17;break}return(0,I.LJ)("遗留原因必填!"),t.abrupt("return");case 17:return d={tmBasEquipmentId:n.tmBasEquipmentId,teAdRepairId:n.teAdRepairId,isRepair:r?1:0,isScrap:u?1:0,helpers:a,repairUnit:e.repairUnit,repairCost:e.repairCost,rootWarin:l,solvingMeasures:c,suggestionsImprovement:f,repairTime:e.value4,repairContent:e.value5,tool:e.value6,productAffectTime:e.value8,isLeave:e.checked3?1:0,leaveReason:e.value7},t.next=20,(0,U.i)({url:"/iiot/equipmentRepair/repConfirmWbForApp",method:"post",payload:d});case 20:h=t.sent,w=h.code,v=h.data,void 0===v?{}:v,200==w&&((0,I.XA)("提交成功！"),e.$router.push({path:"/equipment/maintain",query:{tabs:2}}));case 25:case"end":return t.stop()}}),t)})))()},initRepairman:function(){var e=this;return(0,Z.Z)((0,R.Z)().mark((function t(){var n,r,u;return(0,R.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,O.NM)();case 2:n=t.sent,r=n.data,u=void 0===r?[]:r,e.repairmanSelectOption=u.map((function(e){return Object.assign({text:"".concat(e.userName,"-").concat(e.nickName),value:e.userId})}));case 6:case"end":return t.stop()}}),t)})))()},editExperience:function(){var e=this.bufferRow;this.$router.push({path:"/equipment/maintain/experienceEdit",query:{teAdRepairId:e.teAdRepairId}})},repairmanChange:function(e){},onReceiveFunc:function(){var e=this.bufferRow,t=this.value;this.$router.push({path:"/replacement/index",query:{activeType:"equipment",row:JSON.stringify(Object.assign(e,{reportBy:t}))}})}}},J=n(40089);const D=(0,J.Z)(N,[["render",C]]);var P=D},69650:function(e,t,n){n.d(t,{vC:function(){return f}});n(41539);var r,u=n(73396),a=n(12220),o=n(57548),l=n(21178),i={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},c=(0,a.l7)({},i);function s(){var e={setup:function(){var e=(0,o.o)(),t=e.state,n=e.toggle;return function(){return(0,u.Wm)(l.Z,(0,u.dG)(t,{"onUpdate:show":n}),null)}}},t=(0,o.H)(e);r=t.instance}function f(e){return a._f?new Promise((function(t,n){r||s(),r.open((0,a.l7)({},c,e,{callback:function(e){("confirm"===e?t:n)(e)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.1972.1689576359115.js.map