"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[7117],{89337:function(t,e,n){n.d(e,{$w:function(){return p},AT:function(){return o},NM:function(){return l},ew:function(){return s},jt:function(){return i},vU:function(){return c}});var r=n(50124),u=n(48534),a=n(37184),i=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,u.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},67117:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var r=n(73396),u=n(87139),a=(0,r._)("span",{style:{"padding-left":"6px"}},"保养设备信息",-1),i={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},o=(0,r._)("span",{class:"font-weight-medium"},"工时添加",-1),c=(0,r._)("div",{style:{height:"80px"}},null,-1);function s(t,e,n,s,l,p){var f=(0,r.up)("AppBarPage"),m=(0,r.up)("v-icon"),d=(0,r.up)("v-col"),h=(0,r.up)("v-row"),w=(0,r.up)("SelectComponents"),b=(0,r.up)("van-field"),v=(0,r.up)("v-sheet"),x=(0,r.up)("v-btn");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(f),(0,r.Wm)(h,{"no-gutters":"",style:{"margin-bottom":"8px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{icon:"mdi-bullhorn",size:"16",color:"#3F51B5"}),a]})),_:1}),(0,r.Wm)(d,{cols:"4",class:"text-right",style:{"padding-right":"6px"}})]})),_:1}),(0,r.Wm)(h,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("p",i,(0,u.zw)(t.bufferRow.equipmentName),1)]})),_:1})]})),_:1}),(0,r.Wm)(v,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,r.w5)((function(){return[(0,r.Wm)(h,{"no-gutters":"",class:"custem-card-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{icon:"mdi-plus",size:"16",color:"primary"}),o]})),_:1}),(0,r.Wm)(d,{cols:"6"})]})),_:1}),(0,r.Wm)(w,{modelValue:t.user,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.user=e}),ref:"select1",label:"维护人",required:"",option:t.repairmanSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(b,{modelValue:t.time,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.time=e}),type:"number",placeholder:"请输入",label:"维护工时（分钟）",required:"",autocomplete:"off"},null,8,["modelValue"]),(0,r.Wm)(b,{modelValue:t.content,"onUpdate:modelValue":e[2]||(e[2]=function(e){return t.content=e}),rows:"2",autosize:"",label:"工作内容",type:"textarea",placeholder:"请输入",maxlength:"500","show-word-limit":"",required:"",autocomplete:"off"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)(h,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(d,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{block:"",onClick:p.onSubmit},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 确认 ")]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),c])}var l=n(50124),p=n(48534),f=(n(21249),n(92222),n(73210),n(57658),n(76496)),m=n(2243),d=n(20868),h=n(37184),w=n(89337),b=(n(36797),{components:{AppBarPage:f.Z,SelectComponents:m.Z},data:function(){return{bufferRow:{},user:"",time:"",content:"",repairmanSelectOption:[]}},created:function(){this.initFunc(),this.initRepairman()},methods:{initFunc:function(){var t=this.$route.query.row;this.bufferRow=JSON.parse(t)},initRepairman:function(){var t=this;return(0,p.Z)((0,l.Z)().mark((function e(){var n,r,u;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,w.NM)();case 2:n=e.sent,r=n.data,u=void 0===r?[]:r,t.repairmanSelectOption=u.map((function(t){return Object.assign({text:"".concat(t.userName,"-").concat(t.nickName),value:t.userName})})),t.$nextTick((function(){t.bufferRow.maintainBy&&(t.$refs.select1.setValue(t.bufferRow.maintainBy),t.time=t.bufferRow.actualDuration,t.content=t.bufferRow.workContent)}));case 7:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;return(0,p.Z)((0,l.Z)().mark((function e(){var n,r,u,a,i,o,c,s;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.bufferRow,r=t.user,u=t.time,a=t.content,r){e.next=4;break}return(0,d.LJ)("维护人必填!"),e.abrupt("return");case 4:if(u.trim()){e.next=7;break}return(0,d.LJ)("维护工时必填!"),e.abrupt("return");case 7:if(a.trim()){e.next=10;break}return(0,d.LJ)("工作内容必填!"),e.abrupt("return");case 10:return i={teWbMainTaskId:n.teWbMainTaskId,ttWbWorkhoursId:n.ttWbWorkhoursId,maintainBy:r,actualDuration:u,workContent:a},e.next=13,(0,h.i)({url:"/iiot/workhours",method:n.ttWbWorkhoursId?"PUT":"post",payload:i});case 13:o=e.sent,c=o.code,s=o.data,void 0===s?{}:s,200==c&&((0,d.XA)("提交成功！"),t.$router.push({path:"/maintain/index",query:{tabs:2}}));case 18:case"end":return e.stop()}}),e)})))()}}}),v=n(40089);const x=(0,v.Z)(b,[["render",s]]);var k=x}}]);
//# sourceMappingURL=chunk.7117.1689576086920.js.map