"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[2358],{89337:function(t,e,n){n.d(e,{$w:function(){return f},AT:function(){return u},NM:function(){return l},ew:function(){return s},jt:function(){return o},vU:function(){return c}});var r=n(50124),i=n(48534),a=n(37184),o=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5878:function(t,e,n){n.d(e,{b:function(){return i}});var r=n(66347),i=(n(57658),function(t,e,n,i){var a,o={id:e||"id",parentId:n||"parentId",childrenList:i||"children"},u={},c={},s=[],l=(0,r.Z)(t);try{for(l.s();!(a=l.n()).done;){var f=a.value,p=f[o.parentId];null==u[p]&&(u[p]=[]),c[f[o.id]]=f,u[p].push(f)}}catch(k){l.e(k)}finally{l.f()}var d,m=(0,r.Z)(t);try{for(m.s();!(d=m.n()).done;){var h=d.value,w=h[o.parentId];null==c[w]&&s.push(h)}}catch(k){m.e(k)}finally{m.f()}for(var g=0,v=s;g<v.length;g++){var x=v[g];_(x)}function _(t){if(null!==u[t[o.id]]&&(t[o.childrenList]=u[t[o.id]]),t[o.childrenList]){var e,n=(0,r.Z)(t[o.childrenList]);try{for(n.s();!(e=n.n()).done;){var i=e.value;_(i)}}catch(k){n.e(k)}finally{n.f()}}}return s})},88575:function(t,e,n){n.d(e,{Z:function(){return S}});var r=n(73396),i=n(87139),a={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},o=(0,r._)("span",null,"第",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},c=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),s=(0,r._)("span",null,"共",-1),l={style:{"padding-left":"1px","padding-right":"1px"}},f=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),p=(0,r._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(t,e,n,g,v,x){var _=(0,r.up)("v-icon"),k=(0,r.up)("v-btn"),b=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[t.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(b,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(k,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:x.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(k,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:x.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",a,[o,(0,r._)("span",u,(0,i.zw)(t.current),1),c,s,(0,r._)("span",l,(0,i.zw)(t.page),1),f,p,(0,r._)("span",d,(0,i.zw)(t.totalNum),1),m]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(k,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:x.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(k,{onClick:x.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),t.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(t.items,(function(e,n){return(0,r.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",w,[(0,r.Wm)(_,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var v=n(50124),x=n(95082),_=n(48534),k=(n(21249),n(37184)),b=n(20868),y={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,b.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,b.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,_.Z)((0,v.Z)().mark((function n(){var r,i,a,o,u,c,s,l,f,p,d,m,h,w,g,_;return(0,v.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:1,i=t.length>1?t[1]:void 0,a=e.url,o=e.params,u=void 0===o?{}:o,c=e.children,s=e.method,l=e.formatData,!c){n.next=7;break}return e.items=c,e.paging=!1,n.abrupt("return");case 7:return f=(0,x.Z)((0,x.Z)({pageNum:r,pageSize:10},u),i),n.next=10,(0,k.i)({method:s,url:a,payload:"post"==s?f:{},url_params:"get"==s?f:{}});case 10:p=n.sent,d=p.code,m=p.total,h=void 0===m?0:m,w=p.msg,void 0===w?"":w,g=p.data,_=p.rows,200==d&&(e.totalNum=h,e.current=r,e.page=Math.ceil(h/f.pageSize),e.items=l?l(g||_||[]):g||_||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},C=n(40089);const W=(0,C.Z)(y,[["render",g]]);var S=W},23117:function(t,e,n){n.r(e),n.d(e,{default:function(){return rt}});var r=n(95082),i=n(73396),a=n(87139),o=(0,i._)("div",{style:{height:"50px"}},null,-1),u=(0,i._)("span",{class:"font-weight-medium"},"保养设备",-1),c={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},s=(0,i._)("p",{class:"font-weight-medium text"},"任务类型:",-1),l={class:"text-truncate font-weight-light"},f=(0,i._)("p",{class:"font-weight-medium text"},"维护位置:",-1),p=["onClick"],d=(0,i._)("p",{class:"font-weight-medium text"},"维护内容:",-1),m=["onClick"],h=(0,i._)("p",{class:"font-weight-medium text"},"策略类型:",-1),w={class:"text-truncate font-weight-light"},g=(0,i._)("p",{class:"font-weight-medium text"},"计划保养人:",-1),v={class:"text-truncate font-weight-light"},x={class:"text-truncate font-weight-light text-left"},_={class:"font-weight-medium text text-right"},k=(0,i._)("span",{class:"font-weight-medium"},"保养设备",-1),b={class:"font-weight-medium text-left text-teal-lighten-1",color:"primary"},y=(0,i._)("p",{class:"font-weight-medium text"},"任务类型:",-1),C={class:"text-truncate font-weight-light"},W=(0,i._)("p",{class:"font-weight-medium text"},"维护位置:",-1),S=["onClick"],Z=(0,i._)("p",{class:"font-weight-medium text"},"维护内容:",-1),T=["onClick"],B=(0,i._)("p",{class:"font-weight-medium text"},"策略类型:",-1),F={class:"text-truncate font-weight-light"},q=(0,i._)("p",{class:"font-weight-medium text"},"计划保养人:",-1),$={class:"text-truncate font-weight-light"},H={class:"text-truncate font-weight-light text-left"},I={class:"font-weight-medium text text-right"},N={class:"hide-select-equipment-input"};function D(t,e,n,D,L,O){var z=(0,i.up)("v-tab"),U=(0,i.up)("v-tabs"),P=(0,i.up)("AppBarPage"),j=(0,i.up)("ScanBarComponents"),A=(0,i.up)("v-badge"),V=(0,i.up)("v-col"),M=(0,i.up)("v-row"),R=(0,i.up)("v-btn"),E=(0,i.up)("v-card"),G=(0,i.up)("TableComponents"),J=(0,i.up)("v-window-item"),X=(0,i.up)("v-window"),K=(0,i.up)("SearchPage1"),Y=(0,i.up)("SearchPage2"),Q=(0,i.up)("SelectComponents");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(P,null,{appTabs:(0,i.w5)((function(){return[(0,i.Wm)(U,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.tab=e}),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,i.w5)((function(){return[(0,i.Wm)(z,{value:"1","hide-slider":""},{default:(0,i.w5)((function(){return[(0,i.Uk)("当前保养任务")]})),_:1}),(0,i.Wm)(z,{value:"2","hide-slider":""},{default:(0,i.w5)((function(){return[(0,i.Uk)("我的保养任务")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),o,(0,i.Wm)(X,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tab=e})},{default:(0,i.w5)((function(){return[(0,i.Wm)(J,{value:"1",class:"v-window-item-table"},{default:(0,i.w5)((function(){return[(0,i.Wm)(j,{ref:"scanBar1",placeholder:"扫描或输入 区域码",onSearchClick:O.barSearchClick},null,8,["onSearchClick"]),"1"==t.tab?((0,i.wg)(),(0,i.j4)(G,{key:0,ref:"table1",url:"/iiot/mainTask/list",showSearchBtn:!0,params:(0,r.Z)({wbMais:"WI",params:{typeList:["A","B","C","D"]},tmBasEquipments:t.tmBasEquipments},t.pageSearchConfig1),method:"post",onSearchClick:O.searchClick1,refreshFunc:"",onRefresh:O.refreshTable},{tableBody:(0,i.w5)((function(t){return[(0,i.Wm)(E,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(M,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"1"},{default:(0,i.w5)((function(){return[(0,i.Wm)(A,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[u]})),_:1}),(0,i.Wm)(V,{cols:"7"})]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",c,(0,a.zw)(t.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[s]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",l,(0,a.zw)(O.FormatDictionary("WB_TT",t.items.wbTt)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[f]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{class:"text-truncate font-weight-light",onClick:function(e){return O.GlobalTooltipFunc(t.items.faultStationCn)}},(0,a.zw)(t.items.faultStationCn),9,p)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[d]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{class:"text-truncate font-weight-light",onClick:function(e){return O.GlobalTooltipFunc(t.items.manitainContent)}},(0,a.zw)(t.items.manitainContent),9,m)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[h]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",w,(0,a.zw)(O.FormatDictionary("WB_ST",t.items.wbSt)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[g]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",v,(0,a.zw)(t.items.planImplementBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"10"},{default:(0,i.w5)((function(){return[(0,i._)("p",x," 到期时间: "+(0,a.zw)(t.items.expireTime),1)]})),_:2},1024),(0,i.Wm)(V,{cols:"2"},{default:(0,i.w5)((function(){return[(0,i._)("p",_,[(0,i._)("span",{class:(0,a.C_)("0"==t.items.expireStatus?"text-cyan-lighten-1":"text-red-darken-4")},(0,a.zw)("0"==t.items.expireStatus?"未到期":"已到期"),3)])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4",class:"text-center"}),(0,i.Wm)(V,{cols:"4",class:"text-center"}),(0,i.Wm)(V,{cols:"4",class:"text-right"},{default:(0,i.w5)((function(){return[(0,i.Wm)(R,{onClick:function(e){return O.experienceEdit(t)},color:"orange mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("抢单实施")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick","onRefresh"])):(0,i.kq)("",!0)]})),_:1}),(0,i.Wm)(J,{value:"2",class:"v-window-item-table"},{default:(0,i.w5)((function(){return[(0,i.Wm)(j,{ref:"scanBar1",placeholder:"扫描或输入 区域码",onSearchClick:O.barSearchClick2},null,8,["onSearchClick"]),"2"==t.tab?((0,i.wg)(),(0,i.j4)(G,{key:0,ref:"table2",method:"post",showSearchBtn:!0,url:"/iiot/mainTask/listForApp",params:(0,r.Z)({wbMais:"IO",params:{typeList:["A","B","C","D"]},tmBasEquipments:t.tmBasEquipments},t.pageSearchConfig2),onSearchClick:O.searchClick2,refreshFunc:"",onRefresh:O.refreshTable},{tableBody:(0,i.w5)((function(t){return[(0,i.Wm)(E,null,{default:(0,i.w5)((function(){return[(0,i.Wm)(M,{"no-gutters":"",class:"table-title"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"1"},{default:(0,i.w5)((function(){return[(0,i.Wm)(A,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[k]})),_:1}),(0,i.Wm)(V,{cols:"7"})]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"12"},{default:(0,i.w5)((function(){return[(0,i._)("p",b,(0,a.zw)(t.items.equipmentName),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[y]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",C,(0,a.zw)(O.FormatDictionary("WB_TT",t.items.wbTt)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[W]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{class:"text-truncate font-weight-light",onClick:function(e){return O.GlobalTooltipFunc(t.items.faultStationCn)}},(0,a.zw)(t.items.faultStationCn),9,S)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[Z]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",{class:"text-truncate font-weight-light",onClick:function(e){return O.GlobalTooltipFunc(t.items.manitainContent)}},(0,a.zw)(t.items.manitainContent),9,T)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[B]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",F,(0,a.zw)(O.FormatDictionary("WB_ST",t.items.wbSt)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4"},{default:(0,i.w5)((function(){return[q]})),_:1}),(0,i.Wm)(V,{cols:"8"},{default:(0,i.w5)((function(){return[(0,i._)("p",$,(0,a.zw)(t.items.planImplementBy),1)]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"10"},{default:(0,i.w5)((function(){return[(0,i._)("p",H," 到期时间: "+(0,a.zw)(t.items.expireTime),1)]})),_:2},1024),(0,i.Wm)(V,{cols:"2"},{default:(0,i.w5)((function(){return[(0,i._)("p",I,[(0,i._)("span",{class:(0,a.C_)("0"==t.items.expireStatus?"text-cyan-lighten-1":"text-red-darken-4")},(0,a.zw)("0"==t.items.expireStatus?"未到期":"已到期"),3)])]})),_:2},1024)]})),_:2},1024),(0,i.Wm)(M,{"no-gutters":"",class:"text"},{default:(0,i.w5)((function(){return[(0,i.Wm)(V,{cols:"4",class:"text-center"}),(0,i.Wm)(V,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(R,{onClick:function(e){return O.cancelHandle(t)},color:"red mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("取消保养")]})),_:2},1032,["onClick"])]})),_:2},1024),(0,i.Wm)(V,{cols:"4",class:"text-right"},{default:(0,i.w5)((function(){return[(0,i.Wm)(R,{onClick:function(e){return O.reportHandle(t)},color:"orange mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("实施报工")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick","onRefresh"])):(0,i.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"]),(0,i.Wm)(K,{ref:"searchPage1",hideStatus:!1,onResetHandle:O.resetHandle1,onSearchHandle:O.searchHandle1},null,8,["onResetHandle","onSearchHandle"]),(0,i.Wm)(Y,{ref:"searchPage2",hideStatus:!1,onResetHandle:O.resetHandle2,onSearchHandle:O.searchHandle2},null,8,["onResetHandle","onSearchHandle"]),(0,i._)("span",N,[t.showSelect?((0,i.wg)(),(0,i.j4)(Q,{key:0,ref:"selectContent",label:"设备",placeholderSearch:"请输入设备编号",forbidShow:!0,required:"",multiple:"",showSearch:"",option:t.equipmentSelectOption,onOnSearchChange:O.equipmentSearchChange,onOnChange:O.equipmentConfirm},null,8,["option","onOnSearchChange","onOnChange"])):(0,i.kq)("",!0)])])}var L=n(50124),O=n(48534),z=(n(57327),n(41539),n(40561),n(21249),n(92222),n(57658),n(73210),n(76496)),U=n(88575),P=(0,i._)("div",{style:{height:"36px"}},null,-1),j={style:{"margin-top":"32px"}};function A(t,e,n,r,a,o){var u=(0,i.up)("van-field"),c=(0,i.up)("v-btn"),s=(0,i.up)("van-cascader"),l=(0,i.up)("van-popup"),f=(0,i.up)("v-col"),p=(0,i.up)("v-row");return(0,i.wg)(),(0,i.iD)("span",null,[(0,i.Wm)(l,{show:t.drawer,"onUpdate:show":e[6]||(e[6]=function(e){return t.drawer=e}),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,i.w5)((function(){return[P,(0,i.Wm)(u,{modelValue:t.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.fieldValue=e}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",onClick:e[1]||(e[1]=function(e){return t.show=!0})},null,8,["modelValue"]),(0,i.Wm)(l,{show:t.show,"onUpdate:show":e[4]||(e[4]=function(e){return t.show=e}),round:"",position:"bottom"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:e[2]||(e[2]=function(){return t.show=!1})},{default:(0,i.w5)((function(){return[(0,i.Uk)(" 确定 ")]})),_:1}),t.hideFactory?((0,i.wg)(),(0,i.j4)(s,{key:0,title:"请选择工厂节点",options:t.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:e[3]||(e[3]=function(e){return t.show=!1}),onChange:o.onFinish},null,8,["options","onChange"])):(0,i.kq)("",!0)]})),_:1},8,["show"]),(0,i._)("div",j,[(0,i.Wm)(p,{"no-gutters":""},{default:(0,i.w5)((function(){return[(0,i.Wm)(f,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:e[5]||(e[5]=function(){return t.drawer=!1}),density:"compact",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("关闭")]})),_:1})]})),_:1}),(0,i.Wm)(f,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:o.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,i.Wm)(f,{cols:"4",class:"text-center"},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{onClick:o.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,i.w5)((function(){return[(0,i.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])}n(69600);var V=n(2243),M=n(37184),R=n(89337),E=n(5878),G={components:{SelectComponents:V.Z},emits:["searchHandle","resetHandle"],data:function(){return{hideFactory:!0,drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",type:"",typeSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},resetClick:function(){var t=this;this.fieldValue="",this.factoryID="",this.hideFactory=!1,this.$nextTick((function(){t.hideFactory=!0})),this.$emit("resetHandle",{})},initFunc:function(){var t=this;return(0,O.Z)((0,L.Z)().mark((function e(){var n,r,i,a;return(0,L.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,R.jt)();case 2:n=e.sent,r=n.data,i=void 0===r?[]:r,a=(0,E.b)(i,"tmBasNodeLevelId","parentId"),t.options=a;case 7:case"end":return e.stop()}}),e)})))()},getTypeHttp:function(){var t=arguments,e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r,i,a,o,u;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",n.next=3,(0,M.i)({url:"/iiot/abnormalType/listAbnormalTypeForSelect",method:"get",url_params:{abnormalNo:r}});case 3:i=n.sent,a=i.code,o=i.data,u=void 0===o?[]:o,200==a&&(e.typeSelectOption=u.map((function(t){return Object.assign({text:"".concat(t.abnormalNo).concat(t.abnormalName),value:t.tmBasAbnormalTypeId})})));case 8:case"end":return n.stop()}}),n)})))()},onFinish:function(t){var e=t.selectedOptions;if(e.length){var n=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=e.map((function(t){return t.nodeLevelName})).join("/")}},searchClick:function(){var t=this.factoryID,e=(this.type,this.property,this.status,{tmBasNodeLevelId:t});this.$emit("searchHandle",e),this.drawer=!1},showDrawer:function(){this.drawer=!0}},props:{hideStatus:{type:Boolean,default:function(){return!0}}}},J=n(40089);const X=(0,J.Z)(G,[["render",A]]);var K=X,Y=n(73378),Q=n(20868),tt=n(69650),et={components:{AppBarPage:z.Z,SearchPage1:K,ScanBarComponents:Y.Z,SelectComponents:V.Z,SearchPage2:K,TableComponents:U.Z},data:function(){return{tab:"1",showSelect:!0,bufferTree:[],pageSearchConfig1:{},pageSearchConfig2:{},tmBasNodeLevelId:"",equipment:"",tmBasEquipments:[],equipmentSelectOption:[],equipmentSelectOptionData:[]}},created:function(){var t=this;this.initFunc(),this.factoryTreeHTTP();var e=this.$root.$emitter;e.on("update_maintain_page",(function(){t.initFunc(),t.factoryTreeHTTP(),t.refreshTable()}))},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,Q.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},initFunc:function(){var t=this.$route.query.tabs;t&&(this.tab=t)},refreshTable:function(){var t=this;this.$refs["scanBar1"]&&this.$refs["scanBar1"].reset(),this.$refs["scanBar2"]&&this.$refs["scanBar2"].reset(),this.tmBasEquipments=[],this.$nextTick((function(){"1"==t.tab&&t.$refs.table1.initFunc(1,{}),"2"==t.tab&&t.$refs.table2.initFunc(1,{})}))},equipmentSearchChange:function(){var t=arguments,e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.length>0&&void 0!==t[0]?t[0]:"",e.equipmentHTTP(r);case 2:case"end":return n.stop()}}),n)})))()},equipmentHTTP:function(){var t=arguments,e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r,i,a,o,u,c;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",i=e.tmBasNodeLevelId,n.next=4,(0,M.i)({url:"/iiot/equipment/list",method:"get",url_params:{tmBasNodeLevelId:i,equipmentNo:r}});case 4:a=n.sent,o=a.code,u=a.data,c=void 0===u?[]:u,200==o&&(e.equipmentSelectOptionData=c,e.equipmentSelectOption=c.map((function(t){return Object.assign({text:"".concat(t.equipmentNo,"-").concat(t.equipmentName),value:t.tmBasEquipmentId})})).splice(0,100));case 9:case"end":return n.stop()}}),n)})))()},equipmentConfirm:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.tmBasEquipments=e?e.split(","):[],this.$nextTick((function(){"1"==t.tab&&t.$refs.table1.initFunc(1,{}),"2"==t.tab&&t.$refs.table2.initFunc(1,{})}))},factoryTreeHTTP:function(){var t=this;return(0,O.Z)((0,L.Z)().mark((function e(){var n,r,i;return(0,L.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,R.jt)();case 2:n=e.sent,r=n.data,i=void 0===r?[]:r,t.bufferTree=i;case 6:case"end":return e.stop()}}),e)})))()},experienceEdit:function(t){var e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r,i,a;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.items,n.next=3,(0,M.i)({url:"/iiot/mainTask/responseTask",method:"PUT",payload:{teWbMainTaskId:r.teWbMainTaskId,wbMais:"IO"}});case 3:i=n.sent,a=i.code,200==a&&((0,Q.XA)("提交成功！"),e.$refs.table1.initFunc());case 6:case"end":return n.stop()}}),n)})))()},cancelHandle:function(t){var e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,(0,tt.vC)({title:"取消确认",message:"取消后数据不可恢复，确认取消！",theme:"round-button",closeOnClickOverlay:!0}).then((0,O.Z)((0,L.Z)().mark((function t(){var n,i;return(0,L.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,M.i)({url:"/iiot/mainTask/cancelwbImp",method:"post",payload:{teWbMainTaskId:r.teWbMainTaskId}});case 2:n=t.sent,i=n.code,200==i&&((0,Q.XA)("提交成功！"),e.$refs.table2.initFunc());case 5:case"end":return t.stop()}}),t)}))));case 2:case"end":return n.stop()}}),n)})))()},reportHandle:function(t){var e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.items,e.$router.push({path:"/maintain/detail",query:{teWbMainTaskId:r.teWbMainTaskId}});case 2:case"end":return n.stop()}}),n)})))()},barSearchClick:function(){var t=arguments,e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r,i,a;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:"",i=r.trim(),a=e.bufferTree.filter((function(t){return t.nodeLevelNo==i}))[0]||{},a.tmBasNodeLevelId){n.next=6;break}return(0,Q.LJ)("无工厂节点！"),n.abrupt("return");case 6:e.showSelect=!1,e.tmBasNodeLevelId=a.tmBasNodeLevelId,e.$nextTick((0,O.Z)((0,L.Z)().mark((function t(){return(0,L.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showSelect=!0,t.next=3,e.equipmentHTTP("");case 3:e.$nextTick((function(){e.$refs.selectContent.showModle()}));case 4:case"end":return t.stop()}}),t)}))));case 9:case"end":return n.stop()}}),n)})))()},barSearchClick2:function(){var t=arguments,e=this;return(0,O.Z)((0,L.Z)().mark((function n(){var r,i,a;return(0,L.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:"",i=r.trim(),a=e.bufferTree.filter((function(t){return t.nodeLevelNo==i}))[0]||{},a.tmBasNodeLevelId){n.next=6;break}return(0,Q.LJ)("无工厂节点！"),n.abrupt("return");case 6:e.showSelect=!1,e.tmBasNodeLevelId=a.tmBasNodeLevelId,e.$nextTick((0,O.Z)((0,L.Z)().mark((function t(){return(0,L.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showSelect=!0,t.next=3,e.equipmentHTTP("");case 3:e.$nextTick((function(){e.$refs.selectContent.showModle()}));case 4:case"end":return t.stop()}}),t)}))));case 9:case"end":return n.stop()}}),n)})))()},searchClick1:function(){this.$refs.searchPage1.showDrawer()},searchHandle1:function(t){var e=this;this.pageSearchConfig1=t,this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},resetHandle1:function(t){var e=this;this.pageSearchConfig1={},this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},searchClick2:function(){this.$refs.searchPage2.showDrawer()},searchHandle2:function(t){var e=this;this.pageSearchConfig2=t,this.$nextTick((function(){e.$refs.table2.initFunc(1)}))},resetHandle2:function(t){var e=this;this.pageSearchConfig2={},this.$nextTick((function(){e.$refs.table2.initFunc(1)}))}}};const nt=(0,J.Z)(et,[["render",D]]);var rt=nt},69650:function(t,e,n){n.d(e,{vC:function(){return f}});n(41539);var r,i=n(73396),a=n(12220),o=n(57548),u=n(21178),c={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},s=(0,a.l7)({},c);function l(){var t={setup:function(){var t=(0,o.o)(),e=t.state,n=t.toggle;return function(){return(0,i.Wm)(u.Z,(0,i.dG)(e,{"onUpdate:show":n}),null)}}},e=(0,o.H)(t);r=e.instance}function f(t){return a._f?new Promise((function(e,n){r||l(),r.open((0,a.l7)({},s,t,{callback:function(t){("confirm"===t?e:n)(t)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.2358.1689576359115.js.map