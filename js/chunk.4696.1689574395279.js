"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[4696,8167],{89337:function(t,e,n){n.d(e,{$w:function(){return p},AT:function(){return l},NM:function(){return c},ew:function(){return s},jt:function(){return u},vU:function(){return o}});var r=n(50124),i=n(48534),a=n(37184),u=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,a.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,a.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5878:function(t,e,n){n.d(e,{b:function(){return i}});var r=n(66347),i=(n(57658),function(t,e,n,i){var a,u={id:e||"id",parentId:n||"parentId",childrenList:i||"children"},l={},o={},s=[],c=(0,r.Z)(t);try{for(c.s();!(a=c.n()).done;){var p=a.value,f=p[u.parentId];null==l[f]&&(l[f]=[]),o[p[u.id]]=p,l[f].push(p)}}catch(_){c.e(_)}finally{c.f()}var d,m=(0,r.Z)(t);try{for(m.s();!(d=m.n()).done;){var h=d.value,w=h[u.parentId];null==o[w]&&s.push(h)}}catch(_){m.e(_)}finally{m.f()}for(var g=0,y=s;g<y.length;g++){var x=y[g];v(x)}function v(t){if(null!==l[t[u.id]]&&(t[u.childrenList]=l[t[u.id]]),t[u.childrenList]){var e,n=(0,r.Z)(t[u.childrenList]);try{for(n.s();!(e=n.n()).done;){var i=e.value;v(i)}}catch(_){n.e(_)}finally{n.f()}}}return s})},88575:function(t,e,n){n.d(e,{Z:function(){return Z}});var r=n(73396),i=n(87139),a={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},u=(0,r._)("span",null,"第",-1),l={style:{"padding-left":"1px","padding-right":"1px"}},o=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),s=(0,r._)("span",null,"共",-1),c={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),f=(0,r._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(t,e,n,g,y,x){var v=(0,r.up)("v-icon"),_=(0,r.up)("v-btn"),k=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[t.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(k,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:x.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(_,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:x.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",a,[u,(0,r._)("span",l,(0,i.zw)(t.current),1),o,s,(0,r._)("span",c,(0,i.zw)(t.page),1),p,f,(0,r._)("span",d,(0,i.zw)(t.totalNum),1),m]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(_,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:x.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(v,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(_,{onClick:x.refreshClick,style:(0,i.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),t.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(t.items,(function(e,n){return(0,r.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",w,[(0,r.Wm)(v,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var y=n(50124),x=n(95082),v=n(48534),_=(n(21249),n(37184)),k=n(20868),b={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,k.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,k.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,v.Z)((0,y.Z)().mark((function n(){var r,i,a,u,l,o,s,c,p,f,d,m,h,w,g,v;return(0,y.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:1,i=t.length>1?t[1]:void 0,a=e.url,u=e.params,l=void 0===u?{}:u,o=e.children,s=e.method,c=e.formatData,!o){n.next=7;break}return e.items=o,e.paging=!1,n.abrupt("return");case 7:return p=(0,x.Z)((0,x.Z)({pageNum:r,pageSize:10},l),i),n.next=10,(0,_.i)({method:s,url:a,payload:"post"==s?p:{},url_params:"get"==s?p:{}});case 10:f=n.sent,d=f.code,m=f.total,h=void 0===m?0:m,w=f.msg,void 0===w?"":w,g=f.data,v=f.rows,200==d&&(e.totalNum=h,e.current=r,e.page=Math.ceil(h/p.pageSize),e.items=c?c(g||v||[]):g||v||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},W=n(40089);const C=(0,W.Z)(b,[["render",g]]);var Z=C},98167:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});var r=n(73396),i=(0,r._)("div",{style:{height:"12px"}},null,-1),a=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否紧急",-1),u=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否已收货",-1),l=(0,r._)("p",{style:{"padding-left":"16px","margin-top":"14px"}},"是否外检",-1),o={style:{"margin-top":"32px","margin-bottom":"62px"}};function s(t,e,n,s,c,p){var f=(0,r.up)("AppBarPage"),d=(0,r.up)("van-field"),m=(0,r.up)("v-btn"),h=(0,r.up)("van-cascader"),w=(0,r.up)("van-popup"),g=(0,r.up)("SelectComponents"),y=(0,r.up)("v-col"),x=(0,r.up)("v-switch"),v=(0,r.up)("v-row");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(f),i,(0,r.Wm)(d,{modelValue:t.fieldValue,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.fieldValue=e}),"is-link":"",readonly:"",label:"工厂节点",placeholder:"请选择工厂节点",type:"textarea",autocomplete:"off",required:"",onClick:e[1]||(e[1]=function(e){return t.show=!0})},null,8,["modelValue"]),(0,r.Wm)(w,{show:t.show,"onUpdate:show":e[4]||(e[4]=function(e){return t.show=e}),round:"",position:"bottom"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{block:"",color:"cyan",elevation:"0",style:{"border-radius":"0px"},onClick:e[2]||(e[2]=function(){return t.show=!1})},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 确定 ")]})),_:1}),t.showFactory?((0,r.wg)(),(0,r.j4)(h,{key:0,title:"请选择工厂节点",options:t.options,"active-color":"#4CAF50","field-names":{text:"nodeLevelName",value:"tmBasNodeLevelId",children:"children"},onClose:e[3]||(e[3]=function(e){return t.show=!1}),onChange:p.onFinish},null,8,["options","onChange"])):(0,r.kq)("",!0)]})),_:1},8,["show"]),(0,r.Wm)(g,{modelValue:t.supplier,"onUpdate:modelValue":e[5]||(e[5]=function(e){return t.supplier=e}),ref:"select678",label:"供应商",required:"",option:t.supplierSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(g,{modelValue:t.part,"onUpdate:modelValue":e[6]||(e[6]=function(e){return t.part=e}),ref:"select567",label:"零件",required:"",showSearch:"",option:t.partSelectOption,onOnSearchChange:p.partSearchChange},null,8,["modelValue","option","onOnSearchChange"]),(0,r.Wm)(g,{modelValue:t.process,"onUpdate:modelValue":e[7]||(e[7]=function(e){return t.process=e}),ref:"select22",label:"过程类型",option:t.processSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(g,{modelValue:t.typeMaterial,"onUpdate:modelValue":e[8]||(e[8]=function(e){return t.typeMaterial=e}),ref:"select663",label:"来料类型",required:"",option:t.typeMaterialSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(g,{modelValue:t.classes,"onUpdate:modelValue":e[9]||(e[9]=function(e){return t.classes=e}),ref:"select33",label:"班次",option:t.classesSelectOption},null,8,["modelValue","option"]),(0,r.Wm)(d,{modelValue:t.taskQty,"onUpdate:modelValue":e[10]||(e[10]=function(e){return t.taskQty=e}),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"任务数量"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:t.receiptNo,"onUpdate:modelValue":e[11]||(e[11]=function(e){return t.receiptNo=e}),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单编号"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:t.receiptline,"onUpdate:modelValue":e[12]||(e[12]=function(e){return t.receiptline=e}),placeholder:"请输入",required:"",autocomplete:"off",label:"入库单序号"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:t.receiptQty,"onUpdate:modelValue":e[13]||(e[13]=function(e){return t.receiptQty=e}),placeholder:"请输入",required:"",autocomplete:"off",type:"number",label:"收货数量"},null,8,["modelValue"]),(0,r.Wm)(v,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[a]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{modelValue:t.switchUrgency,"onUpdate:modelValue":e[14]||(e[14]=function(e){return t.switchUrgency=e}),label:t.switchUrgency?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r.Wm)(v,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[u]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{modelValue:t.switchReceived,"onUpdate:modelValue":e[15]||(e[15]=function(e){return t.switchReceived=e}),label:t.switchReceived?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r.Wm)(v,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"4"},{default:(0,r.w5)((function(){return[l]})),_:1}),(0,r.Wm)(y,{cols:"8",style:{height:"42px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{modelValue:t.switchOutInspect,"onUpdate:modelValue":e[16]||(e[16]=function(e){return t.switchOutInspect=e}),label:t.switchOutInspect?"是":"否",color:"primary",density:"comfortable",style:{height:"48px",display:"inline-block",width:"104px","margin-left":"14px"}},null,8,["modelValue","label"])]})),_:1})]})),_:1}),(0,r._)("div",o,[(0,r.Wm)(v,{"no-gutters":""},{default:(0,r.w5)((function(){return[(0,r.Wm)(y,{cols:"6",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{onClick:p.resetClick,color:"warning"},{default:(0,r.w5)((function(){return[(0,r.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,r.Wm)(y,{cols:"6",class:"text-center"},{default:(0,r.w5)((function(){return[(0,r.Wm)(m,{onClick:p.searchClick,color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)("提交")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])])}var c=n(50124),p=n(48534),f=(n(57327),n(41539),n(21249),n(40561),n(92222),n(69600),n(9653),n(73210),n(57658),n(76496)),d=n(2243),m=n(37184),h=n(20868),w=n(89337),g=n(5878),y={components:{AppBarPage:f.Z,SelectComponents:d.Z},emits:["searchHandle","resetHandle"],data:function(){return{drawer:!1,showFactory:!0,show:!1,fieldValue:"",options:[],factoryID:"",process:"",processSelectOption:[],typeMaterial:"",typeMaterialSelectOption:[],switchUrgency:!1,switchReceived:!1,switchOutInspect:!1,classes:"",classesSelectOption:[],taskQty:"",receiptNo:"",receiptline:"",receiptQty:"",supplier:"",supplierSelectOption:[],part:"",partSelectOption:[]}},created:function(){this.initFunc(),this.getSupplierHttp(),this.partHttp()},methods:{FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},resetClick:function(){var t=this;this.factoryID="",this.part="",this.supplier="",this.process="",this.typeMaterial="",this.switchUrgency=!1,this.classes="",this.taskQty="",this.receiptNo="",this.receiptline="",this.receiptQty="",this.switchReceived=!1,this.switchOutInspect=!1,this.$refs.select678.reset(),this.$refs.select567.reset(),this.$refs.select22.reset(),this.$refs.select663.reset(),this.$refs.select33.reset(),this.fieldValue="",this.showFactory=!1,this.$nextTick((function(){t.showFactory=!0}))},initFunc:function(){var t=this;return(0,p.Z)((0,c.Z)().mark((function e(){var n,r,i,a,u,l,o,s;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n["QC_TASK_TYPE"]||[],t.processSelectOption=r.map((function(t){return Object.assign({text:t.lable,value:t.value})})),i=n["in_part_model"]||[],t.typeMaterialSelectOption=i.map((function(t){return Object.assign({text:t.lable,value:t.value})})),a=n["shiftno"]||[],t.classesSelectOption=a.map((function(t){return Object.assign({text:t.lable,value:t.value})})),e.next=9,(0,w.jt)();case 9:u=e.sent,l=u.data,o=void 0===l?[]:l,s=(0,g.b)(o,"tmBasNodeLevelId","parentId"),t.options=s;case 14:case"end":return e.stop()}}),e)})))()},getSupplierHttp:function(){var t=arguments,e=this;return(0,p.Z)((0,c.Z)().mark((function n(){var r,i,a,u;return(0,c.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:"",n.next=3,(0,m.i)({url:"/iiot/supplier/list?delFlag=Y",method:"get"});case 3:r=n.sent,i=r.code,a=r.data,u=void 0===a?[]:a,200==i&&(e.supplierSelectOption=u.map((function(t){return Object.assign({text:"".concat(t.supplierName),value:t.supplierCode})})));case 8:case"end":return n.stop()}}),n)})))()},partHttp:function(){var t=arguments,e=this;return(0,p.Z)((0,c.Z)().mark((function n(){var r,i,a,u,l;return(0,c.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",n.next=3,(0,m.i)({url:"/iiot/part/listPartForSelect",method:"get",url_params:{noOrName:r}});case 3:i=n.sent,a=i.code,u=i.data,l=void 0===u?[]:u,200==a&&(e.partSelectOption=l.map((function(t){return Object.assign({text:"".concat(t.matnr||"","-").concat(t.maktxC||""),value:t.tmBasPartId})})).splice(0,100));case 8:case"end":return n.stop()}}),n)})))()},partSearchChange:function(t){this.partHttp(t)},onFinish:function(t){var e=t.selectedOptions;if(e.length){var n=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=e.map((function(t){return t.nodeLevelName})).join("/")}},searchClick:function(){var t=this;return(0,p.Z)((0,c.Z)().mark((function e(){var n,r,i,a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.factoryID){e.next=3;break}return(0,h.LJ)("工厂必填！"),e.abrupt("return");case 3:if(t.supplier){e.next=6;break}return(0,h.LJ)("供应商必填！"),e.abrupt("return");case 6:if(t.part){e.next=9;break}return(0,h.LJ)("零件必填！"),e.abrupt("return");case 9:if(t.typeMaterial){e.next=12;break}return(0,h.LJ)("来料类型必填！"),e.abrupt("return");case 12:if(Number(t.taskQty)){e.next=15;break}return(0,h.LJ)("任务数量必填！"),e.abrupt("return");case 15:if(t.receiptNo.trim()){e.next=18;break}return(0,h.LJ)("收货单号必填！"),e.abrupt("return");case 18:if(t.receiptline.trim()){e.next=21;break}return(0,h.LJ)("收货单行号必填！"),e.abrupt("return");case 21:if(Number(t.receiptQty)){e.next=24;break}return(0,h.LJ)("收货数量必填！"),e.abrupt("return");case 24:return n={taskType:"IQC",tmBasNodeLevelId:t.factoryID,tmBasPartId:t.part,tmBasSupplId:t.supplier,processType:t.process,partModel:t.typeMaterial,isUrgent:t.switchUrgency?"1":"0",shiftno:t.classes,taskQty:Number(t.taskQty),receiptNo:t.receiptNo,receiptline:t.receiptline,receiptQty:Number(t.receiptQty),isReceipt:t.switchReceived?"1":"0",isOutInspect:t.switchOutInspect?"1":"0"},e.next=27,(0,m.i)({url:"/iiot/qmTask",method:"post",payload:n});case 27:r=e.sent,i=r.code,a=r.data,void 0===a?{}:a,200==i&&((0,h.XA)("提交成功！"),t.$router.push({path:"/qualityMaterial/index",query:{}}));case 32:case"end":return e.stop()}}),e)})))()},showDrawer:function(){this.drawer=!0}},props:{}},x=n(40089);const v=(0,x.Z)(y,[["render",s]]);var _=v},14342:function(t,e,n){n.r(e),n.d(e,{default:function(){return G}});n(92222);var r=n(73396),i=n(87139),a=(0,r._)("div",{style:{height:"50px"}},null,-1),u={class:"text-truncate text-right font-weight-medium text-right text-teal-lighten-1",color:"primary"},l={class:"font-weight-light",style:{color:"#00E5FF"}},o=(0,r._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),s={class:"text-truncate font-weight-light"},c=(0,r._)("p",{class:"font-weight-medium text"},"配送单号:",-1),p={class:"text-truncate font-weight-light"},f=(0,r._)("p",{class:"font-weight-medium text"},"收货状态:",-1),d={class:"text-truncate font-weight-light",style:{color:"#00E5FF"}},m=(0,r._)("p",{class:"font-weight-medium text"},"供应商信息:",-1),h=["onClick"],w=(0,r._)("p",{class:"font-weight-medium text"},"报检时间:",-1),g={class:"text-truncate font-weight-light"},y=(0,r._)("p",{class:"font-weight-medium text"},"入库单编号:",-1),x={class:"text-truncate font-weight-light"},v={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},_=(0,r._)("span",{class:"font-weight-medium text"},"检验数量:",-1),k={class:"text-truncate text-right font-weight-medium text-right text-teal-lighten-1",color:"primary"},b={class:"font-weight-light",style:{color:"#00E5FF"}},W=(0,r._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),C={class:"text-truncate font-weight-light"},Z=(0,r._)("p",{class:"font-weight-medium text"},"配送单号:",-1),S={class:"text-truncate font-weight-light"},V=(0,r._)("p",{class:"font-weight-medium text"},"收货状态:",-1),N={class:"text-truncate font-weight-light",style:{color:"#00E5FF"}},U=(0,r._)("p",{class:"font-weight-medium text"},"供应商信息:",-1),F=["onClick"],O=(0,r._)("p",{class:"font-weight-medium text"},"报检时间:",-1),q={class:"text-truncate font-weight-light"},I=(0,r._)("p",{class:"font-weight-medium text"},"入库单编号:",-1),Q={class:"text-truncate font-weight-light"},z={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},T=(0,r._)("span",{class:"font-weight-medium text"},"检验数量:",-1);function L(t,e,n,L,$,B){var D=(0,r.up)("v-tab"),j=(0,r.up)("v-tabs"),M=(0,r.up)("AppBarPage"),H=(0,r.up)("v-btn"),J=(0,r.up)("ScanBarComponents"),R=(0,r.up)("v-badge"),A=(0,r.up)("v-col"),P=(0,r.up)("v-row"),E=(0,r.up)("van-field"),G=(0,r.up)("v-card"),Y=(0,r.up)("TableComponents"),K=(0,r.up)("v-window-item"),X=(0,r.up)("v-window");return(0,r.wg)(),(0,r.iD)("span",null,[(0,r.Wm)(M,null,{appTabs:(0,r.w5)((function(){return[(0,r.Wm)(j,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.tab=e}),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,r.w5)((function(){return[(0,r.Wm)(D,{value:"1","hide-slider":""},{default:(0,r.w5)((function(){return[(0,r.Uk)("待检验")]})),_:1}),(0,r.Wm)(D,{value:"2","hide-slider":""},{default:(0,r.w5)((function(){return[(0,r.Uk)("检验完成")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),a,"1"==t.tab?((0,r.wg)(),(0,r.j4)(H,{key:0,style:{position:"fixed",top:"220px",right:"16px","z-index":"11"},icon:"mdi-plus",color:"secondary",onClick:B.addHandle},null,8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(X,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tab=e})},{default:(0,r.w5)((function(){return[(0,r.Wm)(K,{value:"1",class:"v-window-item-table"},{default:(0,r.w5)((function(){return[(0,r.Wm)(J,{placeholder:"扫描或输入 入库单号",onSearchClick:B.barSearchClick},null,8,["onSearchClick"]),"1"==t.tab?((0,r.wg)(),(0,r.j4)(Y,{key:0,ref:"table1",url:"/iiot/qmTask/list",method:"post",auto:!1,params:{taskType:"IQC",params:{statusList:["N","R"]}}},{tableBody:(0,r.w5)((function(t){return[(0,r.Wm)(G,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(P,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(A,{cols:"11"},{default:(0,r.w5)((function(){return[(0,r._)("p",u,(0,i.zw)(B.FormatDictionary("qm_task_status",t.items.taskStatus)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("p",l,(0,i.zw)(t.items.partNo)+"-"+(0,i.zw)(t.items.partName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[o]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",s,(0,i.zw)(t.items.taskNo),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",p,(0,i.zw)(t.items.receiptNo),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[f]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",d,(0,i.zw)("1"==t.items.isReceipt?"已收货":"未收货"),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[m]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",{onClick:function(e){return B.GlobalTooltipFunc("".concat(t.items.supplierCode||"","-").concat(t.items.supplierName||""))},class:"text-truncate font-weight-light"},(0,i.zw)(t.items.supplierCode)+"-"+(0,i.zw)(t.items.supplierName),9,h)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[w]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",g,(0,i.zw)(t.items.requestTime),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[y]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",x,(0,i.zw)(t.items.receiptNo),1)]})),_:2},1024)]})),_:2},1024),"R"==t.items.taskStatus?((0,r.wg)(),(0,r.j4)(P,{key:0,"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r._)("p",v,[_,(0,r.Uk)(" "+(0,i.zw)(t.items.taskQty),1)])]})),_:2},1024),(0,r.Wm)(A,{cols:"6",class:"text-left"},{default:(0,r.w5)((function(){return[(0,r.Wm)(E,{modelValue:t.items._taskQty,"onUpdate:modelValue":function(e){return t.items._taskQty=e},style:{padding:"0px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024)):(0,r.kq)("",!0),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"6",class:"text-left"},{default:(0,r.w5)((function(){return["R"==t.items.taskStatus?((0,r.wg)(),(0,r.j4)(H,{key:0,onClick:function(e){return B.accomplishClick(t)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("检验完成")]})),_:2},1032,["onClick"])):(0,r.kq)("",!0)]})),_:2},1024),(0,r.Wm)(A,{cols:"6",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{onClick:function(e){return B.detailClick(t)},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("检验")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},512)):(0,r.kq)("",!0)]})),_:1}),(0,r.Wm)(K,{value:"2",class:"v-window-item-table"},{default:(0,r.w5)((function(){return[(0,r.Wm)(J,{placeholder:"扫描或输入 入库单号",onSearchClick:B.barSearchClick2},null,8,["onSearchClick"]),"2"==t.tab?((0,r.wg)(),(0,r.j4)(Y,{key:0,ref:"table2",url:"/iiot/qmTask/list",method:"post",auto:!1,params:{taskType:"IQC",params:{statusList:["F"]}}},{tableBody:(0,r.w5)((function(t){return[(0,r.Wm)(G,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(P,{"no-gutters":"",class:"table-title"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"1"},{default:(0,r.w5)((function(){return[(0,r.Wm)(R,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,r.Wm)(A,{cols:"11"},{default:(0,r.w5)((function(){return[(0,r._)("p",k,(0,i.zw)(B.FormatDictionary("qm_task_status",t.items.taskStatus)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"12"},{default:(0,r.w5)((function(){return[(0,r._)("p",b,(0,i.zw)(t.items.partNo)+"-"+(0,i.zw)(t.items.partName),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[W]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",C,(0,i.zw)(t.items.taskNo),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[Z]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",S,(0,i.zw)(t.items.receiptNo),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[V]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",N,(0,i.zw)("1"==t.items.isReceipt?"已收货":"未收货"),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[U]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",{onClick:function(e){return B.GlobalTooltipFunc("".concat(t.items.supplierCode||"","-").concat(t.items.supplierName||""))},class:"text-truncate font-weight-light"},(0,i.zw)(t.items.supplierCode)+"-"+(0,i.zw)(t.items.supplierName),9,F)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[O]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",q,(0,i.zw)(t.items.requestTime),1)]})),_:2},1024)]})),_:2},1024),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"4"},{default:(0,r.w5)((function(){return[I]})),_:1}),(0,r.Wm)(A,{cols:"8"},{default:(0,r.w5)((function(){return[(0,r._)("p",Q,(0,i.zw)(t.items.receiptNo),1)]})),_:2},1024)]})),_:2},1024),"R"==t.items.taskStatus?((0,r.wg)(),(0,r.j4)(P,{key:0,"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"6"},{default:(0,r.w5)((function(){return[(0,r._)("p",z,[T,(0,r.Uk)(" "+(0,i.zw)(t.items.taskQty),1)])]})),_:2},1024),(0,r.Wm)(A,{cols:"6",class:"text-left"},{default:(0,r.w5)((function(){return[(0,r.Wm)(E,{modelValue:t.items._taskQty,"onUpdate:modelValue":function(e){return t.items._taskQty=e},style:{padding:"0px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024)):(0,r.kq)("",!0),(0,r.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,r.w5)((function(){return[(0,r.Wm)(A,{cols:"6",class:"text-left"}),(0,r.Wm)(A,{cols:"6",class:"text-right"},{default:(0,r.w5)((function(){return[(0,r.Wm)(H,{onClick:function(e){return B.detailClick(t,"detail")},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,r.w5)((function(){return[(0,r.Uk)("详情")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},512)):(0,r.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"])])}var $=n(50124),B=n(48534),D=(n(57327),n(41539),n(73210),n(57658),n(38862),n(9653),n(76496)),j=n(88575),M=n(37184),H=n(73378),J=n(98167),R=n(20868),A={components:{AppBarPage:D.Z,AddPage:J["default"],ScanBarComponents:H.Z,TableComponents:j.Z},data:function(){return{tab:"1",partModel:""}},watch:{tab:function(t){this.initHandle()}},created:function(){var t=this;this.initHandle(),this.$root.$emitter.on("update_qualityMaterial_page1",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";t.tab=e}))},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,R.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],i=r.filter((function(t){return e==t.value}))[0]||{};return i},initHandle:function(){var t=this,e=this.$route.query.tabs;e&&(this.tab=e),this.partModel=localStorage.getItem("_qualityMaterialPartModel"),this.$nextTick((function(){"1"==t.tab&&t.$refs.table1.initFunc(1,{}),"2"==t.tab&&t.$refs.table2.initFunc(1,{})}))},barSearchClick:function(){var t=arguments,e=this;return(0,B.Z)((0,$.Z)().mark((function n(){var r,i;return(0,$.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.length>0&&void 0!==t[0]?t[0]:"",i=r.trim(),e.$refs.table1.initFunc(1,{receiptNo:i});case 3:case"end":return n.stop()}}),n)})))()},barSearchClick2:function(){var t=arguments,e=this;return(0,B.Z)((0,$.Z)().mark((function n(){var r,i;return(0,$.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.length>0&&void 0!==t[0]?t[0]:"",i=r.trim(),e.$refs.table2.initFunc(1,{receiptNo:i});case 3:case"end":return n.stop()}}),n)})))()},detailClick:function(t){var e=arguments,n=this;return(0,B.Z)((0,$.Z)().mark((function r(){var i,a;return(0,$.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:i=e.length>1&&void 0!==e[1]?e[1]:"",a=t.items,n.$router.push({path:"/qualityMaterial/detail",query:{_pageActive:i,ttQmTaskId:a.ttQmTaskId,row:JSON.stringify(a)}});case 3:case"end":return r.stop()}}),r)})))()},accomplishClick:function(t){var e=this;return(0,B.Z)((0,$.Z)().mark((function n(){var r,i,a,u,l,o;return(0,$.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.items,i=Number(r._taskQty||""),i){n.next=5;break}return(0,R.LJ)("合格数量必填！"),n.abrupt("return");case 5:if(!(i>Number(r.taskQty))){n.next=8;break}return(0,R.LJ)("合格数量不能大于检验数量！"),n.abrupt("return");case 8:return a={ttQmTaskId:r.ttQmTaskId,taskQty:r.taskQty,qualifiedQty:r.taskQty,version:r.version,acceptQty:i},n.next=11,(0,M.i)({url:"/iiot/qmTask/finishQmTask",method:"post",payload:a});case 11:u=n.sent,l=u.code,o=u.data,void 0===o?{}:o,200==l&&((0,R.XA)("提交成功！"),e.$nextTick((function(){e.$refs.table1.initFunc(1)})));case 16:case"end":return n.stop()}}),n)})))()},addHandle:function(){this.$router.push({path:"/qualityMaterial/add",query:{}})},detailHandle:function(t){t.items}}},P=n(40089);const E=(0,P.Z)(A,[["render",L]]);var G=E}}]);
//# sourceMappingURL=chunk.4696.1689574395279.js.map