"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[5216],{14614:function(t,e,n){n.d(e,{m:function(){return u}});var r=n(50124),a=n(48534),i=n(37184),u=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/equipmentRepair/proConfirmWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},89337:function(t,e,n){n.d(e,{$w:function(){return p},AT:function(){return o},NM:function(){return l},ew:function(){return c},jt:function(){return u},vU:function(){return s}});var r=n(50124),a=n(48534),i=n(37184),u=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,n=arguments;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.next=3,(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:e.payload});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},5878:function(t,e,n){n.d(e,{b:function(){return a}});var r=n(66347),a=(n(57658),function(t,e,n,a){var i,u={id:e||"id",parentId:n||"parentId",childrenList:a||"children"},o={},s={},c=[],l=(0,r.Z)(t);try{for(l.s();!(i=l.n()).done;){var p=i.value,f=p[u.parentId];null==o[f]&&(o[f]=[]),s[p[u.id]]=p,o[f].push(p)}}catch(x){l.e(x)}finally{l.f()}var d,m=(0,r.Z)(t);try{for(m.s();!(d=m.n()).done;){var h=d.value,w=h[u.parentId];null==s[w]&&c.push(h)}}catch(x){m.e(x)}finally{m.f()}for(var g=0,k=c;g<k.length;g++){var v=k[g];_(v)}function _(t){if(null!==o[t[u.id]]&&(t[u.childrenList]=o[t[u.id]]),t[u.childrenList]){var e,n=(0,r.Z)(t[u.childrenList]);try{for(n.s();!(e=n.n()).done;){var a=e.value;_(a)}}catch(x){n.e(x)}finally{n.f()}}}return c})},88575:function(t,e,n){n.d(e,{Z:function(){return C}});var r=n(73396),a=n(87139),i={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},u=(0,r._)("span",null,"第",-1),o={style:{"padding-left":"1px","padding-right":"1px"}},s=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,r._)("span",null,"共",-1),l={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,r._)("span",{style:{"margin-right":"3px"}},"页",-1),f=(0,r._)("span",null,"总",-1),d={style:{"padding-left":"1px","padding-right":"1px"}},m=(0,r._)("span",null,"条",-1),h={style:{position:"relative",top:"1px","margin-left":"0px"}},w={key:2,class:"text-center",style:{"padding-top":"12px"}};function g(t,e,n,g,k,v){var _=(0,r.up)("v-icon"),x=(0,r.up)("v-btn"),y=(0,r.up)("v-card");return(0,r.wg)(),(0,r.iD)("span",null,[t.paging&&n.pagingShow?((0,r.wg)(),(0,r.j4)(y,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:v.previousHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-left")]})),_:1})]})),_:1},8,["onClick"]),(0,r.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:v.nextHandle},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"28"},{default:(0,r.w5)((function(){return[(0,r.Uk)("mdi-chevron-right")]})),_:1})]})),_:1},8,["onClick"]),(0,r._)("span",i,[u,(0,r._)("span",o,(0,a.zw)(t.current),1),s,c,(0,r._)("span",l,(0,a.zw)(t.page),1),p,f,(0,r._)("span",d,(0,a.zw)(t.totalNum),1),m]),(0,r._)("span",h,[n.showSearchBtn?((0,r.wg)(),(0,r.j4)(x,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:v.searchClick,variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Wm)(_,{size:"24",icon:"mdi-magnify"}),(0,r.Uk)(" 查询 ")]})),_:1},8,["onClick"])):(0,r.kq)("",!0),(0,r.Wm)(x,{onClick:v.refreshClick,style:(0,a.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" 刷新 ")]})),_:1},8,["onClick"])])]})),_:1})):(0,r.kq)("",!0),t.items.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(t.items,(function(e,n){return(0,r.WI)(t.$slots,"tableBody",{key:n,items:e,_index:n})})),128)):((0,r.wg)(),(0,r.iD)("p",w,[(0,r.Wm)(_,{icon:"mdi-emoticon-sad-outline"}),(0,r.Uk)(" 无数据！ ")]))])}var k=n(50124),v=n(95082),_=n(48534),x=(n(21249),n(37184)),y=n(20868),b={components:{},emits:["searchClick","refresh"],data:function(){return{totalNum:0,current:1,page:0,paging:!0,items:[]}},created:function(){var t=this.auto,e=this.url;t&&e&&this.initFunc()},methods:{previousHandle:function(){var t=this,e=this.current;1!=e?(this.current=e-1,this.$nextTick((function(){t.initFunc(t.current)}))):(0,y.LJ)("第一页！")},nextHandle:function(){var t=this,e=this.current,n=this.page;e>=n?(0,y.LJ)("最后一页！"):(this.current=e+1,this.$nextTick((function(){t.initFunc(t.current)})))},initFunc:function(){var t=arguments,e=this;return(0,_.Z)((0,k.Z)().mark((function n(){var r,a,i,u,o,s,c,l,p,f,d,m,h,w,g,_;return(0,k.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:1,a=t.length>1?t[1]:void 0,i=e.url,u=e.params,o=void 0===u?{}:u,s=e.children,c=e.method,l=e.formatData,!s){n.next=7;break}return e.items=s,e.paging=!1,n.abrupt("return");case 7:return p=(0,v.Z)((0,v.Z)({pageNum:r,pageSize:10},o),a),n.next=10,(0,x.i)({method:c,url:i,payload:"post"==c?p:{},url_params:"get"==c?p:{}});case 10:f=n.sent,d=f.code,m=f.total,h=void 0===m?0:m,w=f.msg,void 0===w?"":w,g=f.data,_=f.rows,200==d&&(e.totalNum=h,e.current=r,e.page=Math.ceil(h/p.pageSize),e.items=l?l(g||_||[]):g||_||[]);case 19:case"end":return n.stop()}}),n)})))()},refreshClick:function(){var t=this.refreshFunc;!t&&this.initFunc(1),this.$emit("refresh")},searchClick:function(){this.$emit("searchClick")},resultData:function(){return this.items||[]},selectAll:function(){this.items=this.items.map((function(t){return Object.assign(t,{_checked:!0})}))}},props:{method:{type:String,default:function(){return"get"}},refreshFunc:{type:Boolean,default:function(){return!1}},showSearchBtn:{type:Boolean,default:function(){return!1}},auto:{type:Boolean,default:function(){return!0}},pagingShow:{type:Boolean,default:function(){return!0}},children:{type:Array,default:function(){}},url:{type:String,default:function(){return""}},params:{type:Object,default:function(){}},formatData:{}}},W=n(40089);const S=(0,W.Z)(b,[["render",g]]);var C=S},62127:function(t,e,n){n.r(e),n.d(e,{default:function(){return ut}});var r=n(95082),a=(n(21249),n(73396)),i=n(87139),u=(0,a._)("div",{style:{height:"50px"}},null,-1),o={class:"font-weight-medium text-right text-teal-lighten-1"},s={class:"text-left font-weight-medium",style:{color:"#00E5FF"}},c=(0,a._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),l={class:"text-truncate font-weight-medium font-weight-light"},p=(0,a._)("p",{class:"font-weight-medium text"},"订单号:",-1),f={class:"text-truncate font-weight-medium font-weight-light"},d={class:"font-weight-medium text"},m=(0,a._)("span",null,"产品SN号: ",-1),h=(0,a._)("p",{class:"font-weight-medium text"},"工作中心:",-1),w={class:"text-truncate font-weight-medium font-weight-light"},g=(0,a._)("p",{class:"font-weight-medium text"},"报检时间:",-1),k={class:"text-truncate font-weight-medium font-weight-light"},v={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},_=(0,a._)("span",{class:"font-weight-medium text"},"检验数量:",-1),x=(0,a._)("p",{class:"font-weight-medium text"},"合格数量:",-1),y={class:"font-weight-medium text-right text-teal-lighten-1"},b={class:"text-left font-weight-medium",style:{color:"#00E5FF"}},W=(0,a._)("p",{class:"font-weight-medium text"},"任务流水号:",-1),S={class:"text-truncate font-weight-medium font-weight-light"},C=(0,a._)("p",{class:"font-weight-medium text"},"订单号:",-1),Z={class:"text-truncate font-weight-medium font-weight-light"},T={class:"font-weight-medium text"},F=(0,a._)("span",null,"产品SN号: ",-1),I=(0,a._)("p",{class:"font-weight-medium text"},"工作中心:",-1),B={class:"text-truncate font-weight-medium font-weight-light"},z=(0,a._)("p",{class:"font-weight-medium text"},"报检时间:",-1),N={class:"text-truncate font-weight-medium font-weight-light"},$={class:"text-truncate font-weight-light",style:{"margin-top":"6px"}},H=(0,a._)("span",{class:"font-weight-medium text"},"检验数量:",-1),q=(0,a._)("h3",null,"检验选择",-1),Q=(0,a._)("div",{style:{height:"6px"}},null,-1),D={class:"font-weight-medium text text-teal-lighten-1"},P=(0,a._)("div",{style:{height:"20px"}},null,-1),U=(0,a._)("div",{style:{height:"16px"}},null,-1),O=(0,a._)("div",{style:{height:"16px"}},null,-1);function A(t,e,n,A,j,L){var V=(0,a.up)("v-tab"),R=(0,a.up)("v-tabs"),J=(0,a.up)("AppBarPage"),E=(0,a.up)("v-btn"),M=(0,a.up)("ScanBarComponents"),G=(0,a.up)("v-badge"),K=(0,a.up)("v-col"),X=(0,a.up)("v-row"),Y=(0,a.up)("van-field"),tt=(0,a.up)("v-card"),et=(0,a.up)("TableComponents"),nt=(0,a.up)("v-window-item"),rt=(0,a.up)("v-window"),at=(0,a.up)("van-popup"),it=(0,a.up)("SearchPage"),ut=(0,a.up)("SearchPage2");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(J,null,{appTabs:(0,a.w5)((function(){return[(0,a.Wm)(R,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.tab=e}),density:"comfortable","align-with-title":"",class:"custem-tabs-global"},{default:(0,a.w5)((function(){return[(0,a.Wm)(V,{value:"1","hide-slider":""},{default:(0,a.w5)((function(){return[(0,a.Uk)("待检验")]})),_:1}),(0,a.Wm)(V,{value:"2","hide-slider":""},{default:(0,a.w5)((function(){return[(0,a.Uk)("检验完成")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),u,1==t.tab?((0,a.wg)(),(0,a.j4)(E,{key:0,style:{position:"fixed",top:"220px",right:"16px","z-index":"11"},icon:"mdi-plus",color:"secondary",onClick:L.addHandle},null,8,["onClick"])):(0,a.kq)("",!0),(0,a.Wm)(rt,{modelValue:t.tab,"onUpdate:modelValue":e[1]||(e[1]=function(e){return t.tab=e})},{default:(0,a.w5)((function(){return[(0,a.Wm)(nt,{value:"1",class:"v-window-item-table"},{default:(0,a.w5)((function(){return[(0,a.Wm)(M,{placeholder:"请扫描或输入 SN号",onSearchClick:L.barSearchClick},null,8,["onSearchClick"]),"1"==t.tab?((0,a.wg)(),(0,a.j4)(et,{key:0,ref:"table1",url:"/iiot/qmTask/list",method:"post",showSearchBtn:!0,params:(0,r.Z)({taskType:"IPQC",params:{statusList:["N","R"]}},t.pageSearchConfig),formatData:function(t){return t.map((function(t){return Object.assign(t,{_taskQty:"1"})}))},onSearchClick:L.searchClick},{tableBody:(0,a.w5)((function(t){return[(0,a.Wm)(tt,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(X,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"1"},{default:(0,a.w5)((function(){return[(0,a.Wm)(G,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,a.Wm)(K,{cols:"1"}),(0,a.Wm)(K,{cols:"10"},{default:(0,a.w5)((function(){return[(0,a._)("p",o,(0,i.zw)(L.FormatDictionary("process_state",t.items.processState)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"12",color:"primary"},{default:(0,a.w5)((function(){return[(0,a._)("p",s,(0,i.zw)(t.items.partNo)+"-"+(0,i.zw)(t.items.partName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[c]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",l,(0,i.zw)(t.items.taskNo),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[p]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",f,(0,i.zw)(t.items.orderNo),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",d,[m,(0,a._)("span",null,(0,i.zw)(t.items.sn),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[h]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",w,(0,i.zw)(t.items.nodeLevelName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[g]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",k,(0,i.zw)(t.items.requestTime),1)]})),_:2},1024)]})),_:2},1024),"R"==t.items.taskStatus?((0,a.wg)(),(0,a.j4)(X,{key:0,"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",v,[_,(0,a.Uk)(" "+(0,i.zw)(t.items.taskQty),1)])]})),_:2},1024),(0,a.Wm)(K,{cols:"4",class:"text-left"})]})),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[x]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{modelValue:t.items._taskQty,"onUpdate:modelValue":function(e){return t.items._taskQty=e},style:{position:"relative",padding:"0px",top:"-4px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"6",class:"text-left"},{default:(0,a.w5)((function(){return["R"==t.items.taskStatus&&"D"==t.items.processState?((0,a.wg)(),(0,a.j4)(E,{key:0,onClick:function(e){return L.accomplishClick(t)},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("检验确认")]})),_:2},1032,["onClick"])):(0,a.kq)("",!0)]})),_:2},1024),(0,a.Wm)(K,{cols:"6",class:"text-right"},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,{onClick:function(e){return L.detailClick(t)},style:{"font-size":"20px"},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("检验")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","formatData","onSearchClick"])):(0,a.kq)("",!0)]})),_:1}),(0,a.Wm)(nt,{value:"2",class:"v-window-item-table"},{default:(0,a.w5)((function(){return[(0,a.Wm)(M,{placeholder:"请扫描或输入 SN号",onSearchClick:L.barSearchClick2},null,8,["onSearchClick"]),"2"==t.tab?((0,a.wg)(),(0,a.j4)(et,{key:0,ref:"table2",url:"/iiot/qmTask/list",method:"post",showSearchBtn:!0,params:(0,r.Z)({taskType:"IPQC",params:{statusList:["F"]}},t.pageSearchConfig2),onSearchClick:L.searchClick2},{tableBody:(0,a.w5)((function(t){return[(0,a.Wm)(tt,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(X,{"no-gutters":"",class:"table-title"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"1"},{default:(0,a.w5)((function(){return[(0,a.Wm)(G,{content:t._index+1,color:"primary",inline:""},null,8,["content"])]})),_:2},1024),(0,a.Wm)(K,{cols:"1"}),(0,a.Wm)(K,{cols:"10"},{default:(0,a.w5)((function(){return[(0,a._)("p",y,(0,i.zw)(L.FormatDictionary("process_state",t.items.processState)["lable"]),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"12",color:"primary"},{default:(0,a.w5)((function(){return[(0,a._)("p",b,(0,i.zw)(t.items.partNo)+"-"+(0,i.zw)(t.items.partName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[W]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",S,(0,i.zw)(t.items.taskNo),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[C]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",Z,(0,i.zw)(t.items.orderNo),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"12"},{default:(0,a.w5)((function(){return[(0,a._)("p",T,[F,(0,a._)("span",null,(0,i.zw)(t.items.sn),1)])]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[I]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",B,(0,i.zw)(t.items.nodeLevelName),1)]})),_:2},1024)]})),_:2},1024),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"4"},{default:(0,a.w5)((function(){return[z]})),_:1}),(0,a.Wm)(K,{cols:"8"},{default:(0,a.w5)((function(){return[(0,a._)("p",N,(0,i.zw)(t.items.requestTime),1)]})),_:2},1024)]})),_:2},1024),"R"==t.items.taskStatus?((0,a.wg)(),(0,a.j4)(X,{key:0,"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"6"},{default:(0,a.w5)((function(){return[(0,a._)("p",$,[H,(0,a.Uk)(" "+(0,i.zw)(t.items.taskQty),1)])]})),_:2},1024),(0,a.Wm)(K,{cols:"6",class:"text-left"},{default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{modelValue:t.items._taskQty,"onUpdate:modelValue":function(e){return t.items._taskQty=e},style:{padding:"0px"},class:"custem-input-index1",placeholder:"合格数量",autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)]})),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(X,{"no-gutters":"",class:"text"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{cols:"6",class:"text-left"}),(0,a.Wm)(K,{cols:"6",class:"text-right"},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,{onClick:function(e){return L.detailClick(t,"detail")},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("详情")]})),_:2},1032,["onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["params","onSearchClick"])):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["modelValue"]),(0,a.Wm)(at,{show:t.showPicker,"onUpdate:show":e[5]||(e[5]=function(e){return t.showPicker=e}),style:{padding:"12px",height:"260px",width:"80%"},round:"",closeable:""},{default:(0,a.w5)((function(){return[q,(0,a._)("div",null,[Q,(0,a._)("p",D,(0,i.zw)(t.menuTopTitle),1),P,t.showBtn1?((0,a.wg)(),(0,a.j4)(E,{key:0,block:"",color:"primary",onClick:e[2]||(e[2]=function(t){return L.routerPush("2")})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 工序检验 ")]})),_:1})):(0,a.kq)("",!0),U,t.showBtn2?((0,a.wg)(),(0,a.j4)(E,{key:1,block:"",color:"indigo",onClick:e[3]||(e[3]=function(t){return L.routerPush("3")})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 调试检验 ")]})),_:1})):(0,a.kq)("",!0),O,t.showBtn3?((0,a.wg)(),(0,a.j4)(E,{key:2,block:"",color:"purple",onClick:e[4]||(e[4]=function(t){return L.routerPush("4")})},{default:(0,a.w5)((function(){return[(0,a.Uk)(" 入库检验 ")]})),_:1})):(0,a.kq)("",!0)])]})),_:1},8,["show"]),(0,a.Wm)(it,{ref:"searchPage",onResetHandle:L.resetHandle,onSearchHandle:L.searchHandle},null,8,["onResetHandle","onSearchHandle"]),(0,a.Wm)(ut,{ref:"searchPage2",onResetHandle:L.resetHandle2,onSearchHandle:L.searchHandle2},null,8,["onResetHandle","onSearchHandle"])])}var j=n(50124),L=n(48534),V=(n(57327),n(41539),n(73210),n(26699),n(57658),n(9653),n(76496)),R=n(88575),J=n(37184),E=n(73378),M=(0,a._)("div",{style:{height:"36px"}},null,-1),G={style:{"margin-top":"32px"}};function K(t,e,n,r,i,u){var o=(0,a.up)("SelectComponents"),s=(0,a.up)("v-btn"),c=(0,a.up)("v-col"),l=(0,a.up)("v-row"),p=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(p,{show:t.drawer,"onUpdate:show":e[2]||(e[2]=function(e){return t.drawer=e}),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,a.w5)((function(){return[M,(0,a.Wm)(o,{modelValue:t.property,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.property=e}),ref:"select2",label:"产品制式类别",option:t.propertySelectOption},null,8,["modelValue","option"]),(0,a._)("div",G,[(0,a.Wm)(l,{"no-gutters":""},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{onClick:e[1]||(e[1]=function(){return t.drawer=!1}),density:"compact",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("关闭")]})),_:1})]})),_:1}),(0,a.Wm)(c,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{onClick:u.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("重置")]})),_:1},8,["onClick"])]})),_:1}),(0,a.Wm)(c,{cols:"4",class:"text-center"},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{onClick:u.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,a.w5)((function(){return[(0,a.Uk)("查询")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])]})),_:1},8,["show"])])}n(92222),n(69600);var X=n(2243),Y=(n(89337),n(5878),{components:{SelectComponents:X.Z},emits:["searchHandle","resetHandle"],data:function(){return{drawer:!1,show:!1,fieldValue:"",options:[],factoryID:"",type:"",typeSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[]}},created:function(){this.initFunc()},methods:{FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],a=r.filter((function(t){return e==t.value}))[0]||{};return a},resetClick:function(){this.property="",this.$refs.select2.reset(),this.$emit("resetHandle",{})},initFunc:function(){var t=this;return(0,L.Z)((0,j.Z)().mark((function e(){var n,r;return(0,j.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n["production_type"]||[],t.propertySelectOption=r.map((function(t){return Object.assign({text:t.lable,value:t.value})}));case 3:case"end":return e.stop()}}),e)})))()},getTypeHttp:function(){var t=arguments,e=this;return(0,L.Z)((0,j.Z)().mark((function n(){var r,a,i,u,o;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",n.next=3,(0,J.i)({url:"/iiot/abnormalType/listAbnormalTypeForSelect",method:"get",url_params:{abnormalNo:r}});case 3:a=n.sent,i=a.code,u=a.data,o=void 0===u?[]:u,200==i&&(e.typeSelectOption=o.map((function(t){return Object.assign({text:"".concat(t.abnormalNo).concat(t.abnormalName),value:t.tmBasAbnormalTypeId})})));case 8:case"end":return n.stop()}}),n)})))()},onFinish:function(t){var e=t.selectedOptions;if(e.length){var n=(e[e.length-1]||{})["tmBasNodeLevelId"];this.factoryID=n,this.fieldValue=e.map((function(t){return t.nodeLevelName})).join("/")}},searchClick:function(){this.factoryID,this.type,this.property,this.status;var t={partType:this.property};this.$emit("searchHandle",t),this.drawer=!1},showDrawer:function(){this.drawer=!0}},props:{hideStatus:{type:Boolean,default:function(){return!0}}}}),tt=n(40089);const et=(0,tt.Z)(Y,[["render",K]]);var nt=et,rt=(n(14614),n(20868)),at={components:{AppBarPage:V.Z,ScanBarComponents:E.Z,SearchPage:nt,SearchPage2:nt,TableComponents:R.Z},data:function(){return{tab:"1",pageActive:"",showBtn1:!1,showBtn2:!1,showBtn3:!1,pageSearchConfig:{},pageSearchConfig2:{},menuTopTitle:"",bufferData:{},showPicker:!1}},created:function(){var t=this;this.initHandle(),this.$root.$emitter.on("update_process_page1",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";t.tab=e}))},methods:{GlobalTooltipFunc:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,rt.CF)({message:t,overlay:!0,closeOnClickOverlay:!0,duration:0})},FormatDictionary:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),r=n[t]||[],a=r.filter((function(t){return e==t.value}))[0]||{};return a},initHandle:function(){var t=this.$route.query.tabs;t&&(this.tab=t)},barSearchClick:function(){var t=arguments,e=this;return(0,L.Z)((0,j.Z)().mark((function n(){var r,a,i,u,o,s;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",a=r.trim(),n.next=4,(0,J.i)({url:"/iiot/orderSn/listOrderSnForSelect",method:"get",url_params:{sernr:a}});case 4:if(i=n.sent,u=i.code,o=i.data,s=void 0===o?[]:o,200!=u){n.next=13;break}if(s.length){n.next=12;break}return(0,rt.LJ)("SN号不存在！"),n.abrupt("return");case 12:e.$refs.table1.initFunc(1,{ttPpOrderSnId:(s[0]||{}).ttPpOrderSnId});case 13:case"end":return n.stop()}}),n)})))()},barSearchClick2:function(){var t=arguments,e=this;return(0,L.Z)((0,j.Z)().mark((function n(){var r,a,i,u,o,s;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:"",a=r.trim(),n.next=4,(0,J.i)({url:"/iiot/orderSn/listOrderSnForSelect",method:"get",url_params:{sernr:a}});case 4:if(i=n.sent,u=i.code,o=i.data,s=void 0===o?[]:o,200!=u){n.next=13;break}if(s.length){n.next=12;break}return(0,rt.LJ)("SN号不存在！"),n.abrupt("return");case 12:e.$refs.table2.initFunc(1,{ttPpOrderSnId:(s[0]||{}).ttPpOrderSnId});case 13:case"end":return n.stop()}}),n)})))()},detailClick:function(t){var e=arguments,n=this;return(0,L.Z)((0,j.Z)().mark((function r(){var a,i,u,o,s,c;return(0,j.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:"",i=t.items,n.pageActive=a,n.bufferData=i,n.menuTopTitle="",r.next=7,(0,J.i)({url:"/iiot/part/".concat(i.tmBasPartId),method:"get"});case 7:u=r.sent,o=u.code,s=u.data,c=void 0===s?{}:s,200==o&&(["ZF01","ZF02","ZF03","ZF04"].includes(c.mtart)?(n.showPicker=!0,n.menuTopTitle=n.FormatDictionary("process_state",i.processState)["lable"],"A"!=i.processState&&i.processState||(n.showBtn1=!0,n.showBtn2=!1,n.showBtn3=!1),"B"==i.processState&&(n.showBtn1=!0,n.showBtn2=!0,n.showBtn3=!1),"C"!=i.processState&&"D"!=i.processState||(n.showBtn1=!0,n.showBtn2=!0,n.showBtn3=!0)):n.$nextTick((function(){n.$router.push({path:"/process/detail",query:{_pageActive:n.pageActive,ttQmTaskId:i.ttQmTaskId,_pageIndex:1}})})));case 12:case"end":return r.stop()}}),r)})))()},searchClick:function(){this.$refs.searchPage.showDrawer()},searchHandle:function(t){var e=this;this.pageSearchConfig=t,this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},resetHandle:function(t){var e=this;this.pageSearchConfig={},this.$nextTick((function(){e.$refs.table1.initFunc(1)}))},searchClick2:function(){this.$refs.searchPage2.showDrawer()},searchHandle2:function(t){var e=this;this.pageSearchConfig2=t,this.$nextTick((function(){e.$refs.table2.initFunc(1)}))},resetHandle2:function(t){var e=this;this.pageSearchConfig2={},this.$nextTick((function(){e.$refs.table2.initFunc(1)}))},routerPush:function(t){var e=this.bufferData;switch(t){case"2":this.$router.push({path:"/process/detail2",query:{qcType:"IPQCA",_pageActive:this.pageActive,ttQmTaskId:e.ttQmTaskId,_pageIndex:2}});break;case"3":this.$router.push({path:"/process/detail3",query:{qcType:"IPQCB",_pageActive:this.pageActive,ttQmTaskId:e.ttQmTaskId,_pageIndex:3}});break;case"4":this.$router.push({path:"/taskList/index",query:{qcType:"IPQCC",_pageActive:this.pageActive,ttQmTaskId:e.ttQmTaskId,_pageIndex:4}});break;default:break}},accomplishClick:function(t){var e=this;return(0,L.Z)((0,j.Z)().mark((function n(){var r,a,i,u,o,s;return(0,j.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.items,a=Number(r._taskQty||""),a){n.next=5;break}return(0,rt.LJ)("合格数量必填！"),n.abrupt("return");case 5:if(!(a>Number(r.taskQty))){n.next=8;break}return(0,rt.LJ)("合格数量不能大于检验数量！"),n.abrupt("return");case 8:return i={ttQmTaskId:r.ttQmTaskId,taskQty:r.taskQty,qualifiedQty:r.taskQty,version:r.version,acceptQty:a},n.next=11,(0,J.i)({url:"/iiot/qmTask/finishQmTask",method:"post",payload:i});case 11:u=n.sent,o=u.code,s=u.data,void 0===s?{}:s,200==o&&((0,rt.XA)("提交成功！"),e.$nextTick((function(){e.$refs.table1.initFunc(1)})));case 16:case"end":return n.stop()}}),n)})))()},addHandle:function(){this.$router.push({path:"/process/add",query:{}})},detailHandle:function(t){t.items}}};const it=(0,tt.Z)(at,[["render",A]]);var ut=it}}]);
//# sourceMappingURL=chunk.5216.1689574395279.js.map