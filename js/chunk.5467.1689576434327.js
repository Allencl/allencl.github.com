"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[5467],{14614:function(t,e,a){a.d(e,{m:function(){return l}});var i=a(37184);const l=async t=>await(0,i.i)({url:"/iiot/equipmentRepair/proConfirmWbForApp",method:"post",payload:t.payload})},89337:function(t,e,a){a.d(e,{$w:function(){return c},AT:function(){return s},NM:function(){return r},ew:function(){return o},jt:function(){return l},vU:function(){return n}});var i=a(37184);const l=async(t={})=>await(0,i.i)({url:"/iiot/nodeLevel/list",method:"get",url_params:t}),s=async t=>await(0,i.i)({url:"/iiot/faultType/list?enabled=1",method:"get"}),n=async t=>await(0,i.i)({url:"/iiot/fault/list?enabled=1",method:"get"}),o=async t=>await(0,i.i)({url:"/system/dict/data/type/equipment_repair_type",method:"get"}),r=async t=>await(0,i.i)({url:"/iiot/equipmentRepair/userList?enabled=1",method:"post"}),c=async t=>await(0,i.i)({url:"/iiot/equipmentRepair/confirmRepairWbForApp",method:"post",payload:t.payload})},5878:function(t,e,a){a.d(e,{b:function(){return i}});a(33948),a(57658);const i=(t,e,a,i)=>{let l={id:e||"id",parentId:a||"parentId",childrenList:i||"children"};var s={},n={},o=[];for(let c of t){let t=c[l.parentId];null==s[t]&&(s[t]=[]),n[c[l.id]]=c,s[t].push(c)}for(let c of t){let t=c[l.parentId];null==n[t]&&o.push(c)}for(let c of o)r(c);function r(t){if(null!==s[t[l.id]]&&(t[l.childrenList]=s[t[l.id]]),t[l.childrenList])for(let e of t[l.childrenList])r(e)}return o}},88575:function(t,e,a){a.d(e,{Z:function(){return W}});var i=a(73396),l=a(87139);const s={style:{position:"relative",top:"3px","margin-left":"6px","font-size":"14px"}},n=(0,i._)("span",null,"第",-1),o={style:{"padding-left":"1px","padding-right":"1px"}},r=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),c=(0,i._)("span",null,"共",-1),u={style:{"padding-left":"1px","padding-right":"1px"}},p=(0,i._)("span",{style:{"margin-right":"3px"}},"页",-1),d=(0,i._)("span",null,"总",-1),m={style:{"padding-left":"1px","padding-right":"1px"}},h=(0,i._)("span",null,"条",-1),f={style:{position:"relative",top:"1px","margin-left":"0px"}},g={key:2,class:"text-center",style:{"padding-top":"12px"}};function w(t,e,a,w,y,_){const v=(0,i.up)("v-icon"),x=(0,i.up)("v-btn"),S=(0,i.up)("v-card");return(0,i.wg)(),(0,i.iD)("span",null,[t.paging&&a.pagingShow?((0,i.wg)(),(0,i.j4)(S,{key:0,elevation:"0",style:{"margin-bottom":"0px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{"margin-right":"6px",width:"28px",height:"28px"},onClick:_.previousHandle},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"28"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-left")])),_:1})])),_:1},8,["onClick"]),(0,i.Wm)(x,{variant:"outlined",size:"x-small",icon:"",color:"primary",style:{width:"28px",height:"28px"},onClick:_.nextHandle},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"28"},{default:(0,i.w5)((()=>[(0,i.Uk)("mdi-chevron-right")])),_:1})])),_:1},8,["onClick"]),(0,i._)("span",s,[n,(0,i._)("span",o,(0,l.zw)(t.current),1),r,c,(0,i._)("span",u,(0,l.zw)(t.page),1),p,d,(0,i._)("span",m,(0,l.zw)(t.totalNum),1),h]),(0,i._)("span",f,[a.showSearchBtn?((0,i.wg)(),(0,i.j4)(x,{key:0,style:{"padding-left":"8px","padding-right":"4px"},onClick:_.searchClick,variant:"plain",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"24",icon:"mdi-magnify"}),(0,i.Uk)(" 查询 ")])),_:1},8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(x,{onClick:_.refreshClick,style:(0,l.j5)(["min-width: 42px;width: 42px",{padding:"0"}]),variant:"plain",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 刷新 ")])),_:1},8,["onClick"])])])),_:1})):(0,i.kq)("",!0),t.items.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(t.items,((e,a)=>(0,i.WI)(t.$slots,"tableBody",{key:a,items:e,_index:a}))),128)):((0,i.wg)(),(0,i.iD)("p",g,[(0,i.Wm)(v,{icon:"mdi-emoticon-sad-outline"}),(0,i.Uk)(" 无数据！ ")]))])}var y=a(21801),_=a(37184);var v=a(20868),x={components:{},emits:["searchClick","refresh"],data:()=>({totalNum:0,current:1,page:0,paging:!0,items:[]}),created(){const{auto:t,url:e}=this;t&&e&&this.initFunc()},methods:{previousHandle(){const{current:t}=this;1!=t?(this.current=t-1,this.$nextTick((()=>{this.initFunc(this.current)}))):(0,v.LJ)("第一页！")},nextHandle(){const{current:t,page:e}=this;t>=e?(0,v.LJ)("最后一页！"):(this.current=t+1,this.$nextTick((()=>{this.initFunc(this.current)})))},async initFunc(t=1,e){const{url:a,params:i={},children:l,method:s,formatData:n}=this;if(l)return this.items=l,void(this.paging=!1);const o=(0,y.Z)((0,y.Z)({pageNum:t,pageSize:10},i),e),{code:r,total:c=0,msg:u="",data:p,rows:d}=await(0,_.i)({method:s,url:a,payload:"post"==s?o:{},url_params:"get"==s?o:{}});200==r&&(this.totalNum=c,this.current=t,this.page=Math.ceil(c/o.pageSize),this.items=n?n(p||d||[]):p||d||[])},refreshClick(){const{refreshFunc:t}=this;!t&&this.initFunc(1),this.$emit("refresh")},searchClick(){this.$emit("searchClick")},resultData(){return this.items||[]},selectAll(){this.items=this.items.map((t=>Object.assign(t,{_checked:!0})))}},props:{method:{type:String,default:()=>"get"},refreshFunc:{type:Boolean,default:()=>!1},showSearchBtn:{type:Boolean,default:()=>!1},auto:{type:Boolean,default:()=>!0},pagingShow:{type:Boolean,default:()=>!0},children:{type:Array,default:()=>{}},url:{type:String,default:()=>""},params:{type:Object,default:()=>{}},formatData:{}}},S=a(40089);const k=(0,S.Z)(x,[["render",w]]);var W=k},55467:function(t,e,a){a.r(e),a.d(e,{default:function(){return G}});var i=a(21801),l=a(73396),s=a(87139);const n={class:"v-window-item-table"},o=(0,l._)("p",{class:"font-weight-medium text"},"物料编码:",-1),r={class:"font-weight-light"},c=(0,l._)("p",{class:"font-weight-medium text"},"物料名称:",-1),u={class:"font-weight-light"},p=(0,l._)("p",{class:"font-weight-medium text"},"数量:",-1),d={class:"font-weight-light"},m=(0,l._)("p",{class:"font-weight-medium text"},"异常类型:",-1),h={class:"font-weight-light"},f=(0,l._)("p",{class:"font-weight-medium text"},"异常说明:",-1),g={class:"font-weight-light"},w=(0,l._)("p",{class:"font-weight-medium text"},"提报时间:",-1),y={class:"font-weight-light"},_=(0,l._)("p",{class:"font-weight-medium text"},"提报人:",-1),v={class:"font-weight-light"},x=(0,l._)("p",{class:"font-weight-medium text"},"处理类型:",-1),S={class:"font-weight-light"},k=(0,l._)("p",{class:"font-weight-medium text"},"处理说明:",-1),W={class:"font-weight-light"},b=(0,l._)("p",{class:"font-weight-medium text"},"处理人:",-1),C={class:"font-weight-light"},$=(0,l._)("p",{class:"font-weight-medium text"},"处理时间:",-1),N={class:"font-weight-light"},O=(0,l._)("p",{class:"font-weight-medium text"},"数据状态:",-1),T={class:"font-weight-light"};function q(t,e,a,q,D,I){const z=(0,l.up)("AppBarPage"),H=(0,l.up)("v-btn"),U=(0,l.up)("v-badge"),F=(0,l.up)("v-col"),V=(0,l.up)("v-row"),B=(0,l.up)("v-card"),A=(0,l.up)("TableComponents"),P=(0,l.up)("SearchPage");return(0,l.wg)(),(0,l.iD)("span",null,[(0,l.Wm)(z),(0,l.Wm)(H,{style:{position:"fixed",top:"170px",right:"16px","z-index":"11",color:"#fff !important"},icon:"mdi-plus",color:"secondary",onClick:I.errorHandle},null,8,["onClick"]),(0,l._)("div",n,[(0,l.Wm)(A,{ref:"table1",showSearchBtn:!0,auto:!1,url:"/iiot/deliverySlipAbnormal/list",params:(0,i.Z)((0,i.Z)({},t.initParams),t.pageSearchConfig),onSearchClick:I.searchClick},{tableBody:(0,l.w5)((t=>[(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,{"no-gutters":"",class:"table-title"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"1"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{content:t._index+1,color:"primary",inline:""},null,8,["content"])])),_:2},1024),(0,l.Wm)(F,{cols:"5"}),(0,l.Wm)(F,{cols:"1",class:"text-right"})])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",r,(0,s.zw)(t.items.partNo),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[c])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",u,(0,s.zw)(t.items.partName),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[p])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",d,(0,s.zw)(t.items.reqQty),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",h,(0,s.zw)(I.FormatDictionary("ccgl_abnormal_type",t.items.abnormalType)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",g,(0,s.zw)(t.items.abnormalExplain),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[w])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",y,(0,s.zw)(t.items.submitDatetime),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[_])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",v,(0,s.zw)(t.items.submitUser),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[x])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",S,(0,s.zw)(t.items.disposeType),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[k])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",W,(0,s.zw)(t.items.disposeExplain),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[b])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",C,(0,s.zw)(t.items.disposeUser),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[$])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",N,(0,s.zw)(t.items.disposeDatetime),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"4"},{default:(0,l.w5)((()=>[O])),_:1}),(0,l.Wm)(F,{cols:"8"},{default:(0,l.w5)((()=>[(0,l._)("p",T,(0,s.zw)(I.FormatDictionary("ccgl_abnomal_state",t.items.dataState)["lable"]),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(V,{"no-gutters":"",class:"text"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{cols:"3",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{onClick:e=>I.editClick(t),style:{"font-size":"18px"},color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("修改")])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(F,{cols:"3",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{onClick:e=>I.disposeClick(t),style:{"font-size":"18px"},color:"warning mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("处理")])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(F,{cols:"3",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{onClick:e=>I.deleteClick(t),style:{"font-size":"18px"},color:"error mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(F,{cols:"3",class:"text-center"})])),_:2},1024)])),_:2},1024)])),_:1},8,["params","onSearchClick"])]),(0,l.Wm)(P,{ref:"searchPage",onResetHandle:I.resetHandle,onSearchHandle:I.searchHandle},null,8,["onResetHandle","onSearchHandle"])])}a(57658);var D=a(76496),I=a(88575),z=a(37184);const H=(0,l._)("div",{style:{height:"52px"}},null,-1),U={style:{"margin-top":"32px"}};function F(t,e,a,i,s,n){const o=(0,l.up)("SelectComponents"),r=(0,l.up)("van-field"),c=(0,l.up)("v-btn"),u=(0,l.up)("v-col"),p=(0,l.up)("v-row"),d=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)("span",null,[(0,l.Wm)(d,{show:t.drawer,"onUpdate:show":e[7]||(e[7]=e=>t.drawer=e),closeable:"",position:"right",style:{padding:"12px",width:"90%",height:"100%"}},{default:(0,l.w5)((()=>[H,(0,l.Wm)(o,{modelValue:t.property,"onUpdate:modelValue":e[0]||(e[0]=e=>t.property=e),ref:"select22",label:"异常类型",option:t.propertySelectOption},null,8,["modelValue","option"]),(0,l.Wm)(o,{modelValue:t.status,"onUpdate:modelValue":e[1]||(e[1]=e=>t.status=e),ref:"select33",label:"处理类型",option:t.statusSelectOption},null,8,["modelValue","option"]),(0,l.Wm)(o,{modelValue:t.user,"onUpdate:modelValue":e[2]||(e[2]=e=>t.user=e),ref:"select66",label:"物料编码",option:t.repairmanSelectOption},null,8,["modelValue","option"]),(0,l.Wm)(o,{modelValue:t.dataStatus,"onUpdate:modelValue":e[3]||(e[3]=e=>t.dataStatus=e),ref:"select55",label:"数据状态",option:t.dataStatusSelectOption},null,8,["modelValue","option"]),(0,l.Wm)(r,{modelValue:t.value11,"onUpdate:modelValue":e[4]||(e[4]=e=>t.value11=e),placeholder:"请输入",autocomplete:"off",label:"提报人"},null,8,["modelValue"]),(0,l.Wm)(r,{modelValue:t.value22,"onUpdate:modelValue":e[5]||(e[5]=e=>t.value22=e),placeholder:"请输入",autocomplete:"off",label:"处理人"},null,8,["modelValue"]),(0,l._)("div",U,[(0,l.Wm)(p,{"no-gutters":""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{cols:"4",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:e[6]||(e[6]=()=>t.drawer=!1),density:"compact",variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("关闭")])),_:1})])),_:1}),(0,l.Wm)(u,{cols:"4",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:n.resetClick,density:"compact",color:"warning",variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(u,{cols:"4",class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{onClick:n.searchClick,density:"compact",color:"primary",variant:"plain"},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}var V=a(2243),B=a(21655),A=a(89337),P=(a(5878),{components:{SelectComponents:V.Z,DatePickerComponents:B.Z},emits:["searchHandle","resetHandle"],data:()=>({showFactory:!0,drawer:!1,dateStart:"",dateOver:"",show:!1,fieldValue:"",options:[],factoryID:"",equipment:"",equipmentSelectOption:[],user:"",userSelectOption:[],userAffirm:"",userAffirmSelectOption:[],property:"",propertySelectOption:[],status:"",statusSelectOption:[],dataStatus:"",dataStatusSelectOption:[],user:"",repairmanSelectOption:[],value11:"",value22:""}),created(){this.initFunc(),this.initRepairman()},methods:{FormatDictionary(t="",e=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=a[t]||[],l=i.filter((t=>e==t.value))[0]||{};return l},resetClick(){this.factoryID="",this.equipment="",this.dateStart="",this.dateOver="",this.user="",this.userAffirm="",this.fieldValue="",this.property="",this.dataStatus="",this.user="",this.value11="",this.value22="",this.status="",this.$refs.select22&&this.$refs.select22.reset(),this.$refs.select33&&this.$refs.select33.reset(),this.$refs.select55&&this.$refs.select55.reset(),this.$refs.select66&&this.$refs.select66.reset(),this.showFactory=!1,this.$nextTick((()=>{this.showFactory=!0})),this.$emit("resetHandle",{})},async initRepairman(){const{deliverySlipId:t}=this.$route.query,e=await(0,z.i)({url:`/iiot/deliverySlipPart/dict/${t}`,method:"get"});this.repairmanSelectOption=(e||[]).map((t=>Object.assign({text:`${t.dictLabel||""}`,value:t.dictValue})))},async initFunc(){const t=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),e=t["ccgl_abnomal_dispose"]||[];this.propertySelectOption=e.map((t=>Object.assign({text:t.lable,value:t.value})));const a=t["ccgl_delivery_slip_state"]||[];this.statusSelectOption=a.map((t=>Object.assign({text:t.lable,value:t.value})));const i=t["ccgl_abnomal_state"]||[];this.dataStatusSelectOption=i.map((t=>Object.assign({text:t.lable,value:t.value})))},async equipmentHTTP(t=""){const e=this,{fieldSelectValue:a={}}=this,{code:i,data:l=[]}=await(0,z.i)({url:"/iiot/equipment/list",method:"get",url_params:{tmBasNodeLevelId:e.factoryID||"",equipmentNo:t}});200==i&&(this.equipmentSelectOptionData=l,this.equipmentSelectOption=l.map((t=>Object.assign({text:`${t.equipmentNo}-${t.equipmentName}`,value:t.tmBasEquipmentId}))).splice(0,100))},async initUserHTTP(){const{data:t=[]}=await(0,A.NM)();this.userSelectOption=t.map((t=>Object.assign({text:`${t.userName}-${t.nickName}`,value:t.userName}))),this.userAffirmSelectOption=t.map((t=>Object.assign({text:`${t.userName}-${t.nickName}`,value:t.userName})))},onFinish({selectedOptions:t}){if(!t.length)return;let e=(t[t.length-1]||{})["tmBasNodeLevelId"];this.factoryID=e,this.fieldValue=t.map((t=>t.nodeLevelName)).join("/")},confirmFactory(){this.show=!1,this.equipment="",this.$refs.selectContent&&this.$refs.selectContent.reset(),this.$nextTick((()=>{this.equipmentHTTP()}))},searchClick(){const t={abnormalType:this.property,partNo:this.user,submitUser:this.value11,disposeType:this.status,disposeUser:this.value22,dataState:this.dataStatus};this.$emit("searchHandle",t),this.drawer=!1},showDrawer(){this.drawer=!0},async equipmentSearchChange(t=""){this.equipmentHTTP(t)}}}),j=a(40089);const L=(0,j.Z)(P,[["render",F]]);var Z=L,R=(a(14614),a(69650)),E=a(20868),M={components:{AppBarPage:D.Z,TableComponents:I.Z,SearchPage:Z},data:()=>({pageSearchConfig:{},initParams:{}}),created(){this.initHandle()},methods:{FormatDictionary(t="",e=""){const a=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),i=a[t]||[],l=i.filter((t=>e==t.value))[0]||{};return l},initHandle(){const{deliverySlipId:t="",deliverySlipType:e="",poNo:a="",srmNo:i=""}=this.$route.query;this.initParams={deliverySlipId:t,deliverySlipType:e,poNo:a,srmNo:i},this.$nextTick((()=>{this.$refs.table1.initFunc(1)}))},searchClick(){this.$refs.searchPage.showDrawer()},searchHandle(t={}){this.pageSearchConfig=t,this.$nextTick((()=>{this.$refs.table1.initFunc(1)}))},resetHandle(t){this.pageSearchConfig={},this.$nextTick((()=>{this.$refs.table1.initFunc(1)}))},errorHandle(){const{deliverySlipId:t="",deliverySlipType:e="",poNo:a="",srmNo:i=""}=this.$route.query;this.$router.push({path:"/storageManagement/errorAdd",query:{deliverySlipId:t,deliverySlipType:e,poNo:a,srmNo:i}})},editClick(t){const{abnormalId:e}=t.items,{deliverySlipId:a="",deliverySlipType:i="",poNo:l="",srmNo:s=""}=this.$route.query;this.$router.push({path:"/storageManagement/errorAdd",query:{deliverySlipId:a,deliverySlipType:i,poNo:l,srmNo:s,abnormalId:e}})},disposeClick(t){const{abnormalId:e}=t.items,{deliverySlipId:a="",deliverySlipType:i="",poNo:l="",srmNo:s=""}=this.$route.query;this.$router.push({path:"/storageManagement/errorAdd",query:{deliverySlipId:a,deliverySlipType:i,poNo:l,srmNo:s,abnormalId:e,isDispose:!0}})},deleteClick(t){const{abnormalId:e}=t.items;(0,R.vC)({title:"删除",message:"删除后数据不可恢复，确认删除！",theme:"round-button",closeOnClickOverlay:!0}).then((async()=>{const{code:t,data:a={}}=await(0,z.i)({url:"/iiot/deliverySlipAbnormal/"+e,method:"DELETE"});200==t&&((0,E.XA)("删除成功！"),this.$nextTick((()=>{this.$refs.table1.initFunc(1)})))}))}}};const J=(0,j.Z)(M,[["render",q]]);var G=J},69650:function(t,e,a){a.d(e,{vC:function(){return p}});var i=a(73396),l=a(12220),s=a(57548),n=a(21178);let o;const r={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let c=(0,l.l7)({},r);function u(){const t={setup(){const{state:t,toggle:e}=(0,s.o)();return()=>(0,i.Wm)(n.Z,(0,i.dG)(t,{"onUpdate:show":e}),null)}};({instance:o}=(0,s.H)(t))}function p(t){return l._f?new Promise(((e,a)=>{o||u(),o.open((0,l.l7)({},c,t,{callback:t=>{("confirm"===t?e:a)(t)}}))})):Promise.resolve()}}}]);
//# sourceMappingURL=chunk.5467.1689576434327.js.map