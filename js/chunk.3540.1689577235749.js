"use strict";(self["webpackChunksinoboom_mom"]=self["webpackChunksinoboom_mom"]||[]).push([[3540],{2243:function(e,t,l){l.d(t,{Z:function(){return w}});var a=l(73396),o=l(87139);const s={style:{height:"98%","padding-bottom":"40px"}},i={style:{height:"100%"}},c={style:{position:"relative",top:"4px"}},r=["onClick"],u={class:"text-truncate",style:{height:"24px"}},n={key:2,class:"text-center",style:{"margin-top":"16px"}};function d(e,t,l,d,p,h){const f=(0,a.up)("van-field"),m=(0,a.up)("v-col"),w=(0,a.up)("v-btn"),g=(0,a.up)("v-row"),_=(0,a.up)("van-search"),b=(0,a.up)("van-checkbox"),k=(0,a.up)("van-popup");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(f,{modelValue:e.fieldValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.fieldValue=t),"is-link":"",readonly:"",required:l.required,label:l.label,placeholder:l.placeholder,autocomplete:"off",type:l.multiple?"textarea":"text",onClick:h.fieldClick},null,8,["modelValue","required","label","placeholder","type","onClick"]),(0,a.Wm)(k,{show:e.showPicker,"onUpdate:show":t[5]||(t[5]=t=>e.showPicker=t),style:{padding:"12px 12px 4px 12px",height:"60%",width:"90%"},round:""},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",i,[(0,a.Wm)(g,{"no-gutters":"",style:{"font-weight":"bold","border-bottom":"1px solid #ccc","padding-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{cols:"6"},{default:(0,a.w5)((()=>[(0,a._)("p",null,(0,o.zw)(l.label)+"-选择框",1)])),_:1}),(0,a.Wm)(m,{cols:"6",class:"text-right"},{default:(0,a.w5)((()=>[(0,a._)("span",c,(0,o.zw)(e.BufferOption.filter((e=>e._checked)).length),1),l.selectAll?((0,a.wg)(),(0,a.j4)(w,{key:0,onClick:h.selectAllHandle,color:"primary mt-1",density:"compact",rounded:0,variant:"plain"},{default:(0,a.w5)((()=>[(0,a.Uk)("全选")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1}),l.showSearch?((0,a.wg)(),(0,a.j4)(g,{key:0,"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{cols:"8"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:e.valueSearch,"onUpdate:modelValue":t[1]||(t[1]=t=>e.valueSearch=t),shape:"",placeholder:l.placeholderSearch,style:{"padding-left":"0px"},clearable:!1},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(m,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:t[2]||(t[2]=e=>h.searchHandle(!0)),variant:"plain",color:"primary",block:"",style:{"margin-top":"8px"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 查询 ")])),_:1})])),_:1}),(0,a.Wm)(m,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:t[3]||(t[3]=e=>h.searchHandle(!1)),variant:"plain",block:"",style:{"margin-top":"8px"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 重置 ")])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0),e.BufferOption.length?((0,a.wg)(),(0,a.iD)("ul",{key:1,style:(0,o.j5)(`height: ${l.showSearch?"73%":"90%"};overflow-y:auto;padding-right:12px;padding-bottom: 20px;`)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.BufferOption,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,style:(0,o.j5)(`padding: 6px 22px 6px 6px;position:relative;color:${e._searchColor?"#FF9800":"#000"};`),onClick:t=>h.checkChange(e)},[(0,a._)("p",u,(0,o.zw)(e.text),1),(0,a.Wm)(b,{style:{position:"absolute",top:"8px",right:"0px"},modelValue:e._checked,"onUpdate:modelValue":t=>e._checked=t,shape:"square","checked-color":"#4CAF50",disabled:"",class:"custem-select-checkbox"},null,8,["modelValue","onUpdate:modelValue"])],12,r)))),128))],4)):((0,a.wg)(),(0,a.iD)("p",n,"无数据!"))]),(0,a.Wm)(g,{"no-gutters":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{variant:"plain",block:"",onClick:t[4]||(t[4]=()=>e.showPicker=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)(" 取消 ")])),_:1})])),_:1}),(0,a.Wm)(m,{cols:"6",class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{variant:"plain",color:"primary",block:"",onClick:h.confirmHandle},{default:(0,a.w5)((()=>[(0,a.Uk)(" 确定 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1},8,["show"])])}l(38862),l(73210),l(26699),l(32023);var p=l(20868),h={components:{},emits:["update:modelValue","onChange","onFieldClick","onSearchChange"],data:()=>({BufferOption:[],selectedValues:[],columns:[],fieldValue:"",showPicker:!1,valueSearch:""}),watch:{option:{handler(e=[]){this.BufferOption=JSON.parse(JSON.stringify(e)),this.$nextTick((()=>{this.modelValue&&this.setValue(this.modelValue)}))},deep:!0,immediate:!0},showPicker:{handler(e){this.$nextTick((()=>{if(e&&this.modelValue)if(this.multiple){const e=this.modelValue.split(",")||[];e.map((e=>{this.BufferOption.map((t=>{var l=t;return t.value==e&&(l._checked=!0),l}))}))}else this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==this.modelValue})))}))},deep:!0,immediate:!0}},methods:{showModle(){this.showPicker=!0},fieldClick(){this.disabled||(this.forbidShow||(this.showPicker=!0),this.$emit("onFieldClick"))},setfieldValue(e=""){this.fieldValue=e},reset(){this.fieldValue="",this.BufferOption.map((e=>Object.assign(e,{_checked:!1}))),this.$emit("update:modelValue","")},setValue(e=""){if(this.multiple){const t=e.split(",")||[];t.map((e=>{this.BufferOption.map((t=>{var l=t;return t.value==e&&(l._checked=!0),l}))})),this.fieldValue=this.BufferOption.filter((e=>e._checked)).map((e=>e.text)).join()}else{const t=JSON.parse(JSON.stringify(this.BufferOption)).filter((t=>t.value==e))[0]||{};this.fieldValue=t.text}},confirmHandle(){const{multiple:e}=this,t=this.BufferOption.filter((e=>1==e._checked));e?(this.fieldValue=t.map((e=>e.text)).join(),this.$emit("update:modelValue",t.map((e=>e.value)).join()||""),this.$emit("onChange",t.map((e=>e.value)).join())):(this.fieldValue=(t[0]||{}).text,this.$emit("update:modelValue",(t[0]||{}).value||""),this.$emit("onChange",(t[0]||{}).value,t[0]||{})),this.showPicker=!1},checkChange(e){const{multiple:t}=this,{_checked:l,value:a}=e;t?this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==a?!l:e._checked}))):this.BufferOption.map((e=>Object.assign(e,{_checked:e.value==a&&!l})))},multipleHandle(){const e=this.BufferOption.filter((e=>e._checked)),t=e.map((e=>e.value)).join();this.showPicker=!1,this.fieldValue=e.map((e=>e.text)).join(),this.$emit("update:modelValue",t),this.$emit("onChange",e)},searchHandle(e){const t=this.valueSearch.trim(),{filterSearch:l}=this;if(l&&e){const e=this.BufferOption.map((e=>Object.assign(e,{_searchColor:!1}))),l=e.filter((e=>e.text.includes(t))).map((e=>Object.assign(e,{_searchColor:!0})));if(!l.length)return void(0,p.LJ)("不存在！");const a=e.filter((e=>!e.text.includes(t))),o=a.filter((e=>e._checked)),s=a.filter((e=>!e._checked));this.BufferOption=l.concat(o).concat(s)}else e?this.$emit("onSearchChange",t):(this.valueSearch="",this.BufferOption=this.option,this.$nextTick((()=>{this.BufferOption=this.BufferOption.map((e=>Object.assign(e,{_checked:!1})))})),this.$emit("onSearchChange",""))},selectAllHandle(){this.BufferOption.map((e=>Object.assign(e,{_checked:!0})))}},props:{modelValue:{},disabled:{type:Boolean,default:()=>!1},showSearch:{type:Boolean,default:()=>!1},forbidShow:{type:Boolean,default:()=>!1},multiple:{type:Boolean,default:()=>!1},label:{type:String,default:()=>"标题"},placeholder:{type:String,default:()=>"请选择"},placeholderSearch:{type:String,default:()=>"请输入搜索关键词"},option:{type:Array,default:()=>[]},selectAll:{type:Boolean,default:()=>!1},required:{type:Boolean,default:()=>!1},filterSearch:{type:Boolean,default:()=>!1}}},f=l(40089);const m=(0,f.Z)(h,[["render",d]]);var w=m},13540:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var a=l(73396),o=l(87139);const s=(0,a._)("span",{class:"font-weight-medium"},"详情",-1),i={class:"text-truncate font-weight-medium text-right text-teal-lighten-1",color:"primary"},c=(0,a._)("p",{class:"font-weight-medium text"},"出入库类型:",-1),r={class:"font-weight-light"},u=(0,a._)("p",{class:"font-weight-medium text"},"出入库编码:",-1),n={class:"font-weight-light",style:{color:"#00E5FF"}},d=(0,a._)("p",{class:"font-weight-medium text"},"出入库名称:",-1),p={class:"font-weight-light"},h=(0,a._)("p",{class:"font-weight-medium text"},"业务类型:",-1),f={class:"font-weight-light"},m=(0,a._)("p",{class:"font-weight-medium text"},"单据编码:",-1),w={class:"font-weight-light",style:{color:"#00E5FF"}},g=(0,a._)("p",{class:"font-weight-medium text"},"单据名称:",-1),_={class:"font-weight-light"},b=(0,a._)("p",{class:"font-weight-medium text"},"物资编码:",-1),k={class:"font-weight-light",style:{color:"#00E5FF"}},y=(0,a._)("p",{class:"font-weight-medium text"},"申请数量:",-1),x={class:"font-weight-light"},v=(0,a._)("p",{class:"font-weight-medium text"},"出入库说明:",-1),W={class:"font-weight-light"},V=(0,a._)("div",{style:{height:"6px"}},null,-1);function C(e,t,l,C,O,S){const B=(0,a.up)("AppBarPage"),U=(0,a.up)("v-icon"),j=(0,a.up)("v-col"),P=(0,a.up)("v-row"),$=(0,a.up)("van-field"),N=(0,a.up)("v-switch"),F=(0,a.up)("SelectComponents"),D=(0,a.up)("v-btn"),z=(0,a.up)("v-sheet");return(0,a.wg)(),(0,a.iD)("span",null,[(0,a.Wm)(B),(0,a.Wm)(z,{elevation:"2",rounded:"",class:"custem-card"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{"no-gutters":"",class:"custem-card-title"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{icon:"mdi-rocket-launch",size:"16",color:"primary"}),s])),_:1}),(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[(0,a._)("p",i,(0,o.zw)(e.bufferRow.abnormalNo),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",r,(0,o.zw)(S.FormatDictionary("ccgl_oper_type",e.bufferRow.useInfoType)["lable"]),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[u])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",n,(0,o.zw)(e.bufferRow.sparePartUseCode),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[d])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",p,(0,o.zw)(e.bufferRow.sparePartUseName),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",f,(0,o.zw)(S.FormatDictionary("ccgl_bpbj_business_type",e.bufferRow.businessType)["lable"]),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",w,(0,o.zw)(e.bufferRow.businessCode),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",_,(0,o.zw)(e.bufferRow.businessName),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[b])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",k,(0,o.zw)(e.bufferRow.goodsMaterialsCode),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",x,(0,o.zw)(e.bufferRow.goodsMaterialsNums),1)])),_:1})])),_:1}),(0,a.Wm)(P,{"no-gutters":"",class:"text"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"5"},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(j,{cols:"7"},{default:(0,a.w5)((()=>[(0,a._)("p",W,(0,o.zw)(e.bufferRow.sparePartUseExplain),1)])),_:1})])),_:1}),(0,a.Wm)($,{modelValue:e.number,"onUpdate:modelValue":t[0]||(t[0]=t=>e.number=t),autocomplete:"off",required:"",placeholder:"请输入",label:"出库数量"},null,8,["modelValue"]),(0,a.Wm)(N,{modelValue:e.switch22,"onUpdate:modelValue":t[1]||(t[1]=t=>e.switch22=t),label:e.switch22?"选择货架号":"输入货架号",color:"primary",density:"comfortable",style:{top:"-8px",left:"18px",position:"relative",height:"48px",display:"block",width:"304px"}},null,8,["modelValue","label"]),e.switch22?((0,a.wg)(),(0,a.j4)(F,{key:0,modelValue:e.property,"onUpdate:modelValue":t[2]||(t[2]=t=>e.property=t),label:"货架号",ref:"select11",option:e.selectPropertyOption},null,8,["modelValue","option"])):(0,a.kq)("",!0),e.switch22?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)($,{key:1,modelValue:e.property,"onUpdate:modelValue":t[3]||(t[3]=t=>e.property=t),autocomplete:"off",placeholder:"请输入",label:"货架号"},null,8,["modelValue"])),(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(j,{cols:"12",class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onClick:S.submit,block:"",color:"primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 提交 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),V])}var O=l(76496),S=l(37184),B=l(2243),U=l(20868),j=l(36797),P=l.n(j),$={components:{AppBarPage:O.Z,SelectComponents:B.Z},watch:{switch22(e){this.property="",this.$nextTick((()=>{this.$refs.select11&&this.$refs.select11.reset()}))}},data:()=>({switch22:!0,bufferRow:{},number:"",property:"",selectPropertyOption:[]}),created(){this.initFunc()},methods:{FormatDictionary(e="",t=""){const l=JSON.parse(localStorage.getItem("bufferDictionaries")||"{}"),a=l[e]||[],o=a.filter((e=>t==e.value))[0]||{};return o},async initFunc(){const{sparePartUseId:e}=this.$route.query,{code:t,data:l={}}=await(0,S.i)({url:"/iiot/sparePartUse",method:"get",url_RESTful:`/${e}`});200==t&&(this.bufferRow=l,this.shelfNumber(l))},async shelfNumber(e){console.log();const t=await(0,S.i)({url:"/iiot/sparePartUse/getStorageDictByPartId/"+e.goodsMaterialsId,method:"get"});this.selectPropertyOption=(t||[]).map((e=>Object.assign({text:e.dictLabel,value:e.dictCode})))},async submit(){const e=JSON.parse(localStorage.getItem("bufferUserInfo")||"{}");if(!this.number||Number(this.number)<=0)return void(0,U.LJ)("出库数量必填大于0！");const t=Object.assign(this.bufferRow,{finishState:"Y",outDatetime:P()(new Date).format("YYYY-MM-DD HH:mm:ss"),outNums:Number(this.number),outUserName:e.userName,outUserCode:e.userId,storageCode:this.property}),{code:l,data:a={}}=await(0,S.i)({url:"/iiot/sparePartUse",method:"put",payload:t});200==l&&((0,U.XA)("提交成功！"),this.$router.go(-1))}}},N=l(40089);const F=(0,N.Z)($,[["render",C]]);var D=F}}]);
//# sourceMappingURL=chunk.3540.1689577235749.js.map