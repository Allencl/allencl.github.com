{"version":3,"file":"js/chunk.7996.1689577168802.js","mappings":"mMAQsBA,MAAA,wB,GAgEdC,EAAAA,EAAAA,GAAiC,OAA5BD,MAAA,iBAAqB,S,qOAvE9BE,EAAAA,EAAAA,IAwEO,cAvEHC,EAAAA,EAAAA,IACaC,IAEbD,EAAAA,EAAAA,IAQQE,EAAA,CARD,gBAAWL,MAAA,yB,mBACd,iBAGQ,EAHRG,EAAAA,EAAAA,IAGQG,EAAA,CAHDC,KAAK,KAAG,C,kBACX,iBAA6D,EAA7DJ,EAAAA,EAAAA,IAA6DK,EAAA,CAArDC,KAAK,eAAeC,KAAK,KAAKC,MAAM,WAC5CV,EAAAA,EAAAA,GAA0E,OAA1EW,GAA0EC,EAAAA,EAAAA,IAAA,GAAAC,OAApCC,EAAAC,WAAU,mB,WAEpDb,EAAAA,EAAAA,IAEQG,EAAA,CAFDC,KAAK,IAAIU,MAAM,aAAajB,MAAA,0B,WAOvCG,EAAAA,EAAAA,IAyCUe,EAAA,CAzCDC,UAAU,IAAIC,QAAA,GAAQH,MAAM,e,mBAIjC,iBAKE,EALFd,EAAAA,EAAAA,IAKEkB,EAAA,C,WAJWN,EAAAO,K,qDAAAP,EAAAO,KAAIC,CAAA,GACbC,IAAI,WACJC,MAAM,OACLC,OAAQX,EAAAY,uB,iCAGbxB,EAAAA,EAAAA,IAA4FyB,EAAA,C,WAAxEb,EAAAc,O,qDAAAd,EAAAc,OAAMN,CAAA,GAAEO,KAAK,SAASC,YAAY,MAAMN,MAAM,KAAKO,aAAa,O,wBAGpF7B,EAAAA,EAAAA,IAKEkB,EAAA,C,WAJWN,EAAAe,K,qDAAAf,EAAAe,KAAIP,CAAA,GACbC,IAAI,WACJC,MAAM,OACLC,OAAQX,EAAAkB,kB,iCAGb9B,EAAAA,EAAAA,IAKEkB,EAAA,C,WAJWN,EAAAmB,M,qDAAAnB,EAAAmB,MAAKX,CAAA,GACdC,IAAI,WACJC,MAAM,OACLC,OAAQX,EAAAoB,mB,iCAIbhC,EAAAA,EAAAA,IAAyFyB,EAAA,C,WAArEb,EAAAqB,gB,qDAAArB,EAAAqB,gBAAeb,CAAA,GAAEQ,YAAY,MAAMN,MAAM,OAAOO,aAAa,O,uBAChEjB,EAAAsB,YAAS,WAA1BC,EAAAA,EAAAA,IAAyGV,EAAA,C,iBAApEb,EAAAwB,e,qDAAAxB,EAAAwB,eAAchB,CAAA,GAAEQ,YAAY,MAAMN,MAAM,OAAOO,aAAa,O,wCAIvFjB,EAAAsB,YAAS,WADnBC,EAAAA,EAAAA,IAMEjB,EAAA,C,iBAJWN,EAAAyB,W,qDAAAzB,EAAAyB,WAAUjB,CAAA,GACnBC,IAAI,WACJC,MAAM,OACLC,OAAQX,EAAA0B,wB,4DAKjBtC,EAAAA,EAAAA,IAWQE,EAAA,CAXD,iBAAU,C,kBACb,iBAQQ,EARRF,EAAAA,EAAAA,IAQQG,EAAA,CARDC,KAAK,MAAI,C,kBACZ,iBAMQ,EANRJ,EAAAA,EAAAA,IAMQuC,EAAA,CALJC,MAAA,GACAhC,MAAM,UACLiC,QAAOC,EAAAC,U,mBACX,iBAED,UAFC,Q,4CAMTC,G,uHAcN,GACEC,WAAW,CACPC,WAAAA,EAAAA,EACAC,iBAAAA,EAAAA,GAEJC,KAAM,iBAAO,CACTC,UAAU,CAAC,EACXpC,WAAW,GAEXqC,SAAS,CAAC,EACVhB,WAAU,EAEVf,KAAK,GACLK,sBAAsB,GAEtBE,OAAO,GAGPC,KAAK,GACLG,iBAAiB,GAEjBC,MAAM,GACNC,kBAAkB,GAElBC,gBAAgB,GAChBG,eAAe,GAEfC,WAAW,GACXC,uBAAuB,GAC1B,EACDa,QAAO,WACHC,KAAKC,WACLD,KAAKE,eACT,EACAC,QAAS,CAECF,SAAQ,WAAE,IAAAG,EAAA,YAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,IAAA,IAAAC,EAAAhD,EAAAqB,EAAA4B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAApB,EAAA,OAAAU,EAAAA,EAAAA,KAAAW,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAoBZ,OApBYX,EACiBL,EAAKiB,OAAOC,MAAlC7D,EAAUgD,EAAVhD,WAAWqB,EAAS2B,EAAT3B,UAElBsB,EAAK3C,WAAWA,EAChB2C,EAAKtB,UAAUA,EACT4B,EAAoBa,KAAKC,MAAMC,aAAaC,QAAQ,uBAAuB,MAG3Ef,EAAiBD,EAAoB,uBAAuB,GAClEN,EAAK1B,iBAAiBiC,EAAiBgB,KAAI,SAAAC,GAAC,OAAEC,OAAOC,OAAO,CAACC,KAAKH,EAAEI,MAAMC,MAAML,EAAEK,OAAO,IAGnFrB,EAAkBF,EAAoB,yBAAyB,GACrEN,EAAKxB,kBAAkBgC,EAAkBe,KAAI,SAAAC,GAAC,OAAEC,OAAOC,OAAO,CAACC,KAAKH,EAAEI,MAAMC,MAAML,EAAEK,OAAO,IAGrFpB,EAAkBH,EAAoB,uBAAuB,GACnEN,EAAKlB,uBAAuB2B,EAAkBc,KAAI,SAAAC,GAAC,OAAEC,OAAOC,OAAO,CAACC,KAAKH,EAAEI,MAAMC,MAAML,EAAEK,OAAO,IAGhGf,EAAAE,KAAA,IAC4Bc,EAAAA,EAAAA,GAAW,CACnCC,IAAK,8BAAgC1E,EACrC2E,OAAO,QACV,QAAAtB,EAAAI,EAAAmB,KAHMtB,EAAID,EAAJC,KAAIC,EAAAF,EAAClB,KAAAA,OAAI,IAAAoB,EAAC,CAAC,EAACA,EAKV,KAAND,IAECX,EAAKN,SAASF,EAEdQ,EAAKrC,KAAK6B,EAAK0C,OACflC,EAAK9B,OAAOsB,EAAKtB,OACjB8B,EAAK7B,KAAKqB,EAAK2C,aACfnC,EAAKzB,MAAMiB,EAAK4C,YAChBpC,EAAKvB,gBAAgBe,EAAKf,gBAI1BuB,EAAKqC,WAAU,WACXrC,EAAKsC,MAAMC,UAAYvC,EAAKsC,MAAMC,SAASC,SAAShD,EAAK0C,QACzDlC,EAAKsC,MAAMG,UAAYzC,EAAKsC,MAAMG,SAASD,SAAShD,EAAK2C,cACzDnC,EAAKsC,MAAMI,UAAY1C,EAAKsC,MAAMI,SAASF,SAAShD,EAAK4C,YAC7D,KACJ,yBAAAtB,EAAA6B,OAAA,GAAAvC,EAAA,IA3CYH,EA4ChB,EAEMH,cAAa,WAAE,IAAA8C,EAAA,YAAA3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAA0C,IAAA,IAAAC,EAAAC,EAAA,OAAA7C,EAAAA,EAAAA,KAAAW,MAAA,SAAAmC,GAAA,eAAAA,EAAAjC,KAAAiC,EAAAhC,MAAA,OAEI,OAAd8B,EAAgBF,EAAK3B,OAAOC,MAA5B4B,eAAcE,EAAAhC,KAAA,GAEFc,EAAAA,EAAAA,GAAW,CAC1BC,IAAG,+BAAA5E,OAAgC2F,GACnCd,OAAO,QACV,OAHKe,EAAKC,EAAAf,KAKXW,EAAK5E,uBAAuB+E,GAAO,IAAIxB,KAAI,SAAAC,GAAC,OAAEC,OAAOC,OAAO,CACxDC,KAAI,GAAAxE,OAAIqE,EAAEyB,WAAW,GAAE,KAAA9F,OAAIqE,EAAE0B,WAAW,IACxCrB,MAAML,EAAEyB,UACRC,UAAU1B,EAAE0B,WACd,4BAAAF,EAAAL,OAAA,GAAAE,EAAA,IAbe5C,EAerB,EAEMd,SAAQ,WAAE,IAAAgE,EAAA,YAAAlD,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAiD,IAAA,IAAAC,EAAAC,EAAAR,EAAAS,EAAAC,EAAAC,EAAApG,EAAAqG,EAAAC,EAAAC,EAAAC,EAAAlD,EAAAmD,EAAA,OAAA5D,EAAAA,EAAAA,KAAAW,MAAA,SAAAkD,GAAA,eAAAA,EAAAhD,KAAAgD,EAAA/C,MAAA,OAyCqB,OAzCrBsC,EACkDH,EAAKlC,OAAOC,MAAnE4B,EAAcQ,EAAdR,eAAeS,EAAgBD,EAAhBC,iBAAiBC,EAAIF,EAAJE,KAAKC,EAAKH,EAALG,MAAMpG,EAAUiG,EAAVjG,WAG5CqG,EAAK,CACPrG,WAAY,KACZyF,eAAgBA,EAChBS,iBAAkBA,EAClBC,KAAMA,EACNC,MAAOA,EACPtB,aAAc,KACd1D,gBAAiB,KACjByD,OAAQ,KACRhE,OAAQ,KACR8F,SAAU,KACVC,eAAgB,KAChBC,WAAY,KACZ9B,YAAa,KACbxD,eAAgB,KAChBuF,YAAa,KACbC,gBAAiB,KACjBC,UAAW,EACXC,SAAU,KACVC,WAAY,KACZC,SAAU,KACVC,WAAY,KACZC,QAAS,KACTC,QAAS,MAGPhB,EAAQtG,EAAa8F,EAAKzD,SAAUgE,EAEpCE,GAAKgB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACJjB,GAAM,IACTzB,OAAOiB,EAAKxF,KACZqG,SAAqE,QAA7DX,EAAEF,EAAKnF,sBAAsB6G,QAAO,SAAArD,GAAC,OAAEA,EAAEK,OAAOsB,EAAKxF,IAAI,IAAE,UAAE,IAAA0F,OAAA,EAA3DA,EAA6DH,UACvEhF,OAAOiF,EAAKjF,OACZiE,aAAagB,EAAKhF,KAClBiE,YAAYe,EAAK5E,MACjBE,gBAAgB0E,EAAK1E,gBACrBG,eAAeuE,EAAKvE,eACpByF,UAAWlB,EAAKtE,aAAakF,EAAA/C,KAAA,GAILc,EAAAA,EAAAA,GAAW,CACnCC,IAAI,6BACJC,OAAQ3E,EAAW,MAAM,OACzByH,QAAQlB,IACX,OAAAC,EAAAE,EAAA9B,KAJMtB,EAAIkD,EAAJlD,KAAImD,EAAAD,EAACrE,UAAI,IAAAsE,EAAC,CAAC,EAACA,EAMV,KAANnD,KACCoE,EAAAA,EAAAA,IAAiB,SACjB5B,EAAK6B,QAAQC,IAAI,IACrB,yBAAAlB,EAAApB,OAAA,GAAAS,EAAA,IAtDYnD,EAwDhB,I,WC5OR,MAAMiF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://sinoboom-mom/./src/views/storageManagement/errorAdd.vue","webpack://sinoboom-mom/./src/views/storageManagement/errorAdd.vue?02d0"],"sourcesContent":["<template>\r\n    <span>\r\n        <AppBarPage>\r\n        </AppBarPage>\r\n\r\n        <v-row no-gutters style=\"margin-bottom:8px;\">\r\n            <v-col cols=\"8\">\r\n                <v-icon icon=\"mdi-bullhorn\" size=\"16\" color=\"error\"></v-icon>\r\n                <span style=\"padding-left:6px;\">{{ `${abnormalId?'修改异常':'添加异常'}` }}</span>\r\n            </v-col>\r\n            <v-col cols=\"4\" class=\"text-right\" style=\"padding-right:6px\">\r\n                <!-- <span class=\"font-weight-medium text-right text-teal-lighten-1\" color=\"primary\">{{ bufferRow.equipmentName }}</span> -->\r\n            </v-col>\r\n        </v-row>\r\n\r\n\r\n\r\n        <v-sheet elevation=\"2\" rounded class=\"custem-card\">\r\n\r\n\r\n\r\n            <SelectComponents \r\n                v-model=\"user\"\r\n                ref=\"select11\"\r\n                label=\"物料编码\"\r\n                :option=\"repairmanSelectOption\"\r\n            />\r\n\r\n            <van-field v-model=\"reqQty\" type=\"number\" placeholder=\"请输入\" label=\"数量\" autocomplete=\"off\" />\r\n\r\n\r\n            <SelectComponents \r\n                v-model=\"type\"\r\n                ref=\"select22\"\r\n                label=\"异常类型\"\r\n                :option=\"typeSelectOption\"\r\n            />\r\n\r\n            <SelectComponents \r\n                v-model=\"type2\"\r\n                ref=\"select33\"\r\n                label=\"处理类型\"\r\n                :option=\"type2SelectOption\"\r\n            />\r\n\r\n\r\n            <van-field v-model=\"abnormalExplain\" placeholder=\"请输入\" label=\"异常说明\" autocomplete=\"off\" />\r\n            <van-field v-if=\"isDispose\" v-model=\"disposeExplain\" placeholder=\"请输入\" label=\"处理说明\" autocomplete=\"off\" />\r\n   \r\n\r\n            <SelectComponents \r\n                v-if=\"isDispose\"\r\n                v-model=\"dataStatus\"\r\n                ref=\"select55\"\r\n                label=\"数据状态\"\r\n                :option=\"dataStatusSelectOption\"\r\n            />\r\n\r\n        </v-sheet>\r\n\r\n        <v-row no-gutters>\r\n            <v-col cols=\"12\">\r\n                <v-btn\r\n                    block\r\n                    color=\"primary\"\r\n                    @click=\"onSubmit\"\r\n                >\r\n                    提交\r\n                </v-btn>\r\n            </v-col>\r\n\r\n        </v-row>\r\n        <div style=\"height: 80px;\"></div>\r\n    </span>\r\n</template>\r\n<script>\r\n    import AppBarPage from '@/components/AppBar.vue'\r\n    import SelectComponents from '@/packages/Select.vue'\r\n\r\n\r\n    import { showSuccessToast,showFailToast } from 'vant'\r\n    import {httpHandle} from '@/http/http'  // api\r\n\r\n\r\n\r\n\r\n  export default {\r\n    components:{\r\n        AppBarPage,\r\n        SelectComponents\r\n    },\r\n    data: () => ({\r\n        bufferRow:{},  // 行数据\r\n        abnormalId:'',\r\n\r\n        editData:{},\r\n        isDispose:false,  // 处理\r\n\r\n        user:\"\",     // 物料编码    \r\n        repairmanSelectOption:[],   // 物料编码 数据\r\n\r\n        reqQty:\"\",  // 数量\r\n\r\n        \r\n        type:\"\",     // 异常类型    \r\n        typeSelectOption:[],   // 异常类型 数据\r\n\r\n        type2:\"\",     // 处理异常类型    \r\n        type2SelectOption:[],   // 处理异常类型 数据\r\n\r\n        abnormalExplain:\"\",  // 异常说明\r\n        disposeExplain:\"\",  // 处理说明\r\n\r\n        dataStatus:\"\",   // 数据状态 \r\n        dataStatusSelectOption:[],   // 数据状态 \r\n    }),\r\n    created(){\r\n        this.initFunc()\r\n        this.initRepairman()  \r\n    },\r\n    methods: {\r\n        // 初始化\r\n        async initFunc(){\r\n            const {abnormalId,isDispose}=this.$route.query\r\n\r\n            this.abnormalId=abnormalId\r\n            this.isDispose=isDispose\r\n            const _bufferDictionaries=JSON.parse(localStorage.getItem(\"bufferDictionaries\")||\"{}\")\r\n\r\n            // 异常类型\r\n            const _selectAttribute=_bufferDictionaries[\"ccgl_abnormal_type\"]||[]    // 属性\r\n            this.typeSelectOption=_selectAttribute.map(o=>Object.assign({text:o.lable,value:o.value}))   // 属性数据\r\n\r\n            // 处理类型\r\n            const _selectAttribute2=_bufferDictionaries[\"ccgl_abnomal_dispose\"]||[]    // 属性\r\n            this.type2SelectOption=_selectAttribute2.map(o=>Object.assign({text:o.lable,value:o.value}))   // 属性数据\r\n\r\n            // 数据\r\n            const _selectAttribute3=_bufferDictionaries[\"ccgl_abnomal_state\"]||[]    //  数据状态类型\r\n            this.dataStatusSelectOption=_selectAttribute3.map(o=>Object.assign({text:o.lable,value:o.value}))   // 数据状态 数据\r\n\r\n            \r\n            // 修改\r\n            const {code,data={}}= await httpHandle({\r\n                url: '/iiot/deliverySlipAbnormal/' + abnormalId,\r\n                method:\"get\",\r\n            }) \r\n\r\n            if(code==200){\r\n                // console.log(data)\r\n                this.editData=data\r\n\r\n                this.user=data.partNo,     // 物料编码   \r\n                this.reqQty=data.reqQty  // 数量\r\n                this.type=data.abnormalType     // 异常类型    \r\n                this.type2=data.disposeType    // 处理异常类型    \r\n                this.abnormalExplain=data.abnormalExplain  // 异常说明\r\n                // this.disposeExplain=data.disposeExplain // 处理说明\r\n\r\n\r\n                this.$nextTick(()=>{\r\n                    this.$refs.select11 && this.$refs.select11.setValue(data.partNo)\r\n                    this.$refs.select22 && this.$refs.select22.setValue(data.abnormalType)\r\n                    this.$refs.select33 && this.$refs.select33.setValue(data.disposeType)\r\n                })\r\n            }\r\n        },\r\n        // 物料编码\r\n        async initRepairman(){\r\n            \r\n            const {deliverySlipId}=this.$route.query\r\n\r\n            const _data= await httpHandle({\r\n                url:`/iiot/deliverySlipPart/dict/${deliverySlipId}`,\r\n                method:\"get\",\r\n            }) \r\n\r\n            this.repairmanSelectOption=(_data||[]).map(o=>Object.assign({\r\n                text:`${o.dictValue||''}-${o.dictLabel||''}`,\r\n                value:o.dictValue,\r\n                dictLabel:o.dictLabel\r\n            }))\r\n\r\n        },\r\n        // 确认维修\r\n        async onSubmit(){\r\n            const {deliverySlipId,deliverySlipType,poNo,srmNo,abnormalId}=this.$route.query\r\n\r\n\r\n            const json={\r\n                abnormalId: null,\r\n                deliverySlipId: deliverySlipId,\r\n                deliverySlipType: deliverySlipType,\r\n                poNo: poNo,\r\n                srmNo: srmNo,\r\n                abnormalType: null,\r\n                abnormalExplain: null,\r\n                partNo: null,\r\n                reqQty: null,\r\n                partName: null,\r\n                submitDatetime: null,\r\n                submitUser: null,\r\n                disposeType: null,\r\n                disposeExplain: null,\r\n                disposeUser: null,\r\n                disposeDatetime: null,\r\n                dataState: 2,\r\n                createBy: null,\r\n                createTime: null,\r\n                updateBy: null,\r\n                updateTime: null,\r\n                delFlag: null,\r\n                version: null\r\n            }\r\n            \r\n            const _json2= abnormalId ? this.editData :json\r\n\r\n            const _json={\r\n                ..._json2,\r\n                partNo:this.user,     // 物料编码   \r\n                partName: this.repairmanSelectOption.filter(o=>o.value==this.user)[0]?.dictLabel,\r\n                reqQty:this.reqQty,  // 数量\r\n                abnormalType:this.type,     // 异常类型    \r\n                disposeType:this.type2,     // 处理异常类型    \r\n                abnormalExplain:this.abnormalExplain,  // 异常说明\r\n                disposeExplain:this.disposeExplain,  // 处理说明\r\n                dataState: this.dataStatus   // 数据状态\r\n            }\r\n\r\n\r\n            const {code,data={}}= await httpHandle({\r\n                url:'/iiot/deliverySlipAbnormal',\r\n                method: abnormalId?'put':'post',\r\n                payload:_json\r\n            })\r\n\r\n            if(code==200){\r\n                showSuccessToast('提交成功！')\r\n                this.$router.go(-1) \r\n            }\r\n            \r\n        },\r\n\r\n\r\n    },\r\n  }\r\n</script>","import { render } from \"./errorAdd.vue?vue&type=template&id=aaa4c1b0\"\nimport script from \"./errorAdd.vue?vue&type=script&lang=js\"\nexport * from \"./errorAdd.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\codeAllen\\\\xingbangh5app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["style","_createElementVNode","_createElementBlock","_createVNode","_component_AppBarPage","_component_v_row","_component_v_col","cols","_component_v_icon","icon","size","color","_hoisted_1","_toDisplayString","concat","_ctx","abnormalId","class","_component_v_sheet","elevation","rounded","_component_SelectComponents","user","$event","ref","label","option","repairmanSelectOption","_component_van_field","reqQty","type","placeholder","autocomplete","typeSelectOption","type2","type2SelectOption","abnormalExplain","isDispose","_createBlock","disposeExplain","dataStatus","dataStatusSelectOption","_component_v_btn","block","onClick","$options","onSubmit","_hoisted_2","components","AppBarPage","SelectComponents","data","bufferRow","editData","created","this","initFunc","initRepairman","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this$$route$query","_bufferDictionaries","_selectAttribute","_selectAttribute2","_selectAttribute3","_yield$httpHandle","code","_yield$httpHandle$dat","wrap","_context","prev","next","$route","query","JSON","parse","localStorage","getItem","map","o","Object","assign","text","lable","value","httpHandle","url","method","sent","partNo","abnormalType","disposeType","$nextTick","$refs","select11","setValue","select22","select33","stop","_this2","_callee2","deliverySlipId","_data","_context2","dictValue","dictLabel","_this3","_callee3","_this3$repairmanSelec","_this3$$route$query","deliverySlipType","poNo","srmNo","json","_json2","_json","_yield$httpHandle2","_yield$httpHandle2$da","_context3","partName","submitDatetime","submitUser","disposeUser","disposeDatetime","dataState","createBy","createTime","updateBy","updateTime","delFlag","version","_objectSpread","filter","payload","showSuccessToast","$router","go","__exports__","render"],"sourceRoot":""}